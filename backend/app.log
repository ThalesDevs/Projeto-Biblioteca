2025-08-16 16:01:34,720 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-16 16:01:34,720 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-16 16:01:41,815 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:01:41,815 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:01:41,815 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:01:41,815 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:01:41,815 - Routes - INFO -  2. /api/auth/cadastro                  → GET, POST
2025-08-16 16:01:41,815 - Routes - INFO -  3. /api/auth/debug-usuario             → GET
2025-08-16 16:01:41,815 - Routes - INFO -  4. /api/auth/login                     → GET, POST
2025-08-16 16:01:41,815 - Routes - INFO -  5. /api/auth/logout                    → GET
2025-08-16 16:01:41,815 - Routes - INFO -  6. /api/auth/perfil                    → GET
2025-08-16 16:01:41,815 - Routes - INFO -  7. /api/auth/status                    → GET
2025-08-16 16:01:41,815 - Routes - INFO -  8. /api/carrinho/                      → GET
2025-08-16 16:01:41,819 - Routes - INFO -  9. /api/carrinho/adicionar             → POST
2025-08-16 16:01:41,819 - Routes - INFO - 10. /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:01:41,819 - Routes - INFO - 11. /api/carrinho/contador              → GET
2025-08-16 16:01:41,819 - Routes - INFO - 12. /api/carrinho/itens                 → GET
2025-08-16 16:01:41,819 - Routes - INFO - 13. /api/carrinho/limpar                → DELETE
2025-08-16 16:01:41,819 - Routes - INFO - 14. /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:01:41,819 - Routes - INFO - 15. /api/carrinho/status                → GET
2025-08-16 16:01:41,819 - Routes - INFO - 16. /api/livros/                        → GET, POST
2025-08-16 16:01:41,819 - Routes - INFO - 17. /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:01:41,819 - Routes - INFO - 18. /api/livros/buscar/autor            → GET
2025-08-16 16:01:41,820 - Routes - INFO - 19. /api/livros/buscar/estoque          → GET
2025-08-16 16:01:41,820 - Routes - INFO - 20. /api/livros/buscar/preco            → GET
2025-08-16 16:01:41,820 - Routes - INFO - 21. /api/livros/buscar/titulo           → GET
2025-08-16 16:01:41,820 - Routes - INFO - 22. /api/livros/cadastrar-form          → POST
2025-08-16 16:01:41,820 - Routes - INFO - 23. /api/livros/estatisticas            → GET
2025-08-16 16:01:41,820 - Routes - INFO - 24. /api/livros/listar                  → GET
2025-08-16 16:01:41,820 - Routes - INFO - 25. /api/livros/status                  → GET
2025-08-16 16:01:41,821 - Routes - INFO - 26. /api/livros/{livro_id}              → DELETE, GET, PUT
2025-08-16 16:01:41,821 - Routes - INFO - 27. /api/pedidos/                       → GET
2025-08-16 16:01:41,821 - Routes - INFO - 28. /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:01:41,821 - Routes - INFO - 29. /api/pedidos/finalizar              → POST
2025-08-16 16:01:41,821 - Routes - INFO - 30. /api/pedidos/listar                 → GET
2025-08-16 16:01:41,821 - Routes - INFO - 31. /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:01:41,821 - Routes - INFO - 32. /api/pedidos/status                 → GET
2025-08-16 16:01:41,821 - Routes - INFO - 33. /api/pedidos/{pedido_id}            → GET
2025-08-16 16:01:41,821 - Routes - INFO - 34. /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:01:41,821 - Routes - INFO - 35. /api/usuarios/                      → GET
2025-08-16 16:01:41,821 - Routes - INFO - 36. /api/usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:01:41,821 - Routes - INFO - 37. /api/usuarios/admin/usuarios        → GET
2025-08-16 16:01:41,821 - Routes - INFO - 38. /api/usuarios/cadastrar             → POST
2025-08-16 16:01:41,821 - Routes - INFO - 39. /api/usuarios/cadastrar-form        → POST
2025-08-16 16:01:41,821 - Routes - INFO - 40. /api/usuarios/listar                → GET
2025-08-16 16:01:41,821 - Routes - INFO - 41. /api/usuarios/perfil                → DELETE, GET, PUT
2025-08-16 16:01:41,821 - Routes - INFO - 42. /api/usuarios/status                → GET
2025-08-16 16:01:41,821 - Routes - INFO - 43. /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:01:41,822 - Routes - INFO - 46. /health                             → GET
2025-08-16 16:01:41,822 - Routes - INFO - 47. /info                               → GET
2025-08-16 16:01:41,822 - Routes - INFO - ================================
2025-08-16 16:01:44,001 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:01:44,001 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:01:44,043 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:01:44,043 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:01:44,043 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/login                     → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/login                     → POST
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/logout                    → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/debug-usuario             → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/auth/status                    → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/                      → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/cadastrar-form        → POST
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/admin/usuarios        → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:01:44,043 - Routes - INFO - /api/usuarios/status                → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/livros/                        → GET
2025-08-16 16:01:44,043 - Routes - INFO - /api/livros/listar                  → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/                        → POST
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/livros/status                  → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/                      → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/carrinho/status                → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/                       → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:01:44,048 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-16 16:01:44,048 - Routes - INFO - /                                   → GET
2025-08-16 16:01:44,048 - Routes - INFO - /health                             → GET
2025-08-16 16:01:44,048 - Routes - INFO - /info                               → GET
2025-08-16 16:01:44,048 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:01:44,048 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:02:49,559 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-16 16:02:49,559 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-16 16:02:53,399 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:02:53,399 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:02:53,399 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:02:53,399 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:02:53,399 - Routes - INFO -  2. /api/auth/cadastro                  → GET, POST
2025-08-16 16:02:53,399 - Routes - INFO -  3. /api/auth/debug-usuario             → GET
2025-08-16 16:02:53,399 - Routes - INFO -  4. /api/auth/login                     → GET, POST
2025-08-16 16:02:53,399 - Routes - INFO -  5. /api/auth/logout                    → GET
2025-08-16 16:02:53,399 - Routes - INFO -  6. /api/auth/perfil                    → GET
2025-08-16 16:02:53,402 - Routes - INFO -  7. /api/auth/status                    → GET
2025-08-16 16:02:53,402 - Routes - INFO -  8. /api/carrinho/                      → GET
2025-08-16 16:02:53,402 - Routes - INFO -  9. /api/carrinho/adicionar             → POST
2025-08-16 16:02:53,402 - Routes - INFO - 10. /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:02:53,402 - Routes - INFO - 11. /api/carrinho/contador              → GET
2025-08-16 16:02:53,402 - Routes - INFO - 12. /api/carrinho/itens                 → GET
2025-08-16 16:02:53,402 - Routes - INFO - 13. /api/carrinho/limpar                → DELETE
2025-08-16 16:02:53,402 - Routes - INFO - 14. /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:02:53,402 - Routes - INFO - 15. /api/carrinho/status                → GET
2025-08-16 16:02:53,402 - Routes - INFO - 16. /api/livros/                        → GET, POST
2025-08-16 16:02:53,402 - Routes - INFO - 17. /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:02:53,402 - Routes - INFO - 18. /api/livros/buscar/autor            → GET
2025-08-16 16:02:53,402 - Routes - INFO - 19. /api/livros/buscar/estoque          → GET
2025-08-16 16:02:53,402 - Routes - INFO - 20. /api/livros/buscar/preco            → GET
2025-08-16 16:02:53,402 - Routes - INFO - 21. /api/livros/buscar/titulo           → GET
2025-08-16 16:02:53,402 - Routes - INFO - 22. /api/livros/cadastrar-form          → POST
2025-08-16 16:02:53,402 - Routes - INFO - 23. /api/livros/estatisticas            → GET
2025-08-16 16:02:53,402 - Routes - INFO - 24. /api/livros/listar                  → GET
2025-08-16 16:02:53,402 - Routes - INFO - 25. /api/livros/status                  → GET
2025-08-16 16:02:53,402 - Routes - INFO - 26. /api/livros/{livro_id}              → DELETE, GET, PUT
2025-08-16 16:02:53,402 - Routes - INFO - 27. /api/pedidos/                       → GET
2025-08-16 16:02:53,402 - Routes - INFO - 28. /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:02:53,402 - Routes - INFO - 29. /api/pedidos/finalizar              → POST
2025-08-16 16:02:53,402 - Routes - INFO - 30. /api/pedidos/listar                 → GET
2025-08-16 16:02:53,402 - Routes - INFO - 31. /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:02:53,402 - Routes - INFO - 32. /api/pedidos/status                 → GET
2025-08-16 16:02:53,402 - Routes - INFO - 33. /api/pedidos/{pedido_id}            → GET
2025-08-16 16:02:53,402 - Routes - INFO - 34. /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:02:53,402 - Routes - INFO - 35. /api/usuarios/                      → GET
2025-08-16 16:02:53,402 - Routes - INFO - 36. /api/usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:02:53,402 - Routes - INFO - 37. /api/usuarios/admin/usuarios        → GET
2025-08-16 16:02:53,404 - Routes - INFO - 38. /api/usuarios/cadastrar             → POST
2025-08-16 16:02:53,404 - Routes - INFO - 39. /api/usuarios/cadastrar-form        → POST
2025-08-16 16:02:53,404 - Routes - INFO - 40. /api/usuarios/listar                → GET
2025-08-16 16:02:53,404 - Routes - INFO - 41. /api/usuarios/perfil                → DELETE, GET, PUT
2025-08-16 16:02:53,404 - Routes - INFO - 42. /api/usuarios/status                → GET
2025-08-16 16:02:53,404 - Routes - INFO - 43. /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:02:53,404 - Routes - INFO - 46. /health                             → GET
2025-08-16 16:02:53,404 - Routes - INFO - 47. /info                               → GET
2025-08-16 16:02:53,404 - Routes - INFO - ================================
2025-08-16 16:02:55,591 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:02:55,591 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:02:55,640 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:02:55,640 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:02:55,640 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/login                     → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/login                     → POST
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/logout                    → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/debug-usuario             → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/auth/status                    → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/                      → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/cadastrar-form        → POST
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/admin/usuarios        → GET
2025-08-16 16:02:55,640 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:02:55,644 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:02:55,644 - Routes - INFO - /api/usuarios/status                → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/                        → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/listar                  → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/                        → POST
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/livros/status                  → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/carrinho/                      → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-16 16:02:55,644 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-16 16:02:55,644 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:02:55,645 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:02:55,645 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-16 16:02:55,645 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/carrinho/status                → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/                       → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:02:55,645 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-16 16:02:55,645 - Routes - INFO - /                                   → GET
2025-08-16 16:02:55,645 - Routes - INFO - /health                             → GET
2025-08-16 16:02:55,645 - Routes - INFO - /info                               → GET
2025-08-16 16:02:55,645 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:02:55,645 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:07:22,422 - UsuarioRouter - ERROR - Erro ao carregar página de usuários: 'usuarios.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\usuario_router.py", line 27, in pagina_usuarios
    return render_template_with_user(templates, "usuarios.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\utils\template_utils.py", line 38, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'usuarios.html' not found in search path: 'app/templates'
2025-08-16 16:08:49,726 - UsuarioRouter - INFO - Tentativa de cadastro via JSON: noia@example.com
2025-08-16 16:08:49,820 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-16 16:08:50,097 - UsuarioRouter - INFO - ✅ Usuário cadastrado via JSON: noia@example.com
2025-08-16 16:09:35,417 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-16 16:09:35,417 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-16 16:09:39,292 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:09:39,292 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:09:39,292 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:09:39,292 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:09:39,292 - Routes - INFO -  2. /api/auth/cadastro                  → GET, POST
2025-08-16 16:09:39,292 - Routes - INFO -  3. /api/auth/debug-usuario             → GET
2025-08-16 16:09:39,292 - Routes - INFO -  4. /api/auth/login                     → GET, POST
2025-08-16 16:09:39,292 - Routes - INFO -  5. /api/auth/logout                    → GET
2025-08-16 16:09:39,292 - Routes - INFO -  6. /api/auth/perfil                    → GET
2025-08-16 16:09:39,292 - Routes - INFO -  7. /api/auth/status                    → GET
2025-08-16 16:09:39,292 - Routes - INFO -  8. /api/carrinho/                      → GET
2025-08-16 16:09:39,292 - Routes - INFO -  9. /api/carrinho/adicionar             → POST
2025-08-16 16:09:39,292 - Routes - INFO - 10. /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:09:39,292 - Routes - INFO - 11. /api/carrinho/contador              → GET
2025-08-16 16:09:39,292 - Routes - INFO - 12. /api/carrinho/itens                 → GET
2025-08-16 16:09:39,292 - Routes - INFO - 13. /api/carrinho/limpar                → DELETE
2025-08-16 16:09:39,292 - Routes - INFO - 14. /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:09:39,292 - Routes - INFO - 15. /api/carrinho/status                → GET
2025-08-16 16:09:39,292 - Routes - INFO - 16. /api/livros/                        → GET, POST
2025-08-16 16:09:39,292 - Routes - INFO - 17. /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:09:39,292 - Routes - INFO - 18. /api/livros/buscar/autor            → GET
2025-08-16 16:09:39,292 - Routes - INFO - 19. /api/livros/buscar/estoque          → GET
2025-08-16 16:09:39,292 - Routes - INFO - 20. /api/livros/buscar/preco            → GET
2025-08-16 16:09:39,292 - Routes - INFO - 21. /api/livros/buscar/titulo           → GET
2025-08-16 16:09:39,292 - Routes - INFO - 22. /api/livros/cadastrar-form          → POST
2025-08-16 16:09:39,292 - Routes - INFO - 23. /api/livros/estatisticas            → GET
2025-08-16 16:09:39,292 - Routes - INFO - 24. /api/livros/listar                  → GET
2025-08-16 16:09:39,292 - Routes - INFO - 25. /api/livros/status                  → GET
2025-08-16 16:09:39,292 - Routes - INFO - 26. /api/livros/{livro_id}              → DELETE, GET, PUT
2025-08-16 16:09:39,292 - Routes - INFO - 27. /api/pedidos/                       → GET
2025-08-16 16:09:39,292 - Routes - INFO - 28. /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:09:39,292 - Routes - INFO - 29. /api/pedidos/finalizar              → POST
2025-08-16 16:09:39,292 - Routes - INFO - 30. /api/pedidos/listar                 → GET
2025-08-16 16:09:39,292 - Routes - INFO - 31. /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:09:39,292 - Routes - INFO - 32. /api/pedidos/status                 → GET
2025-08-16 16:09:39,292 - Routes - INFO - 33. /api/pedidos/{pedido_id}            → GET
2025-08-16 16:09:39,295 - Routes - INFO - 34. /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:09:39,295 - Routes - INFO - 35. /api/usuarios/                      → GET
2025-08-16 16:09:39,295 - Routes - INFO - 36. /api/usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:09:39,295 - Routes - INFO - 37. /api/usuarios/admin/usuarios        → GET
2025-08-16 16:09:39,295 - Routes - INFO - 38. /api/usuarios/cadastrar             → POST
2025-08-16 16:09:39,295 - Routes - INFO - 39. /api/usuarios/cadastrar-form        → POST
2025-08-16 16:09:39,295 - Routes - INFO - 40. /api/usuarios/listar                → GET
2025-08-16 16:09:39,295 - Routes - INFO - 41. /api/usuarios/perfil                → DELETE, GET, PUT
2025-08-16 16:09:39,295 - Routes - INFO - 42. /api/usuarios/status                → GET
2025-08-16 16:09:39,295 - Routes - INFO - 43. /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:09:39,295 - Routes - INFO - 46. /health                             → GET
2025-08-16 16:09:39,295 - Routes - INFO - 47. /info                               → GET
2025-08-16 16:09:39,295 - Routes - INFO - ================================
2025-08-16 16:09:41,251 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:09:41,251 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:09:41,282 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:09:41,282 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:09:41,282 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/login                     → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/login                     → POST
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/logout                    → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/debug-usuario             → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/auth/status                    → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/                      → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/cadastrar-form        → POST
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-16 16:09:41,292 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-16 16:09:41,293 - Routes - INFO - /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/usuarios/admin/usuarios        → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:09:41,293 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:09:41,293 - Routes - INFO - /api/usuarios/status                → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/livros/                        → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/livros/listar                  → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-16 16:09:41,293 - Routes - INFO - /api/livros/                        → POST
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/livros/status                  → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/                      → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/carrinho/status                → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/                       → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:09:41,294 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-16 16:09:41,294 - Routes - INFO - /                                   → GET
2025-08-16 16:09:41,294 - Routes - INFO - /health                             → GET
2025-08-16 16:09:41,294 - Routes - INFO - /info                               → GET
2025-08-16 16:09:41,294 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:09:41,294 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:11:15,060 - LivroRouter - INFO - Listados 2 livros
2025-08-16 16:12:14,136 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-16 16:12:14,138 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-16 16:12:16,659 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:12:16,660 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:12:16,701 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:12:16,701 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:12:16,701 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:12:16,701 - Routes - INFO - /api/auth/login                     → GET
2025-08-16 16:12:16,701 - Routes - INFO - /api/auth/login                     → POST
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/logout                    → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/debug-usuario             → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/auth/status                    → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/                      → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/cadastrar-form        → POST
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:12:16,702 - Routes - INFO - /api/usuarios/admin/usuarios        → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:12:16,703 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:12:16,703 - Routes - INFO - /api/usuarios/status                → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/                        → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/listar                  → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/                        → POST
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/livros/status                  → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/                      → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/carrinho/status                → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/                       → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:12:16,703 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-16 16:12:16,703 - Routes - INFO - /                                   → GET
2025-08-16 16:12:16,705 - Routes - INFO - /health                             → GET
2025-08-16 16:12:16,705 - Routes - INFO - /info                               → GET
2025-08-16 16:12:16,705 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:12:16,705 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:13:15,233 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-16 16:13:15,233 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-16 16:20:41,884 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:20:41,884 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:20:41,884 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:20:41,884 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:20:41,884 - Routes - INFO -  2. /api/auth/cadastro                  → GET, POST
2025-08-16 16:20:41,884 - Routes - INFO -  3. /api/auth/debug-usuario             → GET
2025-08-16 16:20:41,884 - Routes - INFO -  4. /api/auth/login                     → GET, POST
2025-08-16 16:20:41,884 - Routes - INFO -  5. /api/auth/logout                    → GET
2025-08-16 16:20:41,884 - Routes - INFO -  6. /api/auth/perfil                    → GET
2025-08-16 16:20:41,884 - Routes - INFO -  7. /api/auth/status                    → GET
2025-08-16 16:20:41,884 - Routes - INFO -  8. /api/carrinho/                      → GET
2025-08-16 16:20:41,884 - Routes - INFO -  9. /api/carrinho/adicionar             → POST
2025-08-16 16:20:41,885 - Routes - INFO - 10. /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:20:41,885 - Routes - INFO - 11. /api/carrinho/contador              → GET
2025-08-16 16:20:41,885 - Routes - INFO - 12. /api/carrinho/itens                 → GET
2025-08-16 16:20:41,885 - Routes - INFO - 13. /api/carrinho/limpar                → DELETE
2025-08-16 16:20:41,885 - Routes - INFO - 14. /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:20:41,885 - Routes - INFO - 15. /api/carrinho/status                → GET
2025-08-16 16:20:41,885 - Routes - INFO - 16. /api/livros/                        → GET, POST
2025-08-16 16:20:41,885 - Routes - INFO - 17. /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:20:41,885 - Routes - INFO - 18. /api/livros/buscar/autor            → GET
2025-08-16 16:20:41,885 - Routes - INFO - 19. /api/livros/buscar/estoque          → GET
2025-08-16 16:20:41,885 - Routes - INFO - 20. /api/livros/buscar/preco            → GET
2025-08-16 16:20:41,885 - Routes - INFO - 21. /api/livros/buscar/titulo           → GET
2025-08-16 16:20:41,885 - Routes - INFO - 22. /api/livros/cadastrar-form          → POST
2025-08-16 16:20:41,885 - Routes - INFO - 23. /api/livros/estatisticas            → GET
2025-08-16 16:20:41,885 - Routes - INFO - 24. /api/livros/listar                  → GET
2025-08-16 16:20:41,885 - Routes - INFO - 25. /api/livros/status                  → GET
2025-08-16 16:20:41,885 - Routes - INFO - 26. /api/livros/{livro_id}              → DELETE, GET, PUT
2025-08-16 16:20:41,885 - Routes - INFO - 27. /api/pedidos/                       → GET
2025-08-16 16:20:41,885 - Routes - INFO - 28. /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:20:41,885 - Routes - INFO - 29. /api/pedidos/finalizar              → POST
2025-08-16 16:20:41,885 - Routes - INFO - 30. /api/pedidos/listar                 → GET
2025-08-16 16:20:41,885 - Routes - INFO - 31. /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:20:41,885 - Routes - INFO - 32. /api/pedidos/status                 → GET
2025-08-16 16:20:41,885 - Routes - INFO - 33. /api/pedidos/{pedido_id}            → GET
2025-08-16 16:20:41,885 - Routes - INFO - 34. /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:20:41,885 - Routes - INFO - 35. /api/usuarios/                      → GET
2025-08-16 16:20:41,885 - Routes - INFO - 36. /api/usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:20:41,885 - Routes - INFO - 37. /api/usuarios/admin/usuarios        → GET
2025-08-16 16:20:41,885 - Routes - INFO - 38. /api/usuarios/cadastrar             → POST
2025-08-16 16:20:41,885 - Routes - INFO - 39. /api/usuarios/cadastrar-form        → POST
2025-08-16 16:20:41,885 - Routes - INFO - 40. /api/usuarios/listar                → GET
2025-08-16 16:20:41,885 - Routes - INFO - 41. /api/usuarios/perfil                → DELETE, GET, PUT
2025-08-16 16:20:41,885 - Routes - INFO - 42. /api/usuarios/status                → GET
2025-08-16 16:20:41,885 - Routes - INFO - 43. /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:20:41,885 - Routes - INFO - 46. /health                             → GET
2025-08-16 16:20:41,885 - Routes - INFO - 47. /info                               → GET
2025-08-16 16:20:41,885 - Routes - INFO - ================================
2025-08-16 16:20:43,781 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:20:43,787 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:20:43,822 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:20:43,828 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:20:43,828 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/login                     → GET
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/login                     → POST
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/logout                    → GET
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-16 16:20:43,828 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/auth/debug-usuario             → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/auth/status                    → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/                      → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/cadastrar-form        → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/verificar-email/{email} → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/admin/usuarios        → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:20:43,829 - Routes - INFO - /api/usuarios/status                → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/                        → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/listar                  → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/                        → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/livros/status                  → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/                      → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/carrinho/status                → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/                       → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-16 16:20:43,829 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-16 16:20:43,829 - Routes - INFO - /                                   → GET
2025-08-16 16:20:43,832 - Routes - INFO - /health                             → GET
2025-08-16 16:20:43,832 - Routes - INFO - /info                               → GET
2025-08-16 16:20:43,832 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:20:43,832 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:34:49,757 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:34:49,757 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:34:49,757 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:34:49,757 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:34:49,757 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-16 16:34:49,757 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-16 16:34:49,757 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-16 16:34:49,757 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-16 16:34:49,757 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-16 16:34:49,757 - Routes - INFO -  7. /auth/status                        → GET
2025-08-16 16:34:49,757 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-16 16:34:49,757 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-16 16:34:49,757 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-16 16:34:49,757 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-16 16:34:49,757 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-16 16:34:49,757 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-16 16:34:49,757 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-16 16:34:49,757 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-16 16:34:49,757 - Routes - INFO - 18. /health                             → GET
2025-08-16 16:34:49,757 - Routes - INFO - 19. /info                               → GET
2025-08-16 16:34:49,757 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-16 16:34:49,757 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-16 16:34:49,757 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-16 16:34:49,757 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-16 16:34:49,757 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-16 16:34:49,757 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-16 16:34:49,757 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-16 16:34:49,757 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-16 16:34:49,757 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-16 16:34:49,757 - Routes - INFO - 29. /livros/status                      → GET
2025-08-16 16:34:49,757 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-16 16:34:49,757 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-16 16:34:49,757 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-16 16:34:49,757 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-16 16:34:49,757 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-16 16:34:49,757 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-16 16:34:49,757 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-16 16:34:49,757 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-16 16:34:49,757 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-16 16:34:49,757 - Routes - INFO - 41. /usuarios/                          → GET
2025-08-16 16:34:49,757 - Routes - INFO - 42. /usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:34:49,757 - Routes - INFO - 43. /usuarios/admin/usuarios            → GET
2025-08-16 16:34:49,757 - Routes - INFO - 44. /usuarios/cadastrar                 → POST
2025-08-16 16:34:49,757 - Routes - INFO - 45. /usuarios/cadastrar-form            → POST
2025-08-16 16:34:49,757 - Routes - INFO - 46. /usuarios/listar                    → GET
2025-08-16 16:34:49,757 - Routes - INFO - 47. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-16 16:34:49,757 - Routes - INFO - 48. /usuarios/status                    → GET
2025-08-16 16:34:49,757 - Routes - INFO - 49. /usuarios/verificar-email/{email}   → GET
2025-08-16 16:34:49,757 - Routes - INFO - ================================
2025-08-16 16:34:51,759 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:34:51,759 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:34:51,815 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:34:51,815 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:34:51,818 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:34:51,818 - Routes - INFO - /auth/login                         → GET
2025-08-16 16:34:51,818 - Routes - INFO - /auth/login                         → POST
2025-08-16 16:34:51,818 - Routes - INFO - /auth/logout                        → GET
2025-08-16 16:34:51,818 - Routes - INFO - /auth/cadastro                      → GET
2025-08-16 16:34:51,818 - Routes - INFO - /auth/cadastro                      → POST
2025-08-16 16:34:51,818 - Routes - INFO - /auth/perfil                        → GET
2025-08-16 16:34:51,818 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-16 16:34:51,818 - Routes - INFO - /auth/status                        → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/                          → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/cadastrar-form            → POST
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/listar                    → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/verificar-email/{email}   → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/admin/usuarios            → GET
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:34:51,818 - Routes - INFO - /usuarios/status                    → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/                            → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/listar                      → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/                            → POST
2025-08-16 16:34:51,818 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-16 16:34:51,818 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-16 16:34:51,818 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-16 16:34:51,818 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/estatisticas                → GET
2025-08-16 16:34:51,818 - Routes - INFO - /livros/status                      → GET
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/                          → GET
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/itens                     → GET
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/contador                  → GET
2025-08-16 16:34:51,818 - Routes - INFO - /carrinho/status                    → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/                           → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/listar                     → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-16 16:34:51,818 - Routes - INFO - /pedidos/status                     → GET
2025-08-16 16:34:51,818 - Routes - INFO - /                                   → GET
2025-08-16 16:34:51,818 - Routes - INFO - /health                             → GET
2025-08-16 16:34:51,818 - Routes - INFO - /info                               → GET
2025-08-16 16:34:51,822 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:34:51,822 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-16 16:38:19,004 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-16 16:38:19,004 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-16 16:38:19,004 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-16 16:38:19,004 - Routes - INFO -  1. /                                   → GET
2025-08-16 16:38:19,004 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-16 16:38:19,004 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-16 16:38:19,004 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-16 16:38:19,004 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-16 16:38:19,004 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-16 16:38:19,004 - Routes - INFO -  7. /auth/status                        → GET
2025-08-16 16:38:19,004 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-16 16:38:19,004 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-16 16:38:19,004 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-16 16:38:19,004 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-16 16:38:19,004 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-16 16:38:19,006 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-16 16:38:19,006 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-16 16:38:19,006 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-16 16:38:19,006 - Routes - INFO - 18. /health                             → GET
2025-08-16 16:38:19,006 - Routes - INFO - 19. /info                               → GET
2025-08-16 16:38:19,006 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-16 16:38:19,006 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-16 16:38:19,007 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-16 16:38:19,007 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-16 16:38:19,007 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-16 16:38:19,007 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-16 16:38:19,007 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-16 16:38:19,007 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-16 16:38:19,007 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-16 16:38:19,007 - Routes - INFO - 29. /livros/status                      → GET
2025-08-16 16:38:19,007 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-16 16:38:19,007 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-16 16:38:19,007 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-16 16:38:19,007 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-16 16:38:19,007 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-16 16:38:19,007 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-16 16:38:19,007 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-16 16:38:19,007 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-16 16:38:19,007 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-16 16:38:19,007 - Routes - INFO - 41. /usuarios/                          → GET
2025-08-16 16:38:19,007 - Routes - INFO - 42. /usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-16 16:38:19,007 - Routes - INFO - 43. /usuarios/admin/usuarios            → GET
2025-08-16 16:38:19,007 - Routes - INFO - 44. /usuarios/cadastrar                 → POST
2025-08-16 16:38:19,007 - Routes - INFO - 45. /usuarios/cadastrar-form            → POST
2025-08-16 16:38:19,007 - Routes - INFO - 46. /usuarios/listar                    → GET
2025-08-16 16:38:19,007 - Routes - INFO - 47. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-16 16:38:19,007 - Routes - INFO - 48. /usuarios/status                    → GET
2025-08-16 16:38:19,007 - Routes - INFO - 49. /usuarios/verificar-email/{email}   → GET
2025-08-16 16:38:19,007 - Routes - INFO - ================================
2025-08-16 16:38:21,140 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-16 16:38:21,140 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-16 16:38:21,179 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-16 16:38:21,179 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-16 16:38:21,179 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-16 16:38:21,179 - Routes - INFO - /auth/login                         → GET
2025-08-16 16:38:21,179 - Routes - INFO - /auth/login                         → POST
2025-08-16 16:38:21,179 - Routes - INFO - /auth/logout                        → GET
2025-08-16 16:38:21,179 - Routes - INFO - /auth/cadastro                      → GET
2025-08-16 16:38:21,181 - Routes - INFO - /auth/cadastro                      → POST
2025-08-16 16:38:21,181 - Routes - INFO - /auth/perfil                        → GET
2025-08-16 16:38:21,181 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-16 16:38:21,181 - Routes - INFO - /auth/status                        → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/                          → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/cadastrar-form            → POST
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/listar                    → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/verificar-email/{email}   → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/admin/usuarios            → GET
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → PUT
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-16 16:38:21,181 - Routes - INFO - /usuarios/status                    → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/                            → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/listar                      → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/                            → POST
2025-08-16 16:38:21,181 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-16 16:38:21,181 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-16 16:38:21,181 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-16 16:38:21,181 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/estatisticas                → GET
2025-08-16 16:38:21,181 - Routes - INFO - /livros/status                      → GET
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/                          → GET
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/itens                     → GET
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/contador                  → GET
2025-08-16 16:38:21,181 - Routes - INFO - /carrinho/status                    → GET
2025-08-16 16:38:21,181 - Routes - INFO - /pedidos/                           → GET
2025-08-16 16:38:21,181 - Routes - INFO - /pedidos/listar                     → GET
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-16 16:38:21,184 - Routes - INFO - /pedidos/status                     → GET
2025-08-16 16:38:21,184 - Routes - INFO - /                                   → GET
2025-08-16 16:38:21,184 - Routes - INFO - /health                             → GET
2025-08-16 16:38:21,184 - Routes - INFO - /info                               → GET
2025-08-16 16:38:21,184 - Routes - INFO - Total de rotas registradas: 54
2025-08-16 16:38:21,184 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 10:36:25,879 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 10:36:25,879 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 10:36:25,879 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 10:36:25,879 - Routes - INFO -  1. /                                   → GET
2025-08-20 10:36:25,879 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 10:36:25,879 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 10:36:25,879 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 10:36:25,879 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 10:36:25,879 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 10:36:25,879 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 10:36:25,879 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 10:36:25,879 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 10:36:25,879 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:36:25,879 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 10:36:25,879 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 10:36:25,879 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 10:36:25,879 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:36:25,879 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 10:36:25,879 - Routes - INFO - 18. /health                             → GET
2025-08-20 10:36:25,879 - Routes - INFO - 19. /info                               → GET
2025-08-20 10:36:25,879 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 10:36:25,879 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 10:36:25,879 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 10:36:25,879 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 10:36:25,879 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 10:36:25,879 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 10:36:25,879 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 10:36:25,879 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 10:36:25,879 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 10:36:25,892 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 10:36:25,892 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 10:36:25,892 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 10:36:25,892 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 10:36:25,892 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 10:36:25,892 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 10:36:25,892 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:36:25,892 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 10:36:25,892 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 10:36:25,892 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:36:25,892 - Routes - INFO - 41. /usuarios/                          → GET
2025-08-20 10:36:25,892 - Routes - INFO - 42. /usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-20 10:36:25,892 - Routes - INFO - 43. /usuarios/admin/usuarios            → GET
2025-08-20 10:36:25,892 - Routes - INFO - 44. /usuarios/cadastrar                 → POST
2025-08-20 10:36:25,892 - Routes - INFO - 45. /usuarios/cadastrar-form            → POST
2025-08-20 10:36:25,892 - Routes - INFO - 46. /usuarios/listar                    → GET
2025-08-20 10:36:25,892 - Routes - INFO - 47. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-20 10:36:25,892 - Routes - INFO - 48. /usuarios/status                    → GET
2025-08-20 10:36:25,892 - Routes - INFO - 49. /usuarios/verificar-email/{email}   → GET
2025-08-20 10:36:25,892 - Routes - INFO - ================================
2025-08-20 10:36:28,614 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 10:36:28,614 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 10:36:32,697 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-20 10:37:19,391 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 10:37:19,392 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 10:37:19,392 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 10:37:19,392 - Routes - INFO -  1. /                                   → GET
2025-08-20 10:37:19,392 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 10:37:19,392 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 10:37:19,393 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 10:37:19,393 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 10:37:19,393 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 10:37:19,393 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 10:37:19,393 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 10:37:19,393 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 10:37:19,393 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:37:19,393 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 10:37:19,393 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 10:37:19,393 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 10:37:19,393 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:37:19,393 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 10:37:19,393 - Routes - INFO - 18. /health                             → GET
2025-08-20 10:37:19,393 - Routes - INFO - 19. /info                               → GET
2025-08-20 10:37:19,393 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 10:37:19,393 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 10:37:19,393 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 10:37:19,393 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 10:37:19,393 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 10:37:19,393 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 10:37:19,393 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 10:37:19,393 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 10:37:19,393 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 10:37:19,393 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 10:37:19,393 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 10:37:19,393 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 10:37:19,393 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 10:37:19,393 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 10:37:19,393 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 10:37:19,393 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:37:19,393 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 10:37:19,393 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 10:37:19,393 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:37:19,393 - Routes - INFO - 41. /usuarios/                          → GET
2025-08-20 10:37:19,393 - Routes - INFO - 42. /usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-20 10:37:19,393 - Routes - INFO - 43. /usuarios/admin/usuarios            → GET
2025-08-20 10:37:19,393 - Routes - INFO - 44. /usuarios/cadastrar                 → POST
2025-08-20 10:37:19,393 - Routes - INFO - 45. /usuarios/cadastrar-form            → POST
2025-08-20 10:37:19,393 - Routes - INFO - 46. /usuarios/listar                    → GET
2025-08-20 10:37:19,393 - Routes - INFO - 47. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-20 10:37:19,393 - Routes - INFO - 48. /usuarios/status                    → GET
2025-08-20 10:37:19,393 - Routes - INFO - 49. /usuarios/verificar-email/{email}   → GET
2025-08-20 10:37:19,393 - Routes - INFO - ================================
2025-08-20 10:37:22,169 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 10:37:22,169 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 10:37:22,270 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 10:37:22,276 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 10:37:22,276 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 10:37:22,276 - Routes - INFO - /auth/login                         → GET
2025-08-20 10:37:22,276 - Routes - INFO - /auth/login                         → POST
2025-08-20 10:37:22,276 - Routes - INFO - /auth/logout                        → GET
2025-08-20 10:37:22,276 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 10:37:22,276 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 10:37:22,276 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 10:37:22,276 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 10:37:22,276 - Routes - INFO - /auth/status                        → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/                          → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/cadastrar-form            → POST
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/listar                    → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/verificar-email/{email}   → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/admin/usuarios            → GET
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → PUT
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-20 10:37:22,276 - Routes - INFO - /usuarios/status                    → GET
2025-08-20 10:37:22,276 - Routes - INFO - /livros/                            → GET
2025-08-20 10:37:22,276 - Routes - INFO - /livros/listar                      → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/                            → POST
2025-08-20 10:37:22,278 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 10:37:22,278 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 10:37:22,278 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 10:37:22,278 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 10:37:22,278 - Routes - INFO - /livros/status                      → GET
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/                          → GET
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 10:37:22,278 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/                           → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:37:22,278 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 10:37:22,278 - Routes - INFO - /                                   → GET
2025-08-20 10:37:22,278 - Routes - INFO - /health                             → GET
2025-08-20 10:37:22,278 - Routes - INFO - /info                               → GET
2025-08-20 10:37:22,278 - Routes - INFO - Total de rotas registradas: 54
2025-08-20 10:37:22,278 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 10:40:00,627 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 10:40:00,627 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 10:40:00,627 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 10:40:00,627 - Routes - INFO -  1. /                                   → GET
2025-08-20 10:40:00,627 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 10:40:00,627 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 10:40:00,627 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 10:40:00,627 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 10:40:00,627 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 10:40:00,627 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 10:40:00,627 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 10:40:00,627 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 10:40:00,629 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:40:00,629 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 10:40:00,629 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 10:40:00,629 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 10:40:00,629 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:40:00,629 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 10:40:00,629 - Routes - INFO - 18. /health                             → GET
2025-08-20 10:40:00,629 - Routes - INFO - 19. /info                               → GET
2025-08-20 10:40:00,629 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 10:40:00,629 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 10:40:00,629 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 10:40:00,630 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 10:40:00,630 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 10:40:00,630 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 10:40:00,630 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 10:40:00,630 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 10:40:00,630 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 10:40:00,630 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 10:40:00,630 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 10:40:00,630 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 10:40:00,630 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 10:40:00,630 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 10:40:00,630 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 10:40:00,630 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:40:00,630 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 10:40:00,630 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 10:40:00,630 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:40:00,630 - Routes - INFO - 41. /usuarios/                          → GET
2025-08-20 10:40:00,630 - Routes - INFO - 42. /usuarios/admin/usuario/{usuario_id} → DELETE, PUT
2025-08-20 10:40:00,630 - Routes - INFO - 43. /usuarios/admin/usuarios            → GET
2025-08-20 10:40:00,630 - Routes - INFO - 44. /usuarios/cadastrar                 → POST
2025-08-20 10:40:00,630 - Routes - INFO - 45. /usuarios/cadastrar-form            → POST
2025-08-20 10:40:00,632 - Routes - INFO - 46. /usuarios/listar                    → GET
2025-08-20 10:40:00,632 - Routes - INFO - 47. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-20 10:40:00,632 - Routes - INFO - 48. /usuarios/status                    → GET
2025-08-20 10:40:00,632 - Routes - INFO - 49. /usuarios/verificar-email/{email}   → GET
2025-08-20 10:40:00,632 - Routes - INFO - ================================
2025-08-20 10:40:03,198 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 10:40:03,200 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 10:40:03,260 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 10:40:03,260 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 10:40:03,260 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 10:40:03,260 - Routes - INFO - /auth/login                         → GET
2025-08-20 10:40:03,260 - Routes - INFO - /auth/login                         → POST
2025-08-20 10:40:03,260 - Routes - INFO - /auth/logout                        → GET
2025-08-20 10:40:03,260 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 10:40:03,260 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 10:40:03,260 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 10:40:03,260 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 10:40:03,260 - Routes - INFO - /auth/status                        → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/                          → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/cadastrar-form            → POST
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/listar                    → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/verificar-email/{email}   → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/admin/usuarios            → GET
2025-08-20 10:40:03,260 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → PUT
2025-08-20 10:40:03,263 - Routes - INFO - /usuarios/admin/usuario/{usuario_id} → DELETE
2025-08-20 10:40:03,263 - Routes - INFO - /usuarios/status                    → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/                            → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/listar                      → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/                            → POST
2025-08-20 10:40:03,263 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 10:40:03,263 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 10:40:03,263 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 10:40:03,263 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 10:40:03,263 - Routes - INFO - /livros/status                      → GET
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/                          → GET
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 10:40:03,263 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/                           → GET
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:40:03,263 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 10:40:03,265 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:40:03,265 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 10:40:03,265 - Routes - INFO - /                                   → GET
2025-08-20 10:40:03,265 - Routes - INFO - /health                             → GET
2025-08-20 10:40:03,265 - Routes - INFO - /info                               → GET
2025-08-20 10:40:03,265 - Routes - INFO - Total de rotas registradas: 54
2025-08-20 10:40:03,265 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 10:56:13,739 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 10:56:13,740 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 10:56:13,740 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 10:56:13,740 - Routes - INFO -  1. /                                   → GET
2025-08-20 10:56:13,740 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 10:56:13,740 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 10:56:13,740 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 10:56:13,740 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 10:56:13,740 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 10:56:13,740 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 10:56:13,741 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 10:56:13,741 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 10:56:13,741 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:56:13,741 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 10:56:13,741 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 10:56:13,741 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 10:56:13,741 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:56:13,741 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 10:56:13,741 - Routes - INFO - 18. /health                             → GET
2025-08-20 10:56:13,741 - Routes - INFO - 19. /info                               → GET
2025-08-20 10:56:13,741 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 10:56:13,742 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 10:56:13,742 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 10:56:13,742 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 10:56:13,742 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 10:56:13,742 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 10:56:13,742 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 10:56:13,742 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 10:56:13,742 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 10:56:13,742 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 10:56:13,743 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 10:56:13,743 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 10:56:13,743 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 10:56:13,743 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 10:56:13,743 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 10:56:13,743 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:56:13,743 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 10:56:13,743 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 10:56:13,743 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:56:13,743 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 10:56:13,744 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 10:56:13,744 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 10:56:13,744 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 10:56:13,744 - Routes - INFO - ================================
2025-08-20 10:56:17,060 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 10:56:17,061 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 10:56:17,141 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 10:56:17,142 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 10:56:17,142 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 10:56:17,142 - Routes - INFO - /auth/login                         → GET
2025-08-20 10:56:17,142 - Routes - INFO - /auth/login                         → POST
2025-08-20 10:56:17,142 - Routes - INFO - /auth/logout                        → GET
2025-08-20 10:56:17,142 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 10:56:17,143 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 10:56:17,143 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 10:56:17,143 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 10:56:17,143 - Routes - INFO - /auth/status                        → GET
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 10:56:17,143 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 10:56:17,143 - Routes - INFO - /livros/                            → GET
2025-08-20 10:56:17,144 - Routes - INFO - /livros/listar                      → GET
2025-08-20 10:56:17,144 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 10:56:17,144 - Routes - INFO - /livros/                            → POST
2025-08-20 10:56:17,144 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 10:56:17,145 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 10:56:17,145 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 10:56:17,145 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 10:56:17,145 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 10:56:17,145 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 10:56:17,146 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 10:56:17,146 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 10:56:17,146 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 10:56:17,146 - Routes - INFO - /livros/status                      → GET
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/                          → GET
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 10:56:17,146 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/                           → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 10:56:17,147 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 10:56:17,147 - Routes - INFO - /                                   → GET
2025-08-20 10:56:17,147 - Routes - INFO - /health                             → GET
2025-08-20 10:56:17,147 - Routes - INFO - /info                               → GET
2025-08-20 10:56:17,148 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 10:56:17,148 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 11:24:31,469 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-20 11:24:31,470 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-20 11:24:34,187 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 11:24:34,188 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 11:24:34,218 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 11:24:34,218 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 11:24:34,218 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 11:24:34,218 - Routes - INFO - /auth/login                         → GET
2025-08-20 11:24:34,218 - Routes - INFO - /auth/login                         → POST
2025-08-20 11:24:34,218 - Routes - INFO - /auth/logout                        → GET
2025-08-20 11:24:34,218 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 11:24:34,218 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 11:24:34,218 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 11:24:34,218 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 11:24:34,218 - Routes - INFO - /auth/status                        → GET
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 11:24:34,218 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 11:24:34,218 - Routes - INFO - /livros/                            → GET
2025-08-20 11:24:34,218 - Routes - INFO - /livros/listar                      → GET
2025-08-20 11:24:34,218 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 11:24:34,218 - Routes - INFO - /livros/                            → POST
2025-08-20 11:24:34,218 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 11:24:34,218 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 11:24:34,218 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 11:24:34,218 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 11:24:34,226 - Routes - INFO - /livros/status                      → GET
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/                          → GET
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 11:24:34,226 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/                           → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:24:34,226 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 11:24:34,226 - Routes - INFO - /                                   → GET
2025-08-20 11:24:34,226 - Routes - INFO - /health                             → GET
2025-08-20 11:24:34,226 - Routes - INFO - /info                               → GET
2025-08-20 11:24:34,226 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 11:24:34,226 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 11:29:31,735 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-20 11:29:31,735 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-20 11:36:14,450 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 11:36:14,450 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 11:36:14,450 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 11:36:14,450 - Routes - INFO -  1. /                                   → GET
2025-08-20 11:36:14,450 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 11:36:14,450 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 11:36:14,450 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 11:36:14,450 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 11:36:14,450 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 11:36:14,450 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 11:36:14,450 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 11:36:14,450 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 11:36:14,450 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:36:14,450 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 11:36:14,450 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 11:36:14,450 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 11:36:14,450 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:36:14,450 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 11:36:14,450 - Routes - INFO - 18. /health                             → GET
2025-08-20 11:36:14,450 - Routes - INFO - 19. /info                               → GET
2025-08-20 11:36:14,450 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 11:36:14,450 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 11:36:14,450 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 11:36:14,450 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 11:36:14,450 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 11:36:14,450 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 11:36:14,450 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 11:36:14,450 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 11:36:14,450 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 11:36:14,450 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 11:36:14,450 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 11:36:14,450 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 11:36:14,450 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 11:36:14,450 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 11:36:14,450 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 11:36:14,450 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:36:14,450 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 11:36:14,450 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 11:36:14,450 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:36:14,450 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 11:36:14,450 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 11:36:14,450 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 11:36:14,450 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 11:36:14,450 - Routes - INFO - ================================
2025-08-20 11:36:16,891 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 11:36:16,892 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 11:36:16,940 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 11:36:16,940 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 11:36:16,940 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 11:36:16,940 - Routes - INFO - /auth/login                         → GET
2025-08-20 11:36:16,940 - Routes - INFO - /auth/login                         → POST
2025-08-20 11:36:16,940 - Routes - INFO - /auth/logout                        → GET
2025-08-20 11:36:16,940 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 11:36:16,940 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 11:36:16,940 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 11:36:16,940 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 11:36:16,940 - Routes - INFO - /auth/status                        → GET
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 11:36:16,940 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 11:36:16,940 - Routes - INFO - /livros/                            → GET
2025-08-20 11:36:16,940 - Routes - INFO - /livros/listar                      → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/                            → POST
2025-08-20 11:36:16,944 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 11:36:16,944 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 11:36:16,944 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 11:36:16,944 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 11:36:16,944 - Routes - INFO - /livros/status                      → GET
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/                          → GET
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 11:36:16,944 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/                           → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:36:16,944 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 11:36:16,944 - Routes - INFO - /                                   → GET
2025-08-20 11:36:16,946 - Routes - INFO - /health                             → GET
2025-08-20 11:36:16,946 - Routes - INFO - /info                               → GET
2025-08-20 11:36:16,946 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 11:36:16,946 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 11:37:22,111 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-20 11:37:22,111 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-20 11:37:31,567 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 11:37:31,567 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 11:37:31,567 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 11:37:31,567 - Routes - INFO -  1. /                                   → GET
2025-08-20 11:37:31,567 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 11:37:31,567 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 11:37:31,567 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 11:37:31,567 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 11:37:31,567 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 11:37:31,567 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 11:37:31,567 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 11:37:31,567 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 11:37:31,567 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:37:31,567 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 11:37:31,567 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 11:37:31,567 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 11:37:31,567 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:37:31,567 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 11:37:31,567 - Routes - INFO - 18. /health                             → GET
2025-08-20 11:37:31,567 - Routes - INFO - 19. /info                               → GET
2025-08-20 11:37:31,567 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 11:37:31,567 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 11:37:31,567 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 11:37:31,567 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 11:37:31,571 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 11:37:31,571 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 11:37:31,571 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 11:37:31,571 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 11:37:31,571 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 11:37:31,571 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 11:37:31,571 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 11:37:31,571 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 11:37:31,571 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 11:37:31,571 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 11:37:31,571 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 11:37:31,571 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:37:31,571 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 11:37:31,571 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 11:37:31,571 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:37:31,571 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 11:37:31,571 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 11:37:31,571 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 11:37:31,571 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 11:37:31,571 - Routes - INFO - ================================
2025-08-20 11:37:33,630 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 11:37:33,630 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 11:37:33,689 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 11:37:33,689 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 11:37:33,689 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 11:37:33,689 - Routes - INFO - /auth/login                         → GET
2025-08-20 11:37:33,689 - Routes - INFO - /auth/login                         → POST
2025-08-20 11:37:33,689 - Routes - INFO - /auth/logout                        → GET
2025-08-20 11:37:33,689 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 11:37:33,689 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 11:37:33,689 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 11:37:33,689 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 11:37:33,689 - Routes - INFO - /auth/status                        → GET
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 11:37:33,689 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 11:37:33,689 - Routes - INFO - /livros/                            → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/listar                      → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/                            → POST
2025-08-20 11:37:33,689 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 11:37:33,689 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 11:37:33,689 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 11:37:33,689 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 11:37:33,689 - Routes - INFO - /livros/status                      → GET
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/                          → GET
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 11:37:33,689 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/                           → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:37:33,689 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 11:37:33,689 - Routes - INFO - /                                   → GET
2025-08-20 11:37:33,689 - Routes - INFO - /health                             → GET
2025-08-20 11:37:33,689 - Routes - INFO - /info                               → GET
2025-08-20 11:37:33,689 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 11:37:33,689 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 11:38:37,032 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:38:37,032 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:38:37,032 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Pedido'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:38:37,065 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:39:05,771 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:39:05,771 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:39:05,771 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:39:05,771 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:39:27,865 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:39:27,865 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:39:27,866 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:39:27,868 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:41:41,739 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-20 11:41:41,739 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-20 11:57:23,487 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 11:57:23,489 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 11:57:23,489 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 11:57:23,489 - Routes - INFO -  1. /                                   → GET
2025-08-20 11:57:23,489 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 11:57:23,489 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 11:57:23,489 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 11:57:23,489 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 11:57:23,489 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 11:57:23,489 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 11:57:23,489 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 11:57:23,489 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 11:57:23,489 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:57:23,489 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 11:57:23,489 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 11:57:23,489 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 11:57:23,489 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:57:23,489 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 11:57:23,489 - Routes - INFO - 18. /health                             → GET
2025-08-20 11:57:23,489 - Routes - INFO - 19. /info                               → GET
2025-08-20 11:57:23,489 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 11:57:23,489 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 11:57:23,489 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 11:57:23,489 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 11:57:23,489 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 11:57:23,489 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 11:57:23,489 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 11:57:23,489 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 11:57:23,489 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 11:57:23,489 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 11:57:23,489 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 11:57:23,489 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 11:57:23,489 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 11:57:23,489 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 11:57:23,489 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 11:57:23,489 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:57:23,492 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 11:57:23,492 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 11:57:23,492 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:57:23,492 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 11:57:23,492 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 11:57:23,492 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 11:57:23,492 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 11:57:23,492 - Routes - INFO - ================================
2025-08-20 11:57:25,762 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 11:57:25,762 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 11:57:25,806 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 11:57:25,806 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 11:57:25,806 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 11:57:25,806 - Routes - INFO - /auth/login                         → GET
2025-08-20 11:57:25,806 - Routes - INFO - /auth/login                         → POST
2025-08-20 11:57:25,806 - Routes - INFO - /auth/logout                        → GET
2025-08-20 11:57:25,806 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 11:57:25,806 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 11:57:25,806 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 11:57:25,806 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 11:57:25,806 - Routes - INFO - /auth/status                        → GET
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 11:57:25,806 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 11:57:25,806 - Routes - INFO - /livros/                            → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/listar                      → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/                            → POST
2025-08-20 11:57:25,806 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 11:57:25,806 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 11:57:25,806 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 11:57:25,806 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 11:57:25,806 - Routes - INFO - /livros/status                      → GET
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/                          → GET
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 11:57:25,806 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/                           → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 11:57:25,806 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 11:57:25,806 - Routes - INFO - /                                   → GET
2025-08-20 11:57:25,806 - Routes - INFO - /health                             → GET
2025-08-20 11:57:25,806 - Routes - INFO - /info                               → GET
2025-08-20 11:57:25,806 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 11:57:25,806 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 11:57:58,309 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:57:58,309 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:57:58,309 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Pedido'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:57:58,330 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:58:19,743 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:58:19,743 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:58:19,745 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:58:19,749 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:58:38,128 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:58:38,128 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:58:38,128 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:58:38,131 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:03,027 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:59:03,027 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:59:03,027 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:03,029 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:30,042 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:59:30,042 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:59:30,042 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:30,044 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:41,763 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 11:59:41,763 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 11:59:41,763 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 11:59:41,766 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:03,218 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:00:03,219 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:00:03,219 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:03,220 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:07,807 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:00:07,807 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:00:07,808 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:07,808 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:18,014 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:00:18,014 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:00:18,017 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:18,018 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:25,912 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 12:00:25,914 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 12:00:25,914 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 12:00:25,914 - Routes - INFO -  1. /                                   → GET
2025-08-20 12:00:25,914 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 12:00:25,914 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 12:00:25,914 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 12:00:25,914 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 12:00:25,914 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 12:00:25,914 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 12:00:25,914 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 12:00:25,914 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 12:00:25,914 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:00:25,914 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 12:00:25,914 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 12:00:25,914 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 12:00:25,914 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:00:25,914 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 12:00:25,914 - Routes - INFO - 18. /health                             → GET
2025-08-20 12:00:25,914 - Routes - INFO - 19. /info                               → GET
2025-08-20 12:00:25,914 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 12:00:25,914 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 12:00:25,914 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 12:00:25,914 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 12:00:25,914 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 12:00:25,914 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 12:00:25,914 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 12:00:25,914 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 12:00:25,914 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 12:00:25,916 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 12:00:25,916 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 12:00:25,916 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 12:00:25,916 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 12:00:25,916 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 12:00:25,916 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 12:00:25,916 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:00:25,916 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 12:00:25,916 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 12:00:25,916 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:00:25,916 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 12:00:25,916 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 12:00:25,916 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 12:00:25,916 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 12:00:25,916 - Routes - INFO - ================================
2025-08-20 12:00:28,152 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 12:00:28,152 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 12:00:28,202 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 12:00:28,202 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 12:00:28,202 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 12:00:28,203 - Routes - INFO - /auth/login                         → GET
2025-08-20 12:00:28,203 - Routes - INFO - /auth/login                         → POST
2025-08-20 12:00:28,203 - Routes - INFO - /auth/logout                        → GET
2025-08-20 12:00:28,204 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 12:00:28,204 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 12:00:28,204 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 12:00:28,204 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 12:00:28,204 - Routes - INFO - /auth/status                        → GET
2025-08-20 12:00:28,204 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 12:00:28,204 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 12:00:28,204 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 12:00:28,204 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 12:00:28,204 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 12:00:28,206 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 12:00:28,206 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 12:00:28,206 - Routes - INFO - /livros/                            → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/listar                      → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/                            → POST
2025-08-20 12:00:28,206 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 12:00:28,206 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 12:00:28,206 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 12:00:28,206 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 12:00:28,206 - Routes - INFO - /livros/status                      → GET
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/                          → GET
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 12:00:28,206 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/                           → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:00:28,206 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 12:00:28,206 - Routes - INFO - /                                   → GET
2025-08-20 12:00:28,206 - Routes - INFO - /health                             → GET
2025-08-20 12:00:28,206 - Routes - INFO - /info                               → GET
2025-08-20 12:00:28,206 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 12:00:28,206 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 12:00:29,488 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:00:29,488 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:00:29,488 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Pedido'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:00:29,500 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:01:24,136 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 12:01:24,136 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 12:01:24,136 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 12:01:24,137 - Routes - INFO -  1. /                                   → GET
2025-08-20 12:01:24,137 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 12:01:24,137 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 12:01:24,137 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 12:01:24,137 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 12:01:24,137 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 12:01:24,137 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 12:01:24,137 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 12:01:24,137 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 12:01:24,137 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:01:24,137 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 12:01:24,137 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 12:01:24,138 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 12:01:24,138 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:01:24,138 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 12:01:24,138 - Routes - INFO - 18. /health                             → GET
2025-08-20 12:01:24,138 - Routes - INFO - 19. /info                               → GET
2025-08-20 12:01:24,138 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 12:01:24,138 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 12:01:24,138 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 12:01:24,138 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 12:01:24,138 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 12:01:24,138 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 12:01:24,138 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 12:01:24,138 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 12:01:24,139 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 12:01:24,139 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 12:01:24,139 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 12:01:24,139 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 12:01:24,139 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 12:01:24,139 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 12:01:24,139 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 12:01:24,139 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:01:24,139 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 12:01:24,139 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 12:01:24,139 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:01:24,139 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 12:01:24,139 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 12:01:24,140 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 12:01:24,140 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 12:01:24,140 - Routes - INFO - ================================
2025-08-20 12:01:26,422 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 12:01:26,423 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 12:01:26,473 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 12:01:26,473 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 12:01:26,473 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 12:01:26,473 - Routes - INFO - /auth/login                         → GET
2025-08-20 12:01:26,473 - Routes - INFO - /auth/login                         → POST
2025-08-20 12:01:26,473 - Routes - INFO - /auth/logout                        → GET
2025-08-20 12:01:26,474 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 12:01:26,474 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 12:01:26,474 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 12:01:26,474 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 12:01:26,474 - Routes - INFO - /auth/status                        → GET
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 12:01:26,474 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 12:01:26,476 - Routes - INFO - /livros/                            → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/listar                      → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/                            → POST
2025-08-20 12:01:26,476 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 12:01:26,476 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 12:01:26,476 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 12:01:26,476 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 12:01:26,476 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 12:01:26,477 - Routes - INFO - /livros/status                      → GET
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/                          → GET
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 12:01:26,477 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 12:01:26,477 - Routes - INFO - /pedidos/                           → GET
2025-08-20 12:01:26,477 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 12:01:26,477 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 12:01:26,478 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 12:01:26,478 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:01:26,478 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 12:01:26,478 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:01:26,478 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 12:01:26,478 - Routes - INFO - /                                   → GET
2025-08-20 12:01:26,478 - Routes - INFO - /health                             → GET
2025-08-20 12:01:26,478 - Routes - INFO - /info                               → GET
2025-08-20 12:01:26,478 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 12:01:26,478 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 12:01:38,236 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:01:38,236 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:01:38,239 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Pedido'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:01:38,254 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'Pedido' failed to locate a name ('Pedido'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:02:23,719 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-20 12:02:23,719 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-20 12:03:01,422 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-20 12:03:01,422 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-20 12:03:01,422 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-20 12:03:01,422 - Routes - INFO -  1. /                                   → GET
2025-08-20 12:03:01,422 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-20 12:03:01,422 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-20 12:03:01,422 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-20 12:03:01,422 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-20 12:03:01,422 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-20 12:03:01,422 - Routes - INFO -  7. /auth/status                        → GET
2025-08-20 12:03:01,422 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-20 12:03:01,422 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-20 12:03:01,422 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:03:01,422 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-20 12:03:01,422 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-20 12:03:01,433 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-20 12:03:01,433 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:03:01,433 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-20 12:03:01,433 - Routes - INFO - 18. /health                             → GET
2025-08-20 12:03:01,433 - Routes - INFO - 19. /info                               → GET
2025-08-20 12:03:01,433 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-20 12:03:01,433 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-20 12:03:01,433 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-20 12:03:01,433 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-20 12:03:01,433 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-20 12:03:01,433 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-20 12:03:01,433 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-20 12:03:01,433 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-20 12:03:01,433 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-20 12:03:01,433 - Routes - INFO - 29. /livros/status                      → GET
2025-08-20 12:03:01,433 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-20 12:03:01,433 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-20 12:03:01,433 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-20 12:03:01,433 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-20 12:03:01,433 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-20 12:03:01,433 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:03:01,433 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-20 12:03:01,433 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-20 12:03:01,433 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:03:01,433 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-20 12:03:01,433 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-20 12:03:01,433 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-20 12:03:01,433 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-20 12:03:01,433 - Routes - INFO - ================================
2025-08-20 12:03:03,655 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-20 12:03:03,655 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-20 12:03:03,704 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-20 12:03:03,704 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-20 12:03:03,704 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-20 12:03:03,704 - Routes - INFO - /auth/login                         → GET
2025-08-20 12:03:03,704 - Routes - INFO - /auth/login                         → POST
2025-08-20 12:03:03,704 - Routes - INFO - /auth/logout                        → GET
2025-08-20 12:03:03,704 - Routes - INFO - /auth/cadastro                      → GET
2025-08-20 12:03:03,705 - Routes - INFO - /auth/cadastro                      → POST
2025-08-20 12:03:03,705 - Routes - INFO - /auth/perfil                        → GET
2025-08-20 12:03:03,705 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-20 12:03:03,705 - Routes - INFO - /auth/status                        → GET
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-20 12:03:03,705 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-20 12:03:03,705 - Routes - INFO - /livros/                            → GET
2025-08-20 12:03:03,705 - Routes - INFO - /livros/listar                      → GET
2025-08-20 12:03:03,705 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/                            → POST
2025-08-20 12:03:03,706 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-20 12:03:03,706 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-20 12:03:03,706 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-20 12:03:03,706 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/estatisticas                → GET
2025-08-20 12:03:03,706 - Routes - INFO - /livros/status                      → GET
2025-08-20 12:03:03,706 - Routes - INFO - /carrinho/                          → GET
2025-08-20 12:03:03,706 - Routes - INFO - /carrinho/itens                     → GET
2025-08-20 12:03:03,706 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-20 12:03:03,706 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-20 12:03:03,706 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-20 12:03:03,707 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-20 12:03:03,707 - Routes - INFO - /carrinho/contador                  → GET
2025-08-20 12:03:03,707 - Routes - INFO - /carrinho/status                    → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/                           → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/listar                     → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-20 12:03:03,707 - Routes - INFO - /pedidos/status                     → GET
2025-08-20 12:03:03,707 - Routes - INFO - /                                   → GET
2025-08-20 12:03:03,707 - Routes - INFO - /health                             → GET
2025-08-20 12:03:03,707 - Routes - INFO - /info                               → GET
2025-08-20 12:03:03,707 - Routes - INFO - Total de rotas registradas: 49
2025-08-20 12:03:03,707 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-20 12:03:16,214 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-20 12:03:16,214 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-20 12:03:16,224 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 518, in _resolve_name
    rval = getattr(rval, token)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 350, in __getattr__
    raise NameError(
NameError: Module 'models' has no mapped classes registered under the name 'vendas'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 64, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\auth_service.py", line 25, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\usuario_repository.py", line 14, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 522, in _resolve_name
    self._raise_for_name(n.args[0], n)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'app.domain.models.vendas.pedidos.Pedido' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'vendas'"). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-20 12:03:16,235 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'app.domain.models.vendas.pedidos.Pedido' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'vendas'"). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-21 13:07:17,517 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-21 13:07:17,517 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-21 13:07:17,519 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-21 13:07:17,519 - Routes - INFO -  1. /                                   → GET
2025-08-21 13:07:17,519 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-21 13:07:17,519 - Routes - INFO -  3. /auth/debug-usuario                 → GET
2025-08-21 13:07:17,519 - Routes - INFO -  4. /auth/login                         → GET, POST
2025-08-21 13:07:17,519 - Routes - INFO -  5. /auth/logout                        → GET
2025-08-21 13:07:17,519 - Routes - INFO -  6. /auth/perfil                        → GET
2025-08-21 13:07:17,519 - Routes - INFO -  7. /auth/status                        → GET
2025-08-21 13:07:17,519 - Routes - INFO -  8. /carrinho/                          → GET
2025-08-21 13:07:17,519 - Routes - INFO -  9. /carrinho/adicionar                 → POST
2025-08-21 13:07:17,520 - Routes - INFO - 10. /carrinho/atualizar/{livro_id}      → PUT
2025-08-21 13:07:17,520 - Routes - INFO - 11. /carrinho/contador                  → GET
2025-08-21 13:07:17,520 - Routes - INFO - 12. /carrinho/itens                     → GET
2025-08-21 13:07:17,520 - Routes - INFO - 13. /carrinho/limpar                    → DELETE
2025-08-21 13:07:17,520 - Routes - INFO - 14. /carrinho/remover/{livro_id}        → DELETE
2025-08-21 13:07:17,521 - Routes - INFO - 15. /carrinho/status                    → GET
2025-08-21 13:07:17,521 - Routes - INFO - 18. /health                             → GET
2025-08-21 13:07:17,521 - Routes - INFO - 19. /info                               → GET
2025-08-21 13:07:17,521 - Routes - INFO - 20. /livros/                            → GET, POST
2025-08-21 13:07:17,521 - Routes - INFO - 21. /livros/buscar/ano/{ano}            → GET
2025-08-21 13:07:17,522 - Routes - INFO - 22. /livros/buscar/autor                → GET
2025-08-21 13:07:17,522 - Routes - INFO - 23. /livros/buscar/estoque              → GET
2025-08-21 13:07:17,522 - Routes - INFO - 24. /livros/buscar/preco                → GET
2025-08-21 13:07:17,522 - Routes - INFO - 25. /livros/buscar/titulo               → GET
2025-08-21 13:07:17,522 - Routes - INFO - 26. /livros/cadastrar-form              → POST
2025-08-21 13:07:17,522 - Routes - INFO - 27. /livros/estatisticas                → GET
2025-08-21 13:07:17,522 - Routes - INFO - 28. /livros/listar                      → GET
2025-08-21 13:07:17,522 - Routes - INFO - 29. /livros/status                      → GET
2025-08-21 13:07:17,522 - Routes - INFO - 30. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-21 13:07:17,522 - Routes - INFO - 32. /pedidos/                           → GET
2025-08-21 13:07:17,522 - Routes - INFO - 33. /pedidos/estatisticas/usuario       → GET
2025-08-21 13:07:17,522 - Routes - INFO - 34. /pedidos/finalizar                  → POST
2025-08-21 13:07:17,523 - Routes - INFO - 35. /pedidos/listar                     → GET
2025-08-21 13:07:17,523 - Routes - INFO - 36. /pedidos/recentes/{quantidade}      → GET
2025-08-21 13:07:17,523 - Routes - INFO - 37. /pedidos/status                     → GET
2025-08-21 13:07:17,523 - Routes - INFO - 38. /pedidos/{pedido_id}                → GET
2025-08-21 13:07:17,523 - Routes - INFO - 39. /pedidos/{pedido_id}/status         → PUT
2025-08-21 13:07:17,523 - Routes - INFO - 41. /usuarios/auth/cadastrar            → POST
2025-08-21 13:07:17,523 - Routes - INFO - 42. /usuarios/auth/cadastro             → GET, POST
2025-08-21 13:07:17,523 - Routes - INFO - 43. /usuarios/auth/listar               → GET
2025-08-21 13:07:17,523 - Routes - INFO - 44. /usuarios/auth/perfil               → DELETE, GET, PUT
2025-08-21 13:07:17,525 - Routes - INFO - ================================
2025-08-21 13:07:21,735 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-21 13:07:21,735 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-21 13:07:21,819 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-21 13:07:21,819 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-21 13:07:21,819 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-21 13:07:21,819 - Routes - INFO - /auth/login                         → GET
2025-08-21 13:07:21,819 - Routes - INFO - /auth/login                         → POST
2025-08-21 13:07:21,819 - Routes - INFO - /auth/logout                        → GET
2025-08-21 13:07:21,819 - Routes - INFO - /auth/cadastro                      → GET
2025-08-21 13:07:21,819 - Routes - INFO - /auth/cadastro                      → POST
2025-08-21 13:07:21,819 - Routes - INFO - /auth/perfil                        → GET
2025-08-21 13:07:21,821 - Routes - INFO - /auth/debug-usuario                 → GET
2025-08-21 13:07:21,821 - Routes - INFO - /auth/status                        → GET
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/cadastro             → GET
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/cadastro             → POST
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/cadastrar            → POST
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/listar               → GET
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/perfil               → GET
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/perfil               → PUT
2025-08-21 13:07:21,821 - Routes - INFO - /usuarios/auth/perfil               → DELETE
2025-08-21 13:07:21,821 - Routes - INFO - /livros/                            → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/listar                      → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/                            → POST
2025-08-21 13:07:21,821 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-21 13:07:21,821 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-21 13:07:21,821 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-21 13:07:21,821 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-21 13:07:21,821 - Routes - INFO - /livros/estatisticas                → GET
2025-08-21 13:07:21,823 - Routes - INFO - /livros/status                      → GET
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/                          → GET
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/itens                     → GET
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/contador                  → GET
2025-08-21 13:07:21,823 - Routes - INFO - /carrinho/status                    → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/                           → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/listar                     → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-21 13:07:21,823 - Routes - INFO - /pedidos/status                     → GET
2025-08-21 13:07:21,823 - Routes - INFO - /                                   → GET
2025-08-21 13:07:21,823 - Routes - INFO - /health                             → GET
2025-08-21 13:07:21,823 - Routes - INFO - /info                               → GET
2025-08-21 13:07:21,823 - Routes - INFO - Total de rotas registradas: 49
2025-08-21 13:07:21,823 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-21 13:08:15,681 - LivroRouter - ERROR - Erro ao carregar página de livros: When initializing mapper Mapper[Livro(livros)], expression 'ItemCarrinho' failed to locate a name ('ItemCarrinho'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.Livro.livro.Livro'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'ItemCarrinho'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\livro_router.py", line 28, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\livro_service.py", line 11, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Livro(livros)], expression 'ItemCarrinho' failed to locate a name ('ItemCarrinho'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.Livro.livro.Livro'> class after both dependent classes have been defined.
2025-08-22 11:50:07,062 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:50:07,063 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:50:07,193 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:50:07,193 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:50:07,194 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:50:07,194 - Routes - INFO - /api/auth/login                     → GET
2025-08-22 11:50:07,194 - Routes - INFO - /api/auth/login                     → POST
2025-08-22 11:50:07,195 - Routes - INFO - /api/auth/logout                    → GET
2025-08-22 11:50:07,195 - Routes - INFO - /api/auth/cadastro                  → GET
2025-08-22 11:50:07,195 - Routes - INFO - /api/auth/cadastro                  → POST
2025-08-22 11:50:07,195 - Routes - INFO - /api/auth/perfil                    → GET
2025-08-22 11:50:07,195 - Routes - INFO - /api/auth/status                    → GET
2025-08-22 11:50:07,195 - Routes - INFO - /api/usuarios/cadastro              → GET
2025-08-22 11:50:07,195 - Routes - INFO - /api/usuarios/cadastro              → POST
2025-08-22 11:50:07,195 - Routes - INFO - /api/usuarios/cadastrar             → POST
2025-08-22 11:50:07,195 - Routes - INFO - /api/usuarios/listar                → GET
2025-08-22 11:50:07,196 - Routes - INFO - /api/usuarios/perfil                → GET
2025-08-22 11:50:07,196 - Routes - INFO - /api/usuarios/perfil                → PUT
2025-08-22 11:50:07,196 - Routes - INFO - /api/usuarios/perfil                → DELETE
2025-08-22 11:50:07,196 - Routes - INFO - /api/livros/                        → GET
2025-08-22 11:50:07,196 - Routes - INFO - /api/livros/listar                  → GET
2025-08-22 11:50:07,196 - Routes - INFO - /api/livros/{livro_id}              → GET
2025-08-22 11:50:07,196 - Routes - INFO - /api/livros/                        → POST
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/cadastrar-form          → POST
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/{livro_id}              → PUT
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/{livro_id}              → DELETE
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/buscar/titulo           → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/buscar/autor            → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/buscar/ano/{ano}        → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/buscar/preco            → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/buscar/estoque          → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/estatisticas            → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/livros/status                  → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/carrinho/                      → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/carrinho/itens                 → GET
2025-08-22 11:50:07,197 - Routes - INFO - /api/carrinho/adicionar             → POST
2025-08-22 11:50:07,198 - Routes - INFO - /api/carrinho/remover/{livro_id}    → DELETE
2025-08-22 11:50:07,198 - Routes - INFO - /api/carrinho/atualizar/{livro_id}  → PUT
2025-08-22 11:50:07,198 - Routes - INFO - /api/carrinho/limpar                → DELETE
2025-08-22 11:50:07,198 - Routes - INFO - /api/carrinho/contador              → GET
2025-08-22 11:50:07,198 - Routes - INFO - /api/carrinho/status                → GET
2025-08-22 11:50:07,198 - Routes - INFO - /api/pedidos/                       → GET
2025-08-22 11:50:07,198 - Routes - INFO - /api/pedidos/listar                 → GET
2025-08-22 11:50:07,198 - Routes - INFO - /api/pedidos/{pedido_id}            → GET
2025-08-22 11:50:07,199 - Routes - INFO - /api/pedidos/finalizar              → POST
2025-08-22 11:50:07,199 - Routes - INFO - /api/pedidos/{pedido_id}/status     → PUT
2025-08-22 11:50:07,199 - Routes - INFO - /api/pedidos/estatisticas/usuario   → GET
2025-08-22 11:50:07,199 - Routes - INFO - /api/pedidos/recentes/{quantidade}  → GET
2025-08-22 11:50:07,199 - Routes - INFO - /api/pedidos/status                 → GET
2025-08-22 11:50:07,199 - Routes - INFO - /                                   → GET
2025-08-22 11:50:07,200 - Routes - INFO - /health                             → GET
2025-08-22 11:50:07,200 - Routes - INFO - /info                               → GET
2025-08-22 11:50:07,201 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:50:07,202 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:51:52,845 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 11:51:52,845 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 11:51:54,032 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:51:54,033 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:51:54,096 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:51:54,096 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:51:54,096 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:51:54,096 - Routes - INFO - /auth/login                         → GET
2025-08-22 11:51:54,096 - Routes - INFO - /auth/login                         → POST
2025-08-22 11:51:54,096 - Routes - INFO - /auth/logout                        → GET
2025-08-22 11:51:54,096 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 11:51:54,096 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 11:51:54,096 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 11:51:54,096 - Routes - INFO - /auth/status                        → GET
2025-08-22 11:51:54,099 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 11:51:54,099 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 11:51:54,099 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 11:51:54,100 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 11:51:54,100 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 11:51:54,100 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 11:51:54,100 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 11:51:54,100 - Routes - INFO - /livros/                            → GET
2025-08-22 11:51:54,101 - Routes - INFO - /livros/listar                      → GET
2025-08-22 11:51:54,101 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 11:51:54,101 - Routes - INFO - /livros/                            → POST
2025-08-22 11:51:54,101 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 11:51:54,101 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 11:51:54,101 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 11:51:54,101 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 11:51:54,102 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 11:51:54,102 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 11:51:54,102 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 11:51:54,103 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 11:51:54,103 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 11:51:54,103 - Routes - INFO - /livros/status                      → GET
2025-08-22 11:51:54,103 - Routes - INFO - /carrinho/                          → GET
2025-08-22 11:51:54,103 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 11:51:54,104 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 11:51:54,104 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 11:51:54,105 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 11:51:54,105 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 11:51:54,105 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 11:51:54,105 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/                           → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 11:51:54,105 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 11:51:54,105 - Routes - INFO - /                                   → GET
2025-08-22 11:51:54,105 - Routes - INFO - /health                             → GET
2025-08-22 11:51:54,105 - Routes - INFO - /info                               → GET
2025-08-22 11:51:54,105 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:51:54,105 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:52:01,629 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 11:52:01,629 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 11:52:02,721 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:52:02,721 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:52:02,763 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:52:02,763 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:52:02,763 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:52:02,763 - Routes - INFO - /auth/login                         → GET
2025-08-22 11:52:02,763 - Routes - INFO - /auth/login                         → POST
2025-08-22 11:52:02,763 - Routes - INFO - /auth/logout                        → GET
2025-08-22 11:52:02,763 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 11:52:02,763 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 11:52:02,771 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 11:52:02,771 - Routes - INFO - /auth/status                        → GET
2025-08-22 11:52:02,771 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 11:52:02,771 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 11:52:02,771 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 11:52:02,771 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 11:52:02,771 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 11:52:02,772 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 11:52:02,772 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 11:52:02,772 - Routes - INFO - /livros/                            → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/listar                      → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/                            → POST
2025-08-22 11:52:02,772 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 11:52:02,772 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 11:52:02,772 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 11:52:02,772 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 11:52:02,772 - Routes - INFO - /livros/status                      → GET
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/                          → GET
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 11:52:02,772 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/                           → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 11:52:02,772 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 11:52:02,772 - Routes - INFO - /                                   → GET
2025-08-22 11:52:02,772 - Routes - INFO - /health                             → GET
2025-08-22 11:52:02,772 - Routes - INFO - /info                               → GET
2025-08-22 11:52:02,772 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:52:02,772 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:52:17,826 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 11:52:17,827 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 11:52:23,297 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:52:23,297 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:52:23,345 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:52:23,352 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:52:23,352 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:52:23,352 - Routes - INFO - /auth/login                         → GET
2025-08-22 11:52:23,352 - Routes - INFO - /auth/login                         → POST
2025-08-22 11:52:23,352 - Routes - INFO - /auth/logout                        → GET
2025-08-22 11:52:23,352 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 11:52:23,352 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 11:52:23,352 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 11:52:23,352 - Routes - INFO - /auth/status                        → GET
2025-08-22 11:52:23,352 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 11:52:23,352 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 11:52:23,353 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 11:52:23,353 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 11:52:23,353 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 11:52:23,353 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 11:52:23,353 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 11:52:23,353 - Routes - INFO - /livros/                            → GET
2025-08-22 11:52:23,353 - Routes - INFO - /livros/listar                      → GET
2025-08-22 11:52:23,353 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 11:52:23,353 - Routes - INFO - /livros/                            → POST
2025-08-22 11:52:23,354 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 11:52:23,354 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 11:52:23,354 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 11:52:23,354 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 11:52:23,354 - Routes - INFO - /livros/status                      → GET
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/                          → GET
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 11:52:23,354 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/                           → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 11:52:23,354 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 11:52:23,354 - Routes - INFO - /                                   → GET
2025-08-22 11:52:23,354 - Routes - INFO - /health                             → GET
2025-08-22 11:52:23,354 - Routes - INFO - /info                               → GET
2025-08-22 11:52:23,354 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:52:23,354 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:56:11,202 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 11:56:11,202 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 11:56:16,940 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:56:16,940 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:56:16,978 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:56:16,978 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:56:16,978 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:56:16,978 - Routes - INFO - /auth/login                         → GET
2025-08-22 11:56:16,978 - Routes - INFO - /auth/login                         → POST
2025-08-22 11:56:16,978 - Routes - INFO - /auth/logout                        → GET
2025-08-22 11:56:16,978 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 11:56:16,978 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 11:56:16,978 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 11:56:16,978 - Routes - INFO - /auth/status                        → GET
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 11:56:16,978 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 11:56:16,978 - Routes - INFO - /livros/                            → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/listar                      → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/                            → POST
2025-08-22 11:56:16,978 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 11:56:16,978 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 11:56:16,978 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 11:56:16,978 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 11:56:16,978 - Routes - INFO - /livros/status                      → GET
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/                          → GET
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 11:56:16,978 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/                           → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 11:56:16,978 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 11:56:16,978 - Routes - INFO - /                                   → GET
2025-08-22 11:56:16,978 - Routes - INFO - /health                             → GET
2025-08-22 11:56:16,978 - Routes - INFO - /info                               → GET
2025-08-22 11:56:16,987 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:56:16,988 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:58:22,451 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 11:58:22,451 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 11:58:27,952 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 11:58:27,954 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 11:58:27,987 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 11:58:27,987 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 11:58:27,987 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 11:58:27,989 - Routes - INFO - /auth/login                         → GET
2025-08-22 11:58:27,989 - Routes - INFO - /auth/login                         → POST
2025-08-22 11:58:27,989 - Routes - INFO - /auth/logout                        → GET
2025-08-22 11:58:27,989 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 11:58:27,989 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 11:58:27,990 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 11:58:27,990 - Routes - INFO - /auth/status                        → GET
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 11:58:27,990 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 11:58:27,990 - Routes - INFO - /livros/                            → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/listar                      → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/                            → POST
2025-08-22 11:58:27,990 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 11:58:27,990 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 11:58:27,990 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 11:58:27,990 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 11:58:27,990 - Routes - INFO - /livros/status                      → GET
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/                          → GET
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 11:58:27,990 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/                           → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 11:58:27,990 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 11:58:27,990 - Routes - INFO - /                                   → GET
2025-08-22 11:58:27,990 - Routes - INFO - /health                             → GET
2025-08-22 11:58:27,990 - Routes - INFO - /info                               → GET
2025-08-22 11:58:27,990 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 11:58:27,990 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 11:58:39,592 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 11:58:39,592 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 11:58:39,660 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 11:58:39,914 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 11:58:39,915 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 11:58:39,915 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 11:58:39,915 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:00:30,746 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:00:30,746 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:00:35,985 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:00:35,986 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:00:36,045 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:00:36,045 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:00:36,048 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:00:36,048 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:00:36,049 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:00:36,049 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:00:36,049 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:00:36,049 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:00:36,049 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:00:36,049 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:00:36,049 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:00:36,050 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:00:36,051 - Routes - INFO - /livros/                            → GET
2025-08-22 12:00:36,051 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:00:36,051 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:00:36,051 - Routes - INFO - /livros/                            → POST
2025-08-22 12:00:36,051 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:00:36,051 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:00:36,051 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:00:36,052 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:00:36,052 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:00:36,053 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:00:36,053 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:00:36,053 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:00:36,053 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:00:36,053 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:00:36,054 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:00:36,054 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:00:36,054 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:00:36,054 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:00:36,054 - Routes - INFO - /                                   → GET
2025-08-22 12:00:36,056 - Routes - INFO - /health                             → GET
2025-08-22 12:00:36,056 - Routes - INFO - /info                               → GET
2025-08-22 12:00:36,056 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:00:36,056 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:00:42,442 - AuthRouter - INFO - Realizando logout...
2025-08-22 12:00:42,442 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 12:00:45,871 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 12:00:45,872 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 12:00:45,884 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 12:00:46,143 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 12:00:46,143 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 12:00:46,144 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 12:00:46,144 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:00:51,963 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 1
2025-08-22 12:00:53,218 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 4
2025-08-22 12:01:58,910 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:01:58,911 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:02:00,109 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:02:00,109 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:02:00,148 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:02:00,149 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:02:00,149 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:02:00,150 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:02:00,150 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:02:00,151 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:02:00,151 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:02:00,151 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:02:00,151 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:02:00,151 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:02:00,151 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:02:00,152 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:02:00,152 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:02:00,152 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:02:00,152 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:02:00,152 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:02:00,153 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:02:00,153 - Routes - INFO - /livros/                            → GET
2025-08-22 12:02:00,153 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:02:00,154 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:02:00,154 - Routes - INFO - /livros/                            → POST
2025-08-22 12:02:00,154 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:02:00,154 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:02:00,154 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:02:00,155 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:02:00,155 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:02:00,155 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:02:00,155 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:02:00,155 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:02:00,155 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:02:00,156 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:02:00,156 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:02:00,156 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:02:00,157 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:02:00,157 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:02:00,157 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:02:00,157 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:02:00,157 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:02:00,158 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:02:00,158 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:02:00,158 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:02:00,158 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:02:00,158 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:02:00,159 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:02:00,159 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:02:00,159 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:02:00,159 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:02:00,159 - Routes - INFO - /                                   → GET
2025-08-22 12:02:00,159 - Routes - INFO - /health                             → GET
2025-08-22 12:02:00,159 - Routes - INFO - /info                               → GET
2025-08-22 12:02:00,161 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:02:00,161 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:02:08,354 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:02:08,355 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:02:09,675 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:02:09,676 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:02:09,729 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:02:09,729 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:02:09,730 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:02:09,730 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:02:09,730 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:02:09,730 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:02:09,730 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:02:09,730 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:02:09,730 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:02:09,731 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:02:09,731 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:02:09,731 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:02:09,731 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:02:09,731 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:02:09,731 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:02:09,732 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:02:09,732 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:02:09,732 - Routes - INFO - /livros/                            → GET
2025-08-22 12:02:09,732 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:02:09,732 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:02:09,732 - Routes - INFO - /livros/                            → POST
2025-08-22 12:02:09,733 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:02:09,733 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:02:09,733 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:02:09,733 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:02:09,733 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:02:09,733 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:02:09,734 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:02:09,734 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:02:09,734 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:02:09,734 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:02:09,734 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:02:09,734 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:02:09,734 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:02:09,735 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:02:09,735 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:02:09,735 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:02:09,735 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:02:09,735 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:02:09,735 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:02:09,735 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:02:09,735 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:02:09,736 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:02:09,736 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:02:09,736 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:02:09,736 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:02:09,736 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:02:09,736 - Routes - INFO - /                                   → GET
2025-08-22 12:02:09,736 - Routes - INFO - /health                             → GET
2025-08-22 12:02:09,737 - Routes - INFO - /info                               → GET
2025-08-22 12:02:09,737 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:02:09,737 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:02:37,353 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 12:02:51,430 - AuthRouter - INFO - Realizando logout...
2025-08-22 12:02:51,430 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 12:02:59,115 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 12:02:59,117 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 12:02:59,125 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 12:02:59,386 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 12:02:59,386 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 12:02:59,387 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 12:02:59,387 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:03:02,840 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 4
2025-08-22 12:03:05,895 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 12:03:55,013 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:03:55,013 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:03:56,433 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:03:56,433 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:03:56,467 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:03:56,468 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:03:56,468 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:03:56,469 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:03:56,469 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:03:56,469 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:03:56,469 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:03:56,469 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:03:56,469 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:03:56,469 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:03:56,470 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:03:56,470 - Routes - INFO - /livros/                            → GET
2025-08-22 12:03:56,470 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:03:56,471 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:03:56,471 - Routes - INFO - /livros/                            → POST
2025-08-22 12:03:56,471 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:03:56,471 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:03:56,471 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:03:56,471 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:03:56,471 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:03:56,471 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:03:56,471 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:03:56,472 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:03:56,472 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:03:56,472 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:03:56,472 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:03:56,472 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:03:56,473 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:03:56,474 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:03:56,474 - Routes - INFO - /                                   → GET
2025-08-22 12:03:56,474 - Routes - INFO - /health                             → GET
2025-08-22 12:03:56,474 - Routes - INFO - /info                               → GET
2025-08-22 12:03:56,474 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:03:56,474 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:04:02,642 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:04:02,643 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:04:03,767 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:04:03,768 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:04:03,821 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:04:03,822 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:04:03,822 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:04:03,822 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:04:03,822 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:04:03,823 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:04:03,823 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:04:03,823 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:04:03,824 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:04:03,824 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:04:03,824 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:04:03,824 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:04:03,824 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:04:03,824 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:04:03,824 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:04:03,825 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:04:03,825 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:04:03,825 - Routes - INFO - /livros/                            → GET
2025-08-22 12:04:03,825 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:04:03,825 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:04:03,825 - Routes - INFO - /livros/                            → POST
2025-08-22 12:04:03,826 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:04:03,826 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:04:03,827 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:04:03,827 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:04:03,827 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:04:03,828 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:04:03,828 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:04:03,828 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:04:03,828 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:04:03,829 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:04:03,829 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:04:03,829 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:04:03,829 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:04:03,829 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:04:03,829 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:04:03,830 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:04:03,830 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:04:03,830 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:04:03,830 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:04:03,831 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:04:03,832 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:04:03,832 - Routes - INFO - /                                   → GET
2025-08-22 12:04:03,832 - Routes - INFO - /health                             → GET
2025-08-22 12:04:03,833 - Routes - INFO - /info                               → GET
2025-08-22 12:04:03,833 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:04:03,833 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:04:16,144 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:04:16,145 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:04:21,714 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:04:21,714 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:04:21,758 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:04:21,758 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:04:21,758 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:04:21,758 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:04:21,758 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:04:21,758 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:04:21,758 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:04:21,758 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:04:21,758 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:04:21,760 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:04:21,760 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:04:21,760 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:04:21,760 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:04:21,760 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:04:21,760 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:04:21,761 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:04:21,761 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:04:21,761 - Routes - INFO - /livros/                            → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/                            → POST
2025-08-22 12:04:21,761 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:04:21,761 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:04:21,761 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:04:21,761 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:04:21,761 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:04:21,761 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:04:21,761 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:04:21,761 - Routes - INFO - /                                   → GET
2025-08-22 12:04:21,761 - Routes - INFO - /health                             → GET
2025-08-22 12:04:21,761 - Routes - INFO - /info                               → GET
2025-08-22 12:04:21,761 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:04:21,761 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:04:27,881 - AuthRouter - INFO - Realizando logout...
2025-08-22 12:04:27,881 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 12:04:30,558 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 12:04:30,559 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 12:04:30,574 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 12:04:30,801 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 12:04:30,802 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 12:04:30,802 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 12:04:30,802 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:04:34,901 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 4
2025-08-22 12:04:39,324 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 12:04:41,914 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 1, qtd 1
2025-08-22 12:06:33,369 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:06:33,369 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:06:39,094 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:06:39,094 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:06:39,128 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:06:39,128 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:06:39,128 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:06:39,128 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:06:39,128 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:06:39,128 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:06:39,128 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:06:39,128 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:06:39,128 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:06:39,128 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:06:39,128 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:06:39,128 - Routes - INFO - /livros/                            → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/                            → POST
2025-08-22 12:06:39,128 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:06:39,128 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:06:39,128 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:06:39,128 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:06:39,128 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:06:39,128 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:06:39,128 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:06:39,128 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:06:39,128 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:06:39,138 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:06:39,138 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:06:39,138 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:06:39,138 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:06:39,138 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:06:39,139 - Routes - INFO - /                                   → GET
2025-08-22 12:06:39,139 - Routes - INFO - /health                             → GET
2025-08-22 12:06:39,139 - Routes - INFO - /info                               → GET
2025-08-22 12:06:39,139 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:06:39,139 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:07:24,959 - PedidoRouter - ERROR - Erro ao finalizar pedido: unsupported operand type(s) for +=: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 134, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 25, in finalizar_pedido
    valor_total += item.quantidade * item.livro.preco
TypeError: unsupported operand type(s) for +=: 'float' and 'decimal.Decimal'
2025-08-22 12:08:26,052 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:08:26,052 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:08:27,122 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:08:27,122 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:08:27,162 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:08:27,162 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:08:27,162 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:08:27,162 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:08:27,162 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:08:27,162 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:08:27,162 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:08:27,162 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:08:27,162 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:08:27,162 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:08:27,162 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:08:27,162 - Routes - INFO - /livros/                            → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/                            → POST
2025-08-22 12:08:27,162 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:08:27,162 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:08:27,162 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:08:27,162 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:08:27,162 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:08:27,162 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:08:27,169 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:08:27,169 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:08:27,169 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:08:27,169 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:08:27,169 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:08:27,170 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:08:27,170 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:08:27,170 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:08:27,170 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:08:27,170 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:08:27,170 - Routes - INFO - /                                   → GET
2025-08-22 12:08:27,170 - Routes - INFO - /health                             → GET
2025-08-22 12:08:27,170 - Routes - INFO - /info                               → GET
2025-08-22 12:08:27,172 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:08:27,172 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:08:31,876 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:08:31,876 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:08:33,042 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:08:33,044 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:08:33,075 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:08:33,075 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:08:33,075 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:08:33,075 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:08:33,075 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:08:33,075 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:08:33,075 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:08:33,075 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:08:33,075 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:08:33,075 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:08:33,075 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:08:33,075 - Routes - INFO - /livros/                            → GET
2025-08-22 12:08:33,075 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:08:33,086 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:08:33,086 - Routes - INFO - /livros/                            → POST
2025-08-22 12:08:33,086 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:08:33,086 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:08:33,086 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:08:33,086 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:08:33,086 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:08:33,086 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:08:33,086 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:08:33,087 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:08:33,087 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:08:33,087 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:08:33,088 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:08:33,088 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:08:33,088 - Routes - INFO - /                                   → GET
2025-08-22 12:08:33,088 - Routes - INFO - /health                             → GET
2025-08-22 12:08:33,088 - Routes - INFO - /info                               → GET
2025-08-22 12:08:33,088 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:08:33,088 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:08:38,329 - AuthRouter - INFO - Realizando logout...
2025-08-22 12:08:38,329 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 12:08:41,523 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 12:08:41,524 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 12:08:41,549 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 12:08:41,802 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 12:08:41,802 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 12:08:41,803 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 12:08:41,803 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:08:48,764 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 10
2025-08-22 12:08:56,429 - PedidoRouter - ERROR - Erro ao finalizar pedido: (psycopg2.errors.UndefinedColumn) column "valor_total" of relation "pedidos" does not exist
LINE 1: INSERT INTO biblioteca.pedidos (usuario_id, valor_total, sta...
                                                    ^

[SQL: INSERT INTO biblioteca.pedidos (usuario_id, valor_total, status, data_criacao, data_atualizacao) VALUES (%(usuario_id)s, %(valor_total)s, %(status)s, %(data_criacao)s, %(data_atualizacao)s) RETURNING biblioteca.pedidos.id]
[parameters: {'usuario_id': 1, 'valor_total': 131.88, 'status': 'PENDENTE', 'data_criacao': datetime.datetime(2025, 8, 22, 15, 8, 56, 424710), 'data_atualizacao': datetime.datetime(2025, 8, 22, 15, 8, 56, 424710)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "valor_total" of relation "pedidos" does not exist
LINE 1: INSERT INTO biblioteca.pedidos (usuario_id, valor_total, sta...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 134, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 27, in finalizar_pedido
    pedido = self.repo.criar_pedido(usuario_id, valor_total)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 44, in criar_pedido
    self.db.commit()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "valor_total" of relation "pedidos" does not exist
LINE 1: INSERT INTO biblioteca.pedidos (usuario_id, valor_total, sta...
                                                    ^

[SQL: INSERT INTO biblioteca.pedidos (usuario_id, valor_total, status, data_criacao, data_atualizacao) VALUES (%(usuario_id)s, %(valor_total)s, %(status)s, %(data_criacao)s, %(data_atualizacao)s) RETURNING biblioteca.pedidos.id]
[parameters: {'usuario_id': 1, 'valor_total': 131.88, 'status': 'PENDENTE', 'data_criacao': datetime.datetime(2025, 8, 22, 15, 8, 56, 424710), 'data_atualizacao': datetime.datetime(2025, 8, 22, 15, 8, 56, 424710)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 12:11:57,126 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:11:57,126 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:11:58,322 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:11:58,322 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:11:58,364 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:11:58,364 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:11:58,364 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:11:58,364 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:11:58,371 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:11:58,371 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:11:58,371 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:11:58,371 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:11:58,371 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:11:58,372 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:11:58,372 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:11:58,372 - Routes - INFO - /livros/                            → GET
2025-08-22 12:11:58,372 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:11:58,372 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:11:58,372 - Routes - INFO - /livros/                            → POST
2025-08-22 12:11:58,372 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:11:58,374 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:11:58,374 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:11:58,374 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:11:58,375 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:11:58,375 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:11:58,375 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:11:58,375 - Routes - INFO - /                                   → GET
2025-08-22 12:11:58,375 - Routes - INFO - /health                             → GET
2025-08-22 12:11:58,375 - Routes - INFO - /info                               → GET
2025-08-22 12:11:58,380 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:11:58,380 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:12:03,991 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:12:03,991 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:12:05,249 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:12:05,249 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:12:05,308 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:12:05,308 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:12:05,308 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:12:05,308 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:12:05,314 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:12:05,314 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:12:05,314 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:12:05,315 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:12:05,315 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:12:05,315 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:12:05,315 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:12:05,315 - Routes - INFO - /livros/                            → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/                            → POST
2025-08-22 12:12:05,315 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:12:05,315 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:12:05,315 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:12:05,315 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:12:05,315 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:12:05,315 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:12:05,315 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:12:05,315 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:12:05,315 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:12:05,322 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:12:05,322 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:12:05,322 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:12:05,322 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:12:05,322 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:12:05,322 - Routes - INFO - /                                   → GET
2025-08-22 12:12:05,322 - Routes - INFO - /health                             → GET
2025-08-22 12:12:05,322 - Routes - INFO - /info                               → GET
2025-08-22 12:12:05,322 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:12:05,322 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:12:12,222 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:12:12,222 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:12:13,438 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:12:13,438 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:12:13,496 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:12:13,496 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:12:13,496 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:12:13,497 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:12:13,497 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:12:13,498 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:12:13,498 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:12:13,498 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:12:13,498 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:12:13,499 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:12:13,499 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:12:13,500 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:12:13,500 - Routes - INFO - /livros/                            → GET
2025-08-22 12:12:13,500 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:12:13,501 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:12:13,501 - Routes - INFO - /livros/                            → POST
2025-08-22 12:12:13,501 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:12:13,501 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:12:13,501 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:12:13,502 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:12:13,502 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:12:13,502 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:12:13,504 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:12:13,505 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:12:13,505 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:12:13,505 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:12:13,506 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:12:13,506 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:12:13,506 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:12:13,506 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:12:13,508 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:12:13,508 - Routes - INFO - /                                   → GET
2025-08-22 12:12:13,508 - Routes - INFO - /health                             → GET
2025-08-22 12:12:13,508 - Routes - INFO - /info                               → GET
2025-08-22 12:12:13,508 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:12:13,509 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:14:05,464 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:14:05,465 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:14:06,705 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:14:06,705 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:14:06,755 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:14:06,755 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:14:06,755 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:14:06,756 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:14:06,756 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:14:06,756 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:14:06,756 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:14:06,757 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:14:06,757 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:14:06,757 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:14:06,757 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:14:06,757 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:14:06,757 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:14:06,758 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:14:06,758 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:14:06,758 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:14:06,758 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:14:06,758 - Routes - INFO - /livros/                            → GET
2025-08-22 12:14:06,758 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:14:06,759 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:14:06,759 - Routes - INFO - /livros/                            → POST
2025-08-22 12:14:06,759 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:14:06,759 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:14:06,759 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:14:06,760 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:14:06,760 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:14:06,760 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:14:06,760 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:14:06,760 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:14:06,761 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:14:06,761 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:14:06,761 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:14:06,761 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:14:06,761 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:14:06,762 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:14:06,762 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:14:06,762 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:14:06,762 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:14:06,762 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:14:06,763 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:14:06,765 - Routes - INFO - /                                   → GET
2025-08-22 12:14:06,765 - Routes - INFO - /health                             → GET
2025-08-22 12:14:06,765 - Routes - INFO - /info                               → GET
2025-08-22 12:14:06,765 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:14:06,765 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:16:12,823 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 12:16:12,823 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 12:19:06,362 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 12:19:06,362 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 12:19:06,393 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 12:19:06,393 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 12:19:06,399 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 12:19:06,399 - Routes - INFO - /auth/login                         → GET
2025-08-22 12:19:06,399 - Routes - INFO - /auth/login                         → POST
2025-08-22 12:19:06,399 - Routes - INFO - /auth/logout                        → GET
2025-08-22 12:19:06,399 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 12:19:06,400 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 12:19:06,400 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 12:19:06,400 - Routes - INFO - /auth/status                        → GET
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 12:19:06,400 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 12:19:06,401 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 12:19:06,401 - Routes - INFO - /livros/                            → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/listar                      → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/                            → POST
2025-08-22 12:19:06,401 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 12:19:06,401 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 12:19:06,401 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 12:19:06,401 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 12:19:06,401 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 12:19:06,403 - Routes - INFO - /livros/status                      → GET
2025-08-22 12:19:06,403 - Routes - INFO - /carrinho/                          → GET
2025-08-22 12:19:06,404 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 12:19:06,404 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 12:19:06,404 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 12:19:06,405 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 12:19:06,405 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 12:19:06,405 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 12:19:06,405 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/                           → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 12:19:06,405 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 12:19:06,405 - Routes - INFO - /                                   → GET
2025-08-22 12:19:06,405 - Routes - INFO - /health                             → GET
2025-08-22 12:19:06,405 - Routes - INFO - /info                               → GET
2025-08-22 12:19:06,405 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 12:19:06,405 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 12:19:49,880 - AuthRouter - INFO - Realizando logout...
2025-08-22 12:19:49,880 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 12:19:52,594 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 12:19:52,594 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 12:19:52,608 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 12:19:52,863 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 12:19:52,863 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 12:19:52,863 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 12:19:52,863 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 12:19:55,563 - PedidoRouter - ERROR - Erro ao carregar página de pedidos: (psycopg2.errors.UndefinedColumn) column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.pedidos.id AS biblioteca_pedidos_id, biblioteca.pedidos.usuario_id AS biblioteca_pedidos_usuario_id, biblioteca.pedidos.total AS biblioteca_pedidos_total, biblioteca.pedidos.status AS biblioteca_pedidos_status, biblioteca.pedidos.data_criacao AS biblioteca_pedidos_data_criacao, biblioteca.pedidos.data_atualizacao AS biblioteca_pedidos_data_atualizacao 
FROM biblioteca.pedidos 
WHERE biblioteca.pedidos.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 27, in pagina_pedidos
    pedidos = service.listar_pedidos_por_usuario(user.id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 45, in listar_pedidos_por_usuario
    return self.listar_pedidos_usuario(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 41, in listar_pedidos_usuario
    return self.repo.listar_pedidos_usuario(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 61, in listar_pedidos_usuario
    return self.db.query(Pedido).filter(Pedido.usuario_id == usuario_id).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.pedidos.id AS biblioteca_pedidos_id, biblioteca.pedidos.usuario_id AS biblioteca_pedidos_usuario_id, biblioteca.pedidos.total AS biblioteca_pedidos_total, biblioteca.pedidos.status AS biblioteca_pedidos_status, biblioteca.pedidos.data_criacao AS biblioteca_pedidos_data_criacao, biblioteca.pedidos.data_atualizacao AS biblioteca_pedidos_data_atualizacao 
FROM biblioteca.pedidos 
WHERE biblioteca.pedidos.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 12:20:03,470 - PedidoRouter - ERROR - Erro ao carregar página de pedidos: (psycopg2.errors.UndefinedColumn) column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.pedidos.id AS biblioteca_pedidos_id, biblioteca.pedidos.usuario_id AS biblioteca_pedidos_usuario_id, biblioteca.pedidos.total AS biblioteca_pedidos_total, biblioteca.pedidos.status AS biblioteca_pedidos_status, biblioteca.pedidos.data_criacao AS biblioteca_pedidos_data_criacao, biblioteca.pedidos.data_atualizacao AS biblioteca_pedidos_data_atualizacao 
FROM biblioteca.pedidos 
WHERE biblioteca.pedidos.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 27, in pagina_pedidos
    pedidos = service.listar_pedidos_por_usuario(user.id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 45, in listar_pedidos_por_usuario
    return self.listar_pedidos_usuario(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 41, in listar_pedidos_usuario
    return self.repo.listar_pedidos_usuario(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 61, in listar_pedidos_usuario
    return self.db.query(Pedido).filter(Pedido.usuario_id == usuario_id).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column pedidos.data_criacao does not exist
LINE 1: ...teca.pedidos.status AS biblioteca_pedidos_status, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.pedidos.id AS biblioteca_pedidos_id, biblioteca.pedidos.usuario_id AS biblioteca_pedidos_usuario_id, biblioteca.pedidos.total AS biblioteca_pedidos_total, biblioteca.pedidos.status AS biblioteca_pedidos_status, biblioteca.pedidos.data_criacao AS biblioteca_pedidos_data_criacao, biblioteca.pedidos.data_atualizacao AS biblioteca_pedidos_data_atualizacao 
FROM biblioteca.pedidos 
WHERE biblioteca.pedidos.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 12:20:05,297 - LivroRouter - ERROR - Erro ao carregar página de livros: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\livro_router.py", line 28, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\livro_service.py", line 11, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 13:59:52,628 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 13:59:52,628 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:01:28,361 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:01:28,361 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:01:28,404 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:01:28,404 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:01:28,404 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:01:28,404 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:01:28,404 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:01:28,404 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:01:28,404 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:01:28,404 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:01:28,404 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:01:28,407 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:01:28,407 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:01:28,409 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:01:28,409 - Routes - INFO - /livros/                            → GET
2025-08-22 14:01:28,409 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:01:28,409 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:01:28,409 - Routes - INFO - /livros/                            → POST
2025-08-22 14:01:28,409 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:01:28,409 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:01:28,409 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:01:28,410 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:01:28,410 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:01:28,410 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:01:28,410 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:01:28,414 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:01:28,414 - Routes - INFO - /                                   → GET
2025-08-22 14:01:28,414 - Routes - INFO - /health                             → GET
2025-08-22 14:01:28,414 - Routes - INFO - /info                               → GET
2025-08-22 14:01:28,414 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:01:28,414 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:01:36,919 - LivroRouter - ERROR - Erro ao carregar página de livros: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\livro_router.py", line 28, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\livro_service.py", line 11, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:08:03,373 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:08:03,373 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:08:04,605 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:08:04,606 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:08:04,660 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:08:04,661 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:08:04,661 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:08:04,662 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:08:04,662 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:08:04,662 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:08:04,662 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:08:04,662 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:08:04,663 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:08:04,663 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:08:04,663 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:08:04,663 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:08:04,663 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:08:04,664 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:08:04,664 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:08:04,664 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:08:04,664 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:08:04,664 - Routes - INFO - /livros/                            → GET
2025-08-22 14:08:04,664 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:08:04,665 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:08:04,665 - Routes - INFO - /livros/                            → POST
2025-08-22 14:08:04,665 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:08:04,665 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:08:04,665 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:08:04,666 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:08:04,666 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:08:04,667 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:08:04,667 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:08:04,667 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:08:04,667 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:08:04,667 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:08:04,668 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:08:04,669 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:08:04,669 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:08:04,669 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:08:04,669 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:08:04,669 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:08:04,669 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:08:04,669 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:08:04,670 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:08:04,670 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:08:04,670 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:08:04,670 - Routes - INFO - /                                   → GET
2025-08-22 14:08:04,670 - Routes - INFO - /health                             → GET
2025-08-22 14:08:04,670 - Routes - INFO - /info                               → GET
2025-08-22 14:08:04,671 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:08:04,671 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:08:20,862 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:08:20,862 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:08:22,297 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:08:22,297 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:08:22,361 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:08:22,361 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:08:22,361 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:08:22,361 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:08:22,363 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:08:22,363 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:08:22,363 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:08:22,363 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:08:22,363 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:08:22,364 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:08:22,364 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:08:22,364 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:08:22,364 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:08:22,365 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:08:22,365 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:08:22,365 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:08:22,365 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:08:22,365 - Routes - INFO - /livros/                            → GET
2025-08-22 14:08:22,365 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:08:22,365 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:08:22,366 - Routes - INFO - /livros/                            → POST
2025-08-22 14:08:22,366 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:08:22,366 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:08:22,367 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:08:22,367 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:08:22,367 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:08:22,367 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:08:22,367 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:08:22,367 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:08:22,369 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:08:22,369 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:08:22,369 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:08:22,369 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:08:22,369 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:08:22,370 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:08:22,370 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:08:22,370 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:08:22,370 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:08:22,370 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:08:22,371 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:08:22,372 - Routes - INFO - /                                   → GET
2025-08-22 14:08:22,372 - Routes - INFO - /health                             → GET
2025-08-22 14:08:22,372 - Routes - INFO - /info                               → GET
2025-08-22 14:08:22,372 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:08:22,372 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:29:15,068 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:29:15,068 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:29:16,327 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:29:16,328 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:29:16,391 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:29:16,391 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:29:16,392 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:29:16,392 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:29:16,392 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:29:16,392 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:29:16,392 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:29:16,393 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:29:16,393 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:29:16,394 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:29:16,394 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:29:16,394 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:29:16,394 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:29:16,394 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:29:16,395 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:29:16,395 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:29:16,395 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:29:16,395 - Routes - INFO - /livros/                            → GET
2025-08-22 14:29:16,395 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:29:16,396 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:29:16,396 - Routes - INFO - /livros/                            → POST
2025-08-22 14:29:16,396 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:29:16,396 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:29:16,396 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:29:16,396 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:29:16,397 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:29:16,397 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:29:16,397 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:29:16,397 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:29:16,398 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:29:16,398 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:29:16,398 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:29:16,398 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:29:16,398 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:29:16,398 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:29:16,399 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:29:16,399 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:29:16,399 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:29:16,399 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:29:16,399 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:29:16,399 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:29:16,400 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:29:16,400 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:29:16,400 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:29:16,401 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:29:16,401 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:29:16,401 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:29:16,401 - Routes - INFO - /                                   → GET
2025-08-22 14:29:16,401 - Routes - INFO - /health                             → GET
2025-08-22 14:29:16,402 - Routes - INFO - /info                               → GET
2025-08-22 14:29:16,402 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:29:16,402 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:29:18,858 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:29:18,858 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:29:19,966 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:29:19,966 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:29:20,026 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:29:20,028 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:29:20,028 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:29:20,028 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:29:20,028 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:29:20,028 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:29:20,028 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:29:20,028 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:29:20,028 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:29:20,028 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:29:20,028 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:29:20,030 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:29:20,030 - Routes - INFO - /livros/                            → GET
2025-08-22 14:29:20,030 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:29:20,030 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:29:20,031 - Routes - INFO - /livros/                            → POST
2025-08-22 14:29:20,031 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:29:20,031 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:29:20,032 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:29:20,032 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:29:20,032 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:29:20,033 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:29:20,034 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:29:20,034 - Routes - INFO - /                                   → GET
2025-08-22 14:29:20,034 - Routes - INFO - /health                             → GET
2025-08-22 14:29:20,034 - Routes - INFO - /info                               → GET
2025-08-22 14:29:20,034 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:29:20,034 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:29:26,447 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:29:26,447 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:29:27,623 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:29:27,623 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:29:27,684 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:29:27,685 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:29:27,685 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:29:27,685 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:29:27,685 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:29:27,685 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:29:27,685 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:29:27,685 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:29:27,685 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:29:27,685 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:29:27,685 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:29:27,689 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:29:27,689 - Routes - INFO - /livros/                            → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/                            → POST
2025-08-22 14:29:27,689 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:29:27,689 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:29:27,689 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:29:27,689 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:29:27,689 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:29:27,691 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:29:27,691 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:29:27,691 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:29:27,691 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:29:27,693 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:29:27,693 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:29:27,693 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:29:27,695 - Routes - INFO - /                                   → GET
2025-08-22 14:29:27,695 - Routes - INFO - /health                             → GET
2025-08-22 14:29:27,695 - Routes - INFO - /info                               → GET
2025-08-22 14:29:27,695 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:29:27,695 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:29:30,665 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:29:30,666 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:29:31,729 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:29:31,729 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:29:31,778 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:29:31,778 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:29:31,779 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:29:31,779 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:29:31,779 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:29:31,779 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:29:31,779 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:29:31,779 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:29:31,779 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:29:31,779 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:29:31,779 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:29:31,779 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:29:31,780 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:29:31,780 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:29:31,780 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:29:31,780 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:29:31,780 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:29:31,780 - Routes - INFO - /livros/                            → GET
2025-08-22 14:29:31,780 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:29:31,780 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:29:31,780 - Routes - INFO - /livros/                            → POST
2025-08-22 14:29:31,780 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:29:31,780 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:29:31,780 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:29:31,780 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:29:31,780 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:29:31,782 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:29:31,782 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:29:31,783 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:29:31,783 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:29:31,783 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:29:31,783 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:29:31,784 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:29:31,784 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:29:31,784 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:29:31,784 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:29:31,785 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:29:31,785 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:29:31,785 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:29:31,785 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:29:31,785 - Routes - INFO - /                                   → GET
2025-08-22 14:29:31,785 - Routes - INFO - /health                             → GET
2025-08-22 14:29:31,785 - Routes - INFO - /info                               → GET
2025-08-22 14:29:31,785 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:29:31,785 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:29:53,800 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:29:53,800 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:29:55,004 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:29:55,004 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:29:55,054 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:29:55,054 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:29:55,054 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:29:55,054 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:29:55,054 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:29:55,054 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:29:55,054 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:29:55,054 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:29:55,054 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:29:55,054 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:29:55,054 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:29:55,054 - Routes - INFO - /livros/                            → GET
2025-08-22 14:29:55,062 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:29:55,062 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:29:55,062 - Routes - INFO - /livros/                            → POST
2025-08-22 14:29:55,062 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:29:55,062 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:29:55,062 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:29:55,063 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:29:55,063 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:29:55,063 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:29:55,065 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:29:55,065 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:29:55,065 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:29:55,066 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:29:55,066 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:29:55,066 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:29:55,066 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:29:55,066 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:29:55,067 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:29:55,067 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:29:55,067 - Routes - INFO - /                                   → GET
2025-08-22 14:29:55,067 - Routes - INFO - /health                             → GET
2025-08-22 14:29:55,067 - Routes - INFO - /info                               → GET
2025-08-22 14:29:55,067 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:29:55,067 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:30:01,052 - LivroRouter - ERROR - Erro ao carregar página de livros: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.created_at AS biblioteca_livros_created_at, biblioteca.livros.updated_at AS biblioteca_livros_updated_at 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\livro_router.py", line 28, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\livro_service.py", line 11, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.isbn does not exist
LINE 1: ...blioteca.livros.autor AS biblioteca_livros_autor, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.created_at AS biblioteca_livros_created_at, biblioteca.livros.updated_at AS biblioteca_livros_updated_at 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:32:40,988 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:32:40,988 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:32:42,124 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:32:42,124 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:32:42,183 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:32:42,183 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:32:42,183 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:32:42,183 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:32:42,183 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:32:42,183 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:32:42,185 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:32:42,185 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:32:42,185 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:32:42,185 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:32:42,185 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:32:42,185 - Routes - INFO - /livros/                            → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/                            → POST
2025-08-22 14:32:42,185 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:32:42,185 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:32:42,185 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:32:42,185 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:32:42,185 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:32:42,185 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:32:42,185 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:32:42,185 - Routes - INFO - /                                   → GET
2025-08-22 14:32:42,191 - Routes - INFO - /health                             → GET
2025-08-22 14:32:42,191 - Routes - INFO - /info                               → GET
2025-08-22 14:32:42,191 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:32:42,191 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:32:44,152 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:32:44,152 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:32:49,593 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:32:49,594 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:32:49,647 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:32:49,647 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:32:49,647 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:32:49,647 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:32:49,648 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:32:49,648 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:32:49,648 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:32:49,648 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:32:49,648 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:32:49,648 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:32:49,648 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:32:49,649 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:32:49,649 - Routes - INFO - /livros/                            → GET
2025-08-22 14:32:49,649 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:32:49,649 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:32:49,649 - Routes - INFO - /livros/                            → POST
2025-08-22 14:32:49,649 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:32:49,650 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:32:49,650 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:32:49,651 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:32:49,651 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:32:49,651 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:32:49,653 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:32:49,653 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:32:49,654 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:32:49,654 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:32:49,654 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:32:49,654 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:32:49,654 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:32:49,655 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:32:49,655 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:32:49,655 - Routes - INFO - /                                   → GET
2025-08-22 14:32:49,655 - Routes - INFO - /health                             → GET
2025-08-22 14:32:49,655 - Routes - INFO - /info                               → GET
2025-08-22 14:32:49,655 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:32:49,655 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:32:56,888 - LivroRouter - ERROR - Erro ao carregar página de livros: (psycopg2.errors.UndefinedColumn) column livros.created_at does not exist
LINE 1: ...ca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.created_at AS biblioteca_livros_created_at, biblioteca.livros.updated_at AS biblioteca_livros_updated_at 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.created_at does not exist
LINE 1: ...ca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\livro_router.py", line 28, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\livro_service.py", line 11, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.created_at does not exist
LINE 1: ...ca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.created_at AS biblioteca_livros_created_at, biblioteca.livros.updated_at AS biblioteca_livros_updated_at 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:34:22,707 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:34:22,708 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:34:24,149 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:34:24,149 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:34:24,197 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:34:24,197 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:34:24,197 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:34:24,197 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:34:24,198 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:34:24,198 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:34:24,198 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:34:24,198 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:34:24,198 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:34:24,198 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:34:24,198 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:34:24,198 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:34:24,199 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:34:24,199 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:34:24,199 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:34:24,199 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:34:24,199 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:34:24,199 - Routes - INFO - /livros/                            → GET
2025-08-22 14:34:24,199 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:34:24,200 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:34:24,200 - Routes - INFO - /livros/                            → POST
2025-08-22 14:34:24,200 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:34:24,200 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:34:24,201 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:34:24,201 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:34:24,201 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:34:24,201 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:34:24,201 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:34:24,201 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:34:24,203 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:34:24,203 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:34:24,203 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:34:24,203 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:34:24,203 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:34:24,203 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:34:24,204 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:34:24,204 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:34:24,204 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:34:24,204 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:34:24,205 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:34:24,205 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:34:24,205 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:34:24,205 - Routes - INFO - /                                   → GET
2025-08-22 14:34:24,205 - Routes - INFO - /health                             → GET
2025-08-22 14:34:24,205 - Routes - INFO - /info                               → GET
2025-08-22 14:34:24,205 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:34:24,206 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:34:33,457 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:34:33,458 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:34:34,608 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:34:34,608 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:34:34,651 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:34:34,653 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:34:34,653 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:34:34,653 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:34:34,653 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:34:34,654 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:34:34,654 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:34:34,654 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:34:34,654 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:34:34,654 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:34:34,654 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:34:34,654 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:34:34,655 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:34:34,655 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:34:34,655 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:34:34,655 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:34:34,655 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:34:34,655 - Routes - INFO - /livros/                            → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/                            → POST
2025-08-22 14:34:34,656 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:34:34,656 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:34:34,656 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:34:34,656 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:34:34,656 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:34:34,657 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:34:34,657 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:34:34,657 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:34:34,657 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:34:34,657 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:34:34,657 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:34:34,657 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:34:34,658 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:34:34,658 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:34:34,658 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:34:34,658 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:34:34,658 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:34:34,658 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:34:34,658 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:34:34,659 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:34:34,659 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:34:34,659 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:34:34,659 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:34:34,659 - Routes - INFO - /                                   → GET
2025-08-22 14:34:34,659 - Routes - INFO - /health                             → GET
2025-08-22 14:34:34,659 - Routes - INFO - /info                               → GET
2025-08-22 14:34:34,660 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:34:34,660 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:35:56,353 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:35:56,354 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:35:57,707 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:35:57,707 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:35:57,746 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:35:57,746 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:35:57,746 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:35:57,746 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:35:57,746 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:35:57,747 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:35:57,747 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:35:57,747 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:35:57,747 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:35:57,747 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:35:57,747 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:35:57,748 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:35:57,749 - Routes - INFO - /livros/                            → GET
2025-08-22 14:35:57,749 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:35:57,749 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:35:57,749 - Routes - INFO - /livros/                            → POST
2025-08-22 14:35:57,749 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:35:57,749 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:35:57,749 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:35:57,749 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:35:57,749 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:35:57,750 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:35:57,750 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:35:57,750 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:35:57,750 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:35:57,750 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:35:57,750 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:35:57,750 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:35:57,750 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:35:57,750 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:35:57,751 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:35:57,751 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:35:57,752 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:35:57,752 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:35:57,752 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:35:57,752 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:35:57,752 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:35:57,753 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:35:57,753 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:35:57,753 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:35:57,753 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:35:57,753 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:35:57,754 - Routes - INFO - /                                   → GET
2025-08-22 14:35:57,754 - Routes - INFO - /health                             → GET
2025-08-22 14:35:57,754 - Routes - INFO - /info                               → GET
2025-08-22 14:35:57,754 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:35:57,754 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:36:20,775 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:36:20,776 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:36:21,909 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:36:21,911 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:36:21,985 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:36:21,986 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:36:21,986 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:36:21,987 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:36:21,988 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:36:21,988 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:36:21,988 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:36:21,988 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:36:21,988 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:36:21,989 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:36:21,989 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:36:21,990 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:36:21,990 - Routes - INFO - /livros/                            → GET
2025-08-22 14:36:21,991 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:36:21,991 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:36:21,991 - Routes - INFO - /livros/                            → POST
2025-08-22 14:36:21,992 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:36:21,992 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:36:21,992 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:36:21,992 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:36:21,992 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:36:21,993 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:36:21,993 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:36:21,993 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:36:21,993 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:36:21,993 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:36:21,993 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:36:21,994 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:36:21,994 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:36:21,995 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:36:21,995 - Routes - INFO - /                                   → GET
2025-08-22 14:36:21,996 - Routes - INFO - /health                             → GET
2025-08-22 14:36:21,996 - Routes - INFO - /info                               → GET
2025-08-22 14:36:21,996 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:36:21,996 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:36:22,336 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:36:22,338 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:36:28,287 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:36:28,287 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:36:28,327 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:36:28,328 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:36:28,328 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:36:28,328 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:36:28,328 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:36:28,328 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:36:28,328 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:36:28,328 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:36:28,328 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:36:28,328 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:36:28,328 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:36:28,329 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:36:28,329 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:36:28,329 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:36:28,329 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:36:28,329 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:36:28,330 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:36:28,330 - Routes - INFO - /livros/                            → GET
2025-08-22 14:36:28,330 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:36:28,331 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:36:28,331 - Routes - INFO - /livros/                            → POST
2025-08-22 14:36:28,331 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:36:28,331 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:36:28,331 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:36:28,332 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:36:28,332 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:36:28,332 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:36:28,333 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:36:28,333 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:36:28,333 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:36:28,333 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:36:28,333 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:36:28,333 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:36:28,334 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:36:28,334 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:36:28,334 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:36:28,334 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:36:28,334 - Routes - INFO - /                                   → GET
2025-08-22 14:36:28,334 - Routes - INFO - /health                             → GET
2025-08-22 14:36:28,334 - Routes - INFO - /info                               → GET
2025-08-22 14:36:28,335 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:36:28,335 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:38:30,331 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:38:30,331 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:38:31,815 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:38:31,815 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:38:31,849 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:38:31,849 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:38:31,849 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:38:31,849 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:38:31,850 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:38:31,850 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:38:31,850 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:38:31,850 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:38:31,850 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:38:31,850 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:38:31,851 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:38:31,851 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:38:31,851 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:38:31,851 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:38:31,851 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:38:31,852 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:38:31,852 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:38:31,852 - Routes - INFO - /livros/                            → GET
2025-08-22 14:38:31,852 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:38:31,853 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:38:31,853 - Routes - INFO - /livros/                            → POST
2025-08-22 14:38:31,853 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:38:31,853 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:38:31,853 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:38:31,853 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:38:31,854 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:38:31,854 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:38:31,854 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:38:31,854 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:38:31,855 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:38:31,855 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:38:31,855 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:38:31,855 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:38:31,855 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:38:31,855 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:38:31,855 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:38:31,856 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:38:31,856 - Routes - INFO - /                                   → GET
2025-08-22 14:38:31,857 - Routes - INFO - /health                             → GET
2025-08-22 14:38:31,857 - Routes - INFO - /info                               → GET
2025-08-22 14:38:31,857 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:38:31,857 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:41:40,244 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:41:40,245 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:41:46,140 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:41:46,140 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:41:46,181 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:41:46,181 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:41:46,181 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:41:46,182 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:41:46,182 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:41:46,182 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:41:46,182 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:41:46,182 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:41:46,182 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:41:46,182 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:41:46,182 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:41:46,183 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:41:46,183 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:41:46,183 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:41:46,183 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:41:46,183 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:41:46,184 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:41:46,184 - Routes - INFO - /livros/                            → GET
2025-08-22 14:41:46,184 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:41:46,184 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:41:46,184 - Routes - INFO - /livros/                            → POST
2025-08-22 14:41:46,185 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:41:46,185 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:41:46,185 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:41:46,185 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:41:46,185 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:41:46,185 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:41:46,186 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:41:46,186 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:41:46,186 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:41:46,186 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:41:46,186 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:41:46,186 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:41:46,187 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:41:46,187 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:41:46,187 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:41:46,187 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:41:46,187 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:41:46,188 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:41:46,188 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:41:46,188 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:41:46,188 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:41:46,188 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:41:46,188 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:41:46,189 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:41:46,189 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:41:46,189 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:41:46,189 - Routes - INFO - /                                   → GET
2025-08-22 14:41:46,189 - Routes - INFO - /health                             → GET
2025-08-22 14:41:46,189 - Routes - INFO - /info                               → GET
2025-08-22 14:41:46,189 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:41:46,189 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:41:56,607 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 14:41:56,607 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 14:41:56,620 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 14:41:56,906 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 14:41:56,906 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 14:41:56,906 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 14:41:56,907 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 14:42:08,224 - CarrinhoRouter - ERROR - Erro ao adicionar item: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 117, in adicionar_item
    resultado = service.adicionar(user.id, livro_id, quantidade)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 9, in adicionar
    return self.repo.adicionar_item(usuario_id, livro_id, quantidade)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 10, in adicionar_item
    item = self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id, livro_id=livro_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:42:39,067 - CarrinhoRouter - ERROR - Erro ao adicionar item: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 117, in adicionar_item
    resultado = service.adicionar(user.id, livro_id, quantidade)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 9, in adicionar
    return self.repo.adicionar_item(usuario_id, livro_id, quantidade)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 10, in adicionar_item
    item = self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id, livro_id=livro_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:42:42,566 - CarrinhoRouter - ERROR - Erro ao carregar página do carrinho: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 27, in pagina_carrinho
    itens = service.listar_itens(user.id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 16, in listar_itens
    return self.listar(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 12, in listar
    return self.repo.listar_itens(usuario_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 21, in listar_itens
    return self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s]
[parameters: {'usuario_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:42:58,969 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:42:58,970 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:54:22,726 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:54:22,726 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:54:22,792 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:54:22,793 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:54:22,793 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:54:22,793 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:54:22,793 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:54:22,793 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:54:22,793 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:54:22,793 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:54:22,794 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:54:22,794 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:54:22,794 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:54:22,795 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:54:22,795 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:54:22,795 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:54:22,795 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:54:22,795 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:54:22,796 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:54:22,796 - Routes - INFO - /livros/                            → GET
2025-08-22 14:54:22,796 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:54:22,796 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:54:22,796 - Routes - INFO - /livros/                            → POST
2025-08-22 14:54:22,797 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:54:22,797 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:54:22,797 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:54:22,797 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:54:22,797 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:54:22,797 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:54:22,798 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:54:22,798 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:54:22,798 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:54:22,798 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:54:22,798 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:54:22,798 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:54:22,798 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:54:22,798 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:54:22,798 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:54:22,799 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:54:22,799 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:54:22,799 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:54:22,799 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:54:22,799 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:54:22,799 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:54:22,800 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:54:22,800 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:54:22,800 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:54:22,800 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:54:22,800 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:54:22,800 - Routes - INFO - /                                   → GET
2025-08-22 14:54:22,801 - Routes - INFO - /health                             → GET
2025-08-22 14:54:22,801 - Routes - INFO - /info                               → GET
2025-08-22 14:54:22,801 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:54:22,802 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:55:29,136 - AuthRouter - INFO - Realizando logout...
2025-08-22 14:55:29,136 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 14:55:32,066 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 14:55:32,066 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 14:55:32,077 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 14:55:32,323 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 14:55:32,324 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 14:55:32,324 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 14:55:32,324 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 14:55:38,457 - CarrinhoRouter - ERROR - Erro ao adicionar item: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 117, in adicionar_item
    resultado = service.adicionar(user.id, livro_id, quantidade)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 9, in adicionar
    return self.repo.adicionar_item(usuario_id, livro_id, quantidade)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 10, in adicionar_item
    item = self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id, livro_id=livro_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:56:24,060 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:56:24,060 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 14:56:28,270 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 14:56:28,270 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 14:56:28,322 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 14:56:28,323 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 14:56:28,323 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 14:56:28,323 - Routes - INFO - /auth/login                         → GET
2025-08-22 14:56:28,323 - Routes - INFO - /auth/login                         → POST
2025-08-22 14:56:28,323 - Routes - INFO - /auth/logout                        → GET
2025-08-22 14:56:28,323 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 14:56:28,324 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 14:56:28,324 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 14:56:28,324 - Routes - INFO - /auth/status                        → GET
2025-08-22 14:56:28,324 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 14:56:28,324 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 14:56:28,324 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 14:56:28,324 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 14:56:28,325 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 14:56:28,325 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 14:56:28,325 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 14:56:28,325 - Routes - INFO - /livros/                            → GET
2025-08-22 14:56:28,326 - Routes - INFO - /livros/listar                      → GET
2025-08-22 14:56:28,326 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 14:56:28,326 - Routes - INFO - /livros/                            → POST
2025-08-22 14:56:28,326 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 14:56:28,326 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 14:56:28,327 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 14:56:28,327 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 14:56:28,327 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 14:56:28,327 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 14:56:28,328 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 14:56:28,328 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 14:56:28,328 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 14:56:28,328 - Routes - INFO - /livros/status                      → GET
2025-08-22 14:56:28,328 - Routes - INFO - /carrinho/                          → GET
2025-08-22 14:56:28,328 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 14:56:28,328 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 14:56:28,328 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 14:56:28,329 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 14:56:28,329 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 14:56:28,329 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 14:56:28,329 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 14:56:28,329 - Routes - INFO - /pedidos/                           → GET
2025-08-22 14:56:28,329 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 14:56:28,329 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 14:56:28,330 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 14:56:28,330 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 14:56:28,330 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 14:56:28,330 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 14:56:28,330 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 14:56:28,330 - Routes - INFO - /                                   → GET
2025-08-22 14:56:28,330 - Routes - INFO - /health                             → GET
2025-08-22 14:56:28,330 - Routes - INFO - /info                               → GET
2025-08-22 14:56:28,330 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 14:56:28,331 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 14:56:35,269 - AuthRouter - INFO - Realizando logout...
2025-08-22 14:56:35,269 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 14:56:37,355 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 14:56:37,355 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 14:56:37,383 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 14:56:37,638 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 14:56:37,638 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 14:56:37,639 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 14:56:37,639 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 14:56:40,283 - CarrinhoRouter - ERROR - Erro ao adicionar item: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 117, in adicionar_item
    resultado = service.adicionar(user.id, livro_id, quantidade)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 9, in adicionar
    return self.repo.adicionar_item(usuario_id, livro_id, quantidade)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 10, in adicionar_item
    item = self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id, livro_id=livro_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 14:56:56,867 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 14:56:56,867 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:00:57,713 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:00:57,713 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:00:57,768 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:00:57,768 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:00:57,768 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:00:57,769 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:00:57,769 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:00:57,769 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:00:57,769 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:00:57,769 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:00:57,769 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:00:57,770 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:00:57,770 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:00:57,770 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:00:57,770 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:00:57,770 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:00:57,771 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:00:57,771 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:00:57,771 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:00:57,771 - Routes - INFO - /livros/                            → GET
2025-08-22 15:00:57,771 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:00:57,771 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:00:57,772 - Routes - INFO - /livros/                            → POST
2025-08-22 15:00:57,772 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:00:57,772 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:00:57,772 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:00:57,772 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:00:57,772 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:00:57,772 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:00:57,773 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:00:57,774 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:00:57,774 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:00:57,774 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:00:57,774 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:00:57,774 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:00:57,775 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:00:57,775 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:00:57,776 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:00:57,776 - Routes - INFO - /                                   → GET
2025-08-22 15:00:57,777 - Routes - INFO - /health                             → GET
2025-08-22 15:00:57,777 - Routes - INFO - /info                               → GET
2025-08-22 15:00:57,777 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:00:57,777 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:01:03,924 - CarrinhoRouter - ERROR - Erro ao adicionar item: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\carrinho_router.py", line 117, in adicionar_item
    resultado = service.adicionar(user.id, livro_id, quantidade)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\carrinho_service.py", line 9, in adicionar
    return self.repo.adicionar_item(usuario_id, livro_id, quantidade)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\carrinho_repository.py", line 10, in adicionar_item
    item = self.db.query(ItemCarrinho).filter_by(usuario_id=usuario_id, livro_id=livro_id).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column itens_carrinho.created_at does not exist
LINE 1: ...antidade AS biblioteca_itens_carrinho_quantidade, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.itens_carrinho.id AS biblioteca_itens_carrinho_id, biblioteca.itens_carrinho.usuario_id AS biblioteca_itens_carrinho_usuario_id, biblioteca.itens_carrinho.livro_id AS biblioteca_itens_carrinho_livro_id, biblioteca.itens_carrinho.quantidade AS biblioteca_itens_carrinho_quantidade, biblioteca.itens_carrinho.created_at AS biblioteca_itens_carrinho_created_at, biblioteca.itens_carrinho.updated_at AS biblioteca_itens_carrinho_updated_at 
FROM biblioteca.itens_carrinho 
WHERE biblioteca.itens_carrinho.usuario_id = %(usuario_id_1)s AND biblioteca.itens_carrinho.livro_id = %(livro_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'usuario_id_1': 1, 'livro_id_1': 4, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 15:02:49,031 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:02:49,031 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:02:53,808 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:02:53,808 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:02:53,863 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:02:53,864 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:02:53,864 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:02:53,864 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:02:53,864 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:02:53,864 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:02:53,864 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:02:53,865 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:02:53,865 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:02:53,865 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:02:53,866 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:02:53,867 - Routes - INFO - /livros/                            → GET
2025-08-22 15:02:53,867 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:02:53,867 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:02:53,867 - Routes - INFO - /livros/                            → POST
2025-08-22 15:02:53,867 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:02:53,867 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:02:53,868 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:02:53,868 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:02:53,868 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:02:53,868 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:02:53,868 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:02:53,868 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:02:53,869 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:02:53,869 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:02:53,869 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:02:53,869 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:02:53,869 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:02:53,870 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:02:53,870 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:02:53,870 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:02:53,870 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:02:53,870 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:02:53,870 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:02:53,871 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:02:53,871 - Routes - INFO - /                                   → GET
2025-08-22 15:02:53,872 - Routes - INFO - /health                             → GET
2025-08-22 15:02:53,872 - Routes - INFO - /info                               → GET
2025-08-22 15:02:53,872 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:02:53,872 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:02:58,820 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 15:03:03,284 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 4
2025-08-22 15:03:04,165 - CarrinhoRouter - INFO - Item removido do carrinho: usuário 1, livro 1
2025-08-22 15:03:14,375 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 11
2025-08-22 15:03:16,420 - PedidoRouter - ERROR - Erro ao finalizar pedido: property 'total' of 'Pedido' object has no setter
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 133, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 27, in finalizar_pedido
    pedido = self.repo.criar_pedido(usuario_id, total)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 42, in criar_pedido
    pedido = Pedido(usuario_id=usuario_id, total=total, status="PENDENTE")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 571, in _initialize_instance
    with util.safe_reraise():
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2176, in _declarative_constructor
    setattr(self, k, kwargs[k])
AttributeError: property 'total' of 'Pedido' object has no setter
2025-08-22 15:08:54,828 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:08:54,828 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:08:56,091 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:08:56,091 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:08:56,146 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:08:56,146 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:08:56,146 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:08:56,146 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:08:56,147 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:08:56,147 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:08:56,147 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:08:56,147 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:08:56,147 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:08:56,147 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:08:56,148 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:08:56,149 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:08:56,149 - Routes - INFO - /livros/                            → GET
2025-08-22 15:08:56,149 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:08:56,149 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:08:56,149 - Routes - INFO - /livros/                            → POST
2025-08-22 15:08:56,149 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:08:56,149 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:08:56,149 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:08:56,150 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:08:56,150 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:08:56,150 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:08:56,151 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:08:56,151 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:08:56,151 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:08:56,151 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:08:56,151 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:08:56,151 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:08:56,151 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:08:56,152 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:08:56,152 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:08:56,152 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:08:56,152 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:08:56,152 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:08:56,152 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:08:56,152 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:08:56,153 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:08:56,154 - Routes - INFO - /                                   → GET
2025-08-22 15:08:56,154 - Routes - INFO - /health                             → GET
2025-08-22 15:08:56,154 - Routes - INFO - /info                               → GET
2025-08-22 15:08:56,154 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:08:56,154 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:08:58,766 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:08:58,767 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:09:03,066 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:09:03,066 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:09:03,109 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:09:03,109 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:09:03,110 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:09:03,110 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:09:03,110 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:09:03,110 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:09:03,110 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:09:03,110 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:09:03,110 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:09:03,110 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:09:03,110 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:09:03,110 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:09:03,110 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:09:03,110 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:09:03,110 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:09:03,112 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:09:03,112 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:09:03,112 - Routes - INFO - /livros/                            → GET
2025-08-22 15:09:03,112 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:09:03,112 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:09:03,112 - Routes - INFO - /livros/                            → POST
2025-08-22 15:09:03,112 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:09:03,112 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:09:03,112 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:09:03,112 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:09:03,112 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:09:03,113 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:09:03,113 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:09:03,113 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:09:03,113 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:09:03,114 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:09:03,114 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:09:03,114 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:09:03,115 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:09:03,115 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:09:03,116 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:09:03,117 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:09:03,117 - Routes - INFO - /                                   → GET
2025-08-22 15:09:03,117 - Routes - INFO - /health                             → GET
2025-08-22 15:09:03,117 - Routes - INFO - /info                               → GET
2025-08-22 15:09:03,117 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:09:03,118 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:09:38,861 - AuthRouter - INFO - Realizando logout...
2025-08-22 15:09:38,861 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 15:09:41,308 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 15:09:41,308 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 15:09:41,333 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 15:09:41,584 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 15:09:41,584 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 15:09:41,584 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 15:09:41,584 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 15:09:48,468 - PedidoRouter - ERROR - Erro ao finalizar pedido: (psycopg2.errors.UndefinedColumn) column "preco_unitario" of relation "itens_pedido" does not exist
LINE 1: ...ca.itens_pedido (pedido_id, livro_id, quantidade, preco_unit...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 1, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 9, 48, 466465), 'updated_at': datetime.datetime(2025, 8, 22, 18, 9, 48, 466465)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "preco_unitario" of relation "itens_pedido" does not exist
LINE 1: ...ca.itens_pedido (pedido_id, livro_id, quantidade, preco_unit...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 133, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 30, in finalizar_pedido
    self.repo.adicionar_item_pedido(
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 56, in adicionar_item_pedido
    self.db.commit()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "preco_unitario" of relation "itens_pedido" does not exist
LINE 1: ...ca.itens_pedido (pedido_id, livro_id, quantidade, preco_unit...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 1, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 9, 48, 466465), 'updated_at': datetime.datetime(2025, 8, 22, 18, 9, 48, 466465)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 15:11:55,919 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:11:55,919 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:12:00,868 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:12:00,869 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:12:00,928 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:12:00,928 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:12:00,928 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:12:00,928 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:12:00,929 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:12:00,929 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:12:00,929 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:12:00,929 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:12:00,930 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:12:00,930 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:12:00,930 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:12:00,930 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:12:00,930 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:12:00,930 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:12:00,930 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:12:00,931 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:12:00,931 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:12:00,931 - Routes - INFO - /livros/                            → GET
2025-08-22 15:12:00,931 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:12:00,931 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:12:00,931 - Routes - INFO - /livros/                            → POST
2025-08-22 15:12:00,931 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:12:00,931 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:12:00,931 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:12:00,931 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:12:00,931 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:12:00,932 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:12:00,932 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:12:00,932 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:12:00,932 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:12:00,932 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:12:00,932 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:12:00,932 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:12:00,932 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:12:00,933 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:12:00,933 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:12:00,933 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:12:00,933 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:12:00,933 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:12:00,933 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:12:00,934 - Routes - INFO - /                                   → GET
2025-08-22 15:12:00,934 - Routes - INFO - /health                             → GET
2025-08-22 15:12:00,934 - Routes - INFO - /info                               → GET
2025-08-22 15:12:00,934 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:12:00,934 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:12:08,040 - PedidoRouter - ERROR - Erro ao finalizar pedido: (psycopg2.errors.UndefinedColumn) column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 2, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 12, 8, 38929), 'updated_at': datetime.datetime(2025, 8, 22, 18, 12, 8, 38929)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 133, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 30, in finalizar_pedido
    self.repo.adicionar_item_pedido(
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 56, in adicionar_item_pedido
    self.db.commit()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 2, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 12, 8, 38929), 'updated_at': datetime.datetime(2025, 8, 22, 18, 12, 8, 38929)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 15:12:12,011 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:12:12,011 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:12:13,483 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:12:13,483 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:12:13,536 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:12:13,536 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:12:13,536 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:12:13,537 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:12:13,537 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:12:13,537 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:12:13,537 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:12:13,537 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:12:13,537 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:12:13,538 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:12:13,538 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:12:13,539 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:12:13,539 - Routes - INFO - /livros/                            → GET
2025-08-22 15:12:13,539 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:12:13,539 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:12:13,539 - Routes - INFO - /livros/                            → POST
2025-08-22 15:12:13,539 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:12:13,539 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:12:13,539 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:12:13,539 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:12:13,539 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:12:13,540 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:12:13,540 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:12:13,540 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:12:13,540 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:12:13,540 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:12:13,540 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:12:13,540 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:12:13,541 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:12:13,541 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:12:13,542 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:12:13,542 - Routes - INFO - /                                   → GET
2025-08-22 15:12:13,542 - Routes - INFO - /health                             → GET
2025-08-22 15:12:13,542 - Routes - INFO - /info                               → GET
2025-08-22 15:12:13,542 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:12:13,542 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:12:15,168 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:12:15,168 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:12:20,016 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:12:20,016 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:12:20,080 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:12:20,080 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:12:20,080 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:12:20,080 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:12:20,080 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:12:20,080 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:12:20,080 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:12:20,080 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:12:20,080 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:12:20,082 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:12:20,082 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:12:20,082 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:12:20,082 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:12:20,082 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:12:20,083 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:12:20,083 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:12:20,083 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:12:20,083 - Routes - INFO - /livros/                            → GET
2025-08-22 15:12:20,083 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:12:20,083 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:12:20,083 - Routes - INFO - /livros/                            → POST
2025-08-22 15:12:20,084 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:12:20,084 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:12:20,084 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:12:20,084 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:12:20,084 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:12:20,084 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:12:20,084 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:12:20,085 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:12:20,086 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:12:20,087 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:12:20,087 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:12:20,087 - Routes - INFO - /                                   → GET
2025-08-22 15:12:20,087 - Routes - INFO - /health                             → GET
2025-08-22 15:12:20,087 - Routes - INFO - /info                               → GET
2025-08-22 15:12:20,087 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:12:20,088 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:12:35,854 - PedidoRouter - ERROR - Erro ao finalizar pedido: (psycopg2.errors.UndefinedColumn) column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 3, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 12, 35, 852010), 'updated_at': datetime.datetime(2025, 8, 22, 18, 12, 35, 852010)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\pedido_router.py", line 133, in finalizar_pedido
    pedido = service.finalizar_pedido(user.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\service\pedido_service.py", line 30, in finalizar_pedido
    self.repo.adicionar_item_pedido(
  File "C:\Projetos\Bibliotec2\app\repositories\pedido_repository.py", line 56, in adicionar_item_pedido
    self.db.commit()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "created_at" of relation "itens_pedido" does not exist
LINE 1: ...(pedido_id, livro_id, quantidade, preco_unitario, created_at...
                                                             ^

[SQL: INSERT INTO biblioteca.itens_pedido (pedido_id, livro_id, quantidade, preco_unitario, created_at, updated_at) VALUES (%(pedido_id)s, %(livro_id)s, %(quantidade)s, %(preco_unitario)s, %(created_at)s, %(updated_at)s) RETURNING biblioteca.itens_pedido.id]
[parameters: {'pedido_id': 3, 'livro_id': 4, 'quantidade': 11, 'preco_unitario': 10.99, 'created_at': datetime.datetime(2025, 8, 22, 18, 12, 35, 852010), 'updated_at': datetime.datetime(2025, 8, 22, 18, 12, 35, 852010)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-22 15:14:15,007 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:14:15,007 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:14:24,052 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:14:24,052 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:14:24,093 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:14:24,094 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:14:24,094 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:14:24,094 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:14:24,094 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:14:24,094 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:14:24,094 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:14:24,094 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:14:24,094 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:14:24,094 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:14:24,094 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:14:24,095 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:14:24,095 - Routes - INFO - /livros/                            → GET
2025-08-22 15:14:24,095 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:14:24,095 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:14:24,095 - Routes - INFO - /livros/                            → POST
2025-08-22 15:14:24,097 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:14:24,097 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:14:24,097 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:14:24,097 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:14:24,097 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:14:24,097 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:14:24,097 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:14:24,098 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:14:24,098 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:14:24,098 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:14:24,098 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:14:24,098 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:14:24,098 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:14:24,099 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:14:24,099 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:14:24,099 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:14:24,099 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:14:24,099 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:14:24,099 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:14:24,099 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:14:24,099 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:14:24,099 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:14:24,100 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:14:24,100 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:14:24,100 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:14:24,100 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:14:24,100 - Routes - INFO - /                                   → GET
2025-08-22 15:14:24,100 - Routes - INFO - /health                             → GET
2025-08-22 15:14:24,100 - Routes - INFO - /info                               → GET
2025-08-22 15:14:24,100 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:14:24,100 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:14:29,303 - PedidoRouter - INFO - Pedido 4 finalizado para usuário 1
2025-08-22 15:22:10,837 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:22:10,838 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 15:22:11,981 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 15:22:11,983 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 15:22:12,031 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 15:22:12,031 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 15:22:12,031 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 15:22:12,031 - Routes - INFO - /auth/login                         → GET
2025-08-22 15:22:12,034 - Routes - INFO - /auth/login                         → POST
2025-08-22 15:22:12,034 - Routes - INFO - /auth/logout                        → GET
2025-08-22 15:22:12,034 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 15:22:12,034 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 15:22:12,034 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 15:22:12,034 - Routes - INFO - /auth/status                        → GET
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 15:22:12,034 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 15:22:12,034 - Routes - INFO - /livros/                            → GET
2025-08-22 15:22:12,037 - Routes - INFO - /livros/listar                      → GET
2025-08-22 15:22:12,037 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 15:22:12,037 - Routes - INFO - /livros/                            → POST
2025-08-22 15:22:12,037 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 15:22:12,037 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 15:22:12,037 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 15:22:12,037 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 15:22:12,038 - Routes - INFO - /livros/status                      → GET
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/                          → GET
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 15:22:12,039 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/                           → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 15:22:12,039 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 15:22:12,039 - Routes - INFO - /                                   → GET
2025-08-22 15:22:12,039 - Routes - INFO - /health                             → GET
2025-08-22 15:22:12,039 - Routes - INFO - /info                               → GET
2025-08-22 15:22:12,041 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 15:22:12,041 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 15:22:35,084 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 15:22:36,555 - PedidoRouter - INFO - Pedido 5 finalizado para usuário 1
2025-08-22 15:23:01,913 - AuthRouter - INFO - Realizando logout...
2025-08-22 15:23:01,914 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 15:23:06,925 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 15:23:06,925 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 15:23:06,939 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 15:23:07,195 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 15:23:07,195 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 15:23:07,196 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 15:23:07,196 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 15:23:28,285 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 5
2025-08-22 15:23:32,183 - PedidoRouter - INFO - Pedido 6 finalizado para usuário 1
2025-08-22 15:59:52,272 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 15:59:52,272 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 17:01:06,805 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:01:06,805 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:01:06,944 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:05:43,593 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:05:43,593 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:05:43,635 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:05:57,830 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:05:57,830 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:05:57,854 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:06:39,758 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:06:39,758 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:06:39,775 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:14:20,214 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:14:20,214 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:14:20,256 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:15:01,561 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:15:01,561 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:15:01,597 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:15:35,400 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:15:35,400 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:15:35,436 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "usuario"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:19:36,677 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:19:36,677 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:19:36,698 - Database - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  password authentication failed for user "biblioteca"

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-22 17:21:06,825 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:21:06,825 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:21:06,874 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 17:21:06,874 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 17:21:06,874 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 17:21:06,874 - Routes - INFO - /auth/login                         → GET
2025-08-22 17:21:06,874 - Routes - INFO - /auth/login                         → POST
2025-08-22 17:21:06,874 - Routes - INFO - /auth/logout                        → GET
2025-08-22 17:21:06,874 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 17:21:06,874 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 17:21:06,880 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 17:21:06,880 - Routes - INFO - /auth/status                        → GET
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 17:21:06,880 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 17:21:06,880 - Routes - INFO - /livros/                            → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/listar                      → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/                            → POST
2025-08-22 17:21:06,880 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 17:21:06,880 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 17:21:06,880 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 17:21:06,880 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 17:21:06,880 - Routes - INFO - /livros/status                      → GET
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/                          → GET
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 17:21:06,880 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 17:21:06,880 - Routes - INFO - /pedidos/                           → GET
2025-08-22 17:21:06,880 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 17:21:06,880 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 17:21:06,880 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 17:21:06,880 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 17:21:06,885 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 17:21:06,885 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 17:21:06,885 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 17:21:06,886 - Routes - INFO - /                                   → GET
2025-08-22 17:21:06,886 - Routes - INFO - /health                             → GET
2025-08-22 17:21:06,886 - Routes - INFO - /info                               → GET
2025-08-22 17:21:06,886 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 17:21:06,886 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 17:21:20,769 - AuthRouter - ERROR - Erro ao carregar página de registro: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 135, in mostrar_formulario_registro
    return render_template_with_user(templates, "cadastro.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\utils\template_utils.py", line 38, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\cadastro.html", line 26, in template
    value="{{ email if email else '' }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-22 17:26:41,447 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-22 17:26:41,447 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-22 17:26:41,498 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-22 17:26:41,712 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-22 17:26:41,712 - AuthRouter - INFO - ID do usuário: 1
2025-08-22 17:26:41,712 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-22 17:26:41,712 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-22 17:27:07,491 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-22 17:27:08,401 - PedidoRouter - INFO - Pedido 7 finalizado para usuário 1
2025-08-22 17:27:33,623 - AuthRouter - INFO - Realizando logout...
2025-08-22 17:27:33,624 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-22 17:27:36,212 - AuthRouter - ERROR - Erro ao carregar página de registro: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\app\routers\auth_router.py", line 135, in mostrar_formulario_registro
    return render_template_with_user(templates, "cadastro.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\app\utils\template_utils.py", line 38, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\cadastro.html", line 26, in template
    value="{{ email if email else '' }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-22 17:31:06,236 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 17:31:06,237 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 17:31:17,127 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:31:17,127 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:31:17,178 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 17:31:17,178 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 17:31:17,178 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 17:31:17,178 - Routes - INFO - /auth/login                         → GET
2025-08-22 17:31:17,178 - Routes - INFO - /auth/login                         → POST
2025-08-22 17:31:17,178 - Routes - INFO - /auth/logout                        → GET
2025-08-22 17:31:17,178 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 17:31:17,178 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 17:31:17,178 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 17:31:17,178 - Routes - INFO - /auth/status                        → GET
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 17:31:17,178 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 17:31:17,178 - Routes - INFO - /livros/                            → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/listar                      → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/                            → POST
2025-08-22 17:31:17,178 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 17:31:17,178 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 17:31:17,178 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 17:31:17,178 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 17:31:17,178 - Routes - INFO - /livros/status                      → GET
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/                          → GET
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 17:31:17,178 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/                           → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 17:31:17,178 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 17:31:17,178 - Routes - INFO - /                                   → GET
2025-08-22 17:31:17,178 - Routes - INFO - /health                             → GET
2025-08-22 17:31:17,178 - Routes - INFO - /info                               → GET
2025-08-22 17:31:17,178 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 17:31:17,178 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 17:43:56,802 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 17:43:56,802 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 17:43:58,241 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:43:58,241 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:43:58,276 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 17:43:58,276 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 17:43:58,276 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 17:43:58,276 - Routes - INFO - /auth/login                         → GET
2025-08-22 17:43:58,276 - Routes - INFO - /auth/login                         → POST
2025-08-22 17:43:58,276 - Routes - INFO - /auth/logout                        → GET
2025-08-22 17:43:58,276 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 17:43:58,276 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 17:43:58,276 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 17:43:58,276 - Routes - INFO - /auth/status                        → GET
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 17:43:58,276 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 17:43:58,276 - Routes - INFO - /livros/                            → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/listar                      → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/                            → POST
2025-08-22 17:43:58,276 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 17:43:58,276 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 17:43:58,276 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 17:43:58,276 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 17:43:58,276 - Routes - INFO - /livros/status                      → GET
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/                          → GET
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 17:43:58,276 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/                           → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 17:43:58,276 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 17:43:58,276 - Routes - INFO - /                                   → GET
2025-08-22 17:43:58,276 - Routes - INFO - /health                             → GET
2025-08-22 17:43:58,276 - Routes - INFO - /info                               → GET
2025-08-22 17:43:58,276 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 17:43:58,276 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 17:45:35,099 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 17:45:35,100 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 17:45:36,225 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:45:36,225 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:45:36,268 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 17:45:36,268 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 17:45:36,268 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 17:45:36,268 - Routes - INFO - /auth/login                         → GET
2025-08-22 17:45:36,268 - Routes - INFO - /auth/login                         → POST
2025-08-22 17:45:36,268 - Routes - INFO - /auth/logout                        → GET
2025-08-22 17:45:36,268 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 17:45:36,268 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 17:45:36,268 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 17:45:36,268 - Routes - INFO - /auth/status                        → GET
2025-08-22 17:45:36,268 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 17:45:36,268 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 17:45:36,268 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 17:45:36,268 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 17:45:36,268 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 17:45:36,272 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 17:45:36,272 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 17:45:36,272 - Routes - INFO - /livros/                            → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/listar                      → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/                            → POST
2025-08-22 17:45:36,272 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 17:45:36,272 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 17:45:36,272 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 17:45:36,272 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 17:45:36,272 - Routes - INFO - /livros/status                      → GET
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/                          → GET
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 17:45:36,272 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/                           → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 17:45:36,272 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 17:45:36,272 - Routes - INFO - /                                   → GET
2025-08-22 17:45:36,277 - Routes - INFO - /health                             → GET
2025-08-22 17:45:36,277 - Routes - INFO - /info                               → GET
2025-08-22 17:45:36,277 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 17:45:36,277 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 17:45:38,882 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 17:45:38,882 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-22 17:45:47,139 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-22 17:45:47,139 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-22 17:45:47,174 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-22 17:45:47,175 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-22 17:45:47,175 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-22 17:45:47,175 - Routes - INFO - /auth/login                         → GET
2025-08-22 17:45:47,175 - Routes - INFO - /auth/login                         → POST
2025-08-22 17:45:47,175 - Routes - INFO - /auth/logout                        → GET
2025-08-22 17:45:47,175 - Routes - INFO - /auth/cadastro                      → GET
2025-08-22 17:45:47,176 - Routes - INFO - /auth/cadastro                      → POST
2025-08-22 17:45:47,176 - Routes - INFO - /auth/perfil                        → GET
2025-08-22 17:45:47,176 - Routes - INFO - /auth/status                        → GET
2025-08-22 17:45:47,176 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-22 17:45:47,176 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-22 17:45:47,176 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-22 17:45:47,176 - Routes - INFO - /usuarios/listar                    → GET
2025-08-22 17:45:47,177 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-22 17:45:47,177 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-22 17:45:47,177 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-22 17:45:47,177 - Routes - INFO - /livros/                            → GET
2025-08-22 17:45:47,177 - Routes - INFO - /livros/listar                      → GET
2025-08-22 17:45:47,177 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-22 17:45:47,177 - Routes - INFO - /livros/                            → POST
2025-08-22 17:45:47,177 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-22 17:45:47,177 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-22 17:45:47,178 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-22 17:45:47,178 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/estatisticas                → GET
2025-08-22 17:45:47,178 - Routes - INFO - /livros/status                      → GET
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/                          → GET
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/itens                     → GET
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/contador                  → GET
2025-08-22 17:45:47,179 - Routes - INFO - /carrinho/status                    → GET
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/                           → GET
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/listar                     → GET
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-22 17:45:47,179 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-22 17:45:47,181 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-22 17:45:47,181 - Routes - INFO - /pedidos/status                     → GET
2025-08-22 17:45:47,181 - Routes - INFO - /                                   → GET
2025-08-22 17:45:47,181 - Routes - INFO - /health                             → GET
2025-08-22 17:45:47,181 - Routes - INFO - /info                               → GET
2025-08-22 17:45:47,181 - Routes - INFO - Total de rotas registradas: 48
2025-08-22 17:45:47,181 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-22 17:48:11,797 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-22 17:48:11,798 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 10:58:26,186 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 10:58:26,187 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 10:58:26,187 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 10:58:26,187 - Routes - INFO -  1. /                                   → GET
2025-08-25 10:58:26,187 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 10:58:26,187 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 10:58:26,187 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 10:58:26,187 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 10:58:26,187 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 10:58:26,187 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 10:58:26,187 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 10:58:26,187 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 10:58:26,187 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 10:58:26,187 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 10:58:26,187 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 10:58:26,187 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 10:58:26,187 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 10:58:26,187 - Routes - INFO - 17. /health                             → GET
2025-08-25 10:58:26,187 - Routes - INFO - 18. /info                               → GET
2025-08-25 10:58:26,187 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 10:58:26,187 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 10:58:26,187 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 10:58:26,187 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 10:58:26,187 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 10:58:26,187 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 10:58:26,187 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 10:58:26,187 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 10:58:26,187 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 10:58:26,187 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 10:58:26,187 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 10:58:26,187 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 10:58:26,187 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 10:58:26,187 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 10:58:26,187 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 10:58:26,190 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 10:58:26,190 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 10:58:26,190 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 10:58:26,190 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 10:58:26,190 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 10:58:26,190 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 10:58:26,190 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 10:58:26,190 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 10:58:26,190 - Routes - INFO - ================================
2025-08-25 10:58:28,893 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 10:58:28,893 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 10:58:28,996 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 10:58:28,996 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 10:58:28,996 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 10:58:28,996 - Routes - INFO - /auth/login                         → GET
2025-08-25 10:58:28,996 - Routes - INFO - /auth/login                         → POST
2025-08-25 10:58:28,996 - Routes - INFO - /auth/logout                        → GET
2025-08-25 10:58:28,996 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 10:58:28,996 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 10:58:28,996 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 10:58:28,996 - Routes - INFO - /auth/status                        → GET
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 10:58:28,996 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 10:58:28,996 - Routes - INFO - /livros/                            → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/listar                      → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/                            → POST
2025-08-25 10:58:28,996 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 10:58:28,996 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 10:58:28,996 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 10:58:28,996 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 10:58:28,996 - Routes - INFO - /livros/status                      → GET
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/                          → GET
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 10:58:29,006 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/                           → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 10:58:29,006 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 10:58:29,006 - Routes - INFO - /                                   → GET
2025-08-25 10:58:29,006 - Routes - INFO - /health                             → GET
2025-08-25 10:58:29,006 - Routes - INFO - /info                               → GET
2025-08-25 10:58:29,006 - Routes - INFO - Total de rotas registradas: 48
2025-08-25 10:58:29,006 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 10:58:59,380 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 10:58:59,380 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 10:58:59,457 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 10:58:59,714 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 10:58:59,717 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 10:58:59,717 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 10:58:59,717 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 10:59:25,732 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-25 10:59:26,968 - PedidoRouter - INFO - Pedido 8 finalizado para usuário 1
2025-08-25 10:59:46,194 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 10:59:46,195 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 12:28:44,050 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 12:28:44,050 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 12:28:44,050 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 12:28:44,051 - Routes - INFO -  1. /                                   → GET
2025-08-25 12:28:44,051 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 12:28:44,051 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 12:28:44,051 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 12:28:44,051 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 12:28:44,051 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 12:28:44,051 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 12:28:44,052 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 12:28:44,052 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:28:44,052 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 12:28:44,052 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 12:28:44,052 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 12:28:44,052 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:28:44,052 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 12:28:44,052 - Routes - INFO - 17. /health                             → GET
2025-08-25 12:28:44,052 - Routes - INFO - 18. /info                               → GET
2025-08-25 12:28:44,052 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 12:28:44,052 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 12:28:44,052 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 12:28:44,052 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 12:28:44,052 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 12:28:44,052 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 12:28:44,052 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 12:28:44,052 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 12:28:44,053 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 12:28:44,053 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 12:28:44,053 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 12:28:44,053 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 12:28:44,053 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 12:28:44,053 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 12:28:44,053 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 12:28:44,054 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:28:44,054 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 12:28:44,054 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 12:28:44,054 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:28:44,054 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 12:28:44,054 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 12:28:44,054 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 12:28:44,054 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 12:28:44,054 - Routes - INFO - ================================
2025-08-25 12:28:46,114 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 12:28:46,114 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 12:28:46,163 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 12:28:46,163 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 12:28:46,163 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 12:28:46,163 - Routes - INFO - /auth/login                         → GET
2025-08-25 12:28:46,163 - Routes - INFO - /auth/login                         → POST
2025-08-25 12:28:46,163 - Routes - INFO - /auth/logout                        → GET
2025-08-25 12:28:46,163 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 12:28:46,163 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 12:28:46,163 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 12:28:46,163 - Routes - INFO - /auth/status                        → GET
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 12:28:46,163 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/                            → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/listar                      → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/                            → POST
2025-08-25 12:28:46,163 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 12:28:46,163 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 12:28:46,163 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 12:28:46,163 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 12:28:46,163 - Routes - INFO - /livros/status                      → GET
2025-08-25 12:28:46,163 - Routes - INFO - /carrinho/                          → GET
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 12:28:46,167 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/                           → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:28:46,167 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 12:28:46,167 - Routes - INFO - /                                   → GET
2025-08-25 12:28:46,167 - Routes - INFO - /health                             → GET
2025-08-25 12:28:46,167 - Routes - INFO - /info                               → GET
2025-08-25 12:28:46,167 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 12:28:46,167 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 12:29:21,272 - LivroRouter - ERROR - Erro ao carregar página de livros: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'EnderecoUsuario'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 26, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 10, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\livro_repository.py", line 10, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:29:31,026 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 12:29:31,026 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 12:29:31,027 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:29:31,029 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:29:56,204 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 12:29:56,204 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 12:32:12,560 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 12:32:12,561 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 12:32:12,561 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 12:32:12,561 - Routes - INFO -  1. /                                   → GET
2025-08-25 12:32:12,561 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 12:32:12,561 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 12:32:12,561 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 12:32:12,561 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 12:32:12,561 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 12:32:12,561 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 12:32:12,562 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 12:32:12,562 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:32:12,562 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 12:32:12,562 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 12:32:12,562 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 12:32:12,562 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:32:12,562 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 12:32:12,562 - Routes - INFO - 17. /health                             → GET
2025-08-25 12:32:12,562 - Routes - INFO - 18. /info                               → GET
2025-08-25 12:32:12,562 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 12:32:12,562 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 12:32:12,562 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 12:32:12,562 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 12:32:12,562 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 12:32:12,562 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 12:32:12,562 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 12:32:12,562 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 12:32:12,562 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 12:32:12,562 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 12:32:12,562 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 12:32:12,562 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 12:32:12,562 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 12:32:12,562 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 12:32:12,562 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 12:32:12,562 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:32:12,563 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 12:32:12,563 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 12:32:12,563 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:32:12,563 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 12:32:12,563 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 12:32:12,563 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 12:32:12,564 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 12:32:12,564 - Routes - INFO - ================================
2025-08-25 12:32:14,738 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 12:32:14,738 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 12:32:14,778 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 12:32:14,778 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 12:32:14,779 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 12:32:14,779 - Routes - INFO - /auth/login                         → GET
2025-08-25 12:32:14,779 - Routes - INFO - /auth/login                         → POST
2025-08-25 12:32:14,779 - Routes - INFO - /auth/logout                        → GET
2025-08-25 12:32:14,779 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 12:32:14,779 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 12:32:14,779 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 12:32:14,779 - Routes - INFO - /auth/status                        → GET
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 12:32:14,779 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 12:32:14,781 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/                            → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/listar                      → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/                            → POST
2025-08-25 12:32:14,781 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 12:32:14,781 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 12:32:14,781 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 12:32:14,781 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 12:32:14,781 - Routes - INFO - /livros/status                      → GET
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/                          → GET
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 12:32:14,782 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/                           → GET
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 12:32:14,782 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:32:14,783 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 12:32:14,783 - Routes - INFO - /                                   → GET
2025-08-25 12:32:14,783 - Routes - INFO - /health                             → GET
2025-08-25 12:32:14,783 - Routes - INFO - /info                               → GET
2025-08-25 12:32:14,783 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 12:32:14,783 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 12:32:33,421 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 12:32:33,421 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 12:32:33,423 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'EnderecoUsuario'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:32:33,438 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:59:26,379 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 12:59:26,379 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 12:59:26,379 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 12:59:26,379 - Routes - INFO -  1. /                                   → GET
2025-08-25 12:59:26,379 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 12:59:26,379 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 12:59:26,379 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 12:59:26,379 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 12:59:26,379 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 12:59:26,379 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 12:59:26,381 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 12:59:26,381 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:59:26,381 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 12:59:26,381 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 12:59:26,381 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 12:59:26,381 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:59:26,381 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 12:59:26,382 - Routes - INFO - 17. /health                             → GET
2025-08-25 12:59:26,382 - Routes - INFO - 18. /info                               → GET
2025-08-25 12:59:26,382 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 12:59:26,382 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 12:59:26,382 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 12:59:26,382 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 12:59:26,382 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 12:59:26,382 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 12:59:26,382 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 12:59:26,382 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 12:59:26,382 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 12:59:26,382 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 12:59:26,382 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 12:59:26,382 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 12:59:26,382 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 12:59:26,382 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 12:59:26,382 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 12:59:26,382 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:59:26,382 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 12:59:26,382 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 12:59:26,382 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:59:26,382 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 12:59:26,382 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 12:59:26,382 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 12:59:26,382 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 12:59:26,382 - Routes - INFO - ================================
2025-08-25 12:59:28,403 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 12:59:28,403 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 12:59:28,452 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 12:59:28,452 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 12:59:28,452 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 12:59:28,452 - Routes - INFO - /auth/login                         → GET
2025-08-25 12:59:28,452 - Routes - INFO - /auth/login                         → POST
2025-08-25 12:59:28,452 - Routes - INFO - /auth/logout                        → GET
2025-08-25 12:59:28,452 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 12:59:28,452 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 12:59:28,452 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 12:59:28,452 - Routes - INFO - /auth/status                        → GET
2025-08-25 12:59:28,452 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 12:59:28,452 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 12:59:28,455 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/                            → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/listar                      → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/                            → POST
2025-08-25 12:59:28,455 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 12:59:28,455 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 12:59:28,455 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 12:59:28,455 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 12:59:28,455 - Routes - INFO - /livros/status                      → GET
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/                          → GET
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 12:59:28,455 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 12:59:28,455 - Routes - INFO - /pedidos/                           → GET
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 12:59:28,457 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 12:59:28,457 - Routes - INFO - /                                   → GET
2025-08-25 12:59:28,457 - Routes - INFO - /health                             → GET
2025-08-25 12:59:28,457 - Routes - INFO - /info                               → GET
2025-08-25 12:59:28,457 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 12:59:28,457 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 12:59:45,232 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 12:59:45,233 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 12:59:45,234 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'EnderecoUsuario'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 12:59:45,249 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'EnderecoUsuario' failed to locate a name ('EnderecoUsuario'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:23,689 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:04:23,689 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:04:23,689 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:04:23,689 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:04:23,689 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:04:23,689 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:04:23,689 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:04:23,689 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:04:23,689 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:04:23,689 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:04:23,689 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:04:23,689 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:04:23,689 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:04:23,689 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:04:23,689 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:04:23,689 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:04:23,689 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:04:23,689 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:04:23,689 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:04:23,689 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:04:23,689 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:04:23,689 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:04:23,689 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:04:23,689 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:04:23,689 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:04:23,689 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:04:23,689 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:04:23,689 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:04:23,689 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:04:23,689 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:04:23,689 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:04:23,689 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:04:23,689 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:04:23,689 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:04:23,689 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:04:23,689 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:04:23,689 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:04:23,689 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:04:23,689 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:04:23,689 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:04:23,689 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:04:23,689 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:04:23,689 - Routes - INFO - ================================
2025-08-25 13:04:25,556 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:04:25,556 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:04:25,612 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:04:25,612 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:04:25,612 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:04:25,612 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:04:25,612 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:04:25,612 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:04:25,612 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:04:25,612 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:04:25,612 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:04:25,612 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:04:25,612 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:04:25,612 - Routes - INFO - /livros/                            → GET
2025-08-25 13:04:25,612 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:04:25,612 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/                            → POST
2025-08-25 13:04:25,616 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:04:25,616 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:04:25,616 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:04:25,616 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:04:25,616 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:04:25,616 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:04:25,616 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:04:25,616 - Routes - INFO - /                                   → GET
2025-08-25 13:04:25,616 - Routes - INFO - /health                             → GET
2025-08-25 13:04:25,616 - Routes - INFO - /info                               → GET
2025-08-25 13:04:25,618 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:04:25,618 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:04:43,212 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:04:43,212 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:04:43,218 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'CartaoCredito'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:43,230 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:46,707 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:04:46,707 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:04:46,707 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:46,710 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:55,909 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:04:55,909 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:04:55,910 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:04:55,912 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'CartaoCredito' failed to locate a name ('CartaoCredito'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:05:48,298 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:05:48,298 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 13:08:08,543 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:08:08,543 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:08:08,543 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:08:08,543 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:08:08,545 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:08:08,545 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:08:08,545 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:08:08,545 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:08:08,545 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:08:08,545 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:08:08,545 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:08:08,545 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:08:08,545 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:08:08,545 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:08:08,545 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:08:08,545 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:08:08,545 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:08:08,545 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:08:08,545 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:08:08,545 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:08:08,545 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:08:08,545 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:08:08,545 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:08:08,545 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:08:08,545 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:08:08,545 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:08:08,545 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:08:08,545 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:08:08,545 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:08:08,545 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:08:08,545 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:08:08,545 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:08:08,545 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:08:08,545 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:08:08,545 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:08:08,548 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:08:08,548 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:08:08,548 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:08:08,548 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:08:08,548 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:08:08,548 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:08:08,548 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:08:08,548 - Routes - INFO - ================================
2025-08-25 13:08:10,561 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:08:10,561 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:08:10,613 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:08:10,613 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:08:10,613 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:08:10,613 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:08:10,613 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:08:10,613 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:08:10,613 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:08:10,613 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:08:10,613 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:08:10,613 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:08:10,613 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/                            → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/                            → POST
2025-08-25 13:08:10,613 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:08:10,613 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:08:10,613 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:08:10,613 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:08:10,613 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:08:10,613 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:08:10,613 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:08:10,613 - Routes - INFO - /                                   → GET
2025-08-25 13:08:10,613 - Routes - INFO - /health                             → GET
2025-08-25 13:08:10,613 - Routes - INFO - /info                               → GET
2025-08-25 13:08:10,613 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:08:10,613 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:08:16,284 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:08:16,284 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:08:16,289 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'ConfirmacaoEmail'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:08:16,298 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:10:20,154 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:10:20,154 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:10:20,155 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:10:20,155 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:10:20,155 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:10:20,155 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:10:20,155 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:10:20,155 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:10:20,155 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:10:20,155 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:10:20,155 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:10:20,155 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:10:20,155 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:10:20,155 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:10:20,155 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:10:20,156 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:10:20,156 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:10:20,156 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:10:20,156 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:10:20,156 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:10:20,156 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:10:20,156 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:10:20,156 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:10:20,156 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:10:20,156 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:10:20,156 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:10:20,156 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:10:20,156 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:10:20,156 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:10:20,156 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:10:20,156 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:10:20,156 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:10:20,157 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:10:20,157 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:10:20,157 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:10:20,157 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:10:20,157 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:10:20,157 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:10:20,157 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:10:20,157 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:10:20,157 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:10:20,157 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:10:20,157 - Routes - INFO - ================================
2025-08-25 13:10:22,131 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:10:22,131 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:10:22,173 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:10:22,173 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:10:22,173 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:10:22,173 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:10:22,173 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:10:22,173 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:10:22,173 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:10:22,173 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:10:22,173 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:10:22,173 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:10:22,173 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/                            → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/                            → POST
2025-08-25 13:10:22,173 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:10:22,173 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:10:22,173 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:10:22,173 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:10:22,173 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:10:22,173 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:10:22,173 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:10:22,173 - Routes - INFO - /                                   → GET
2025-08-25 13:10:22,173 - Routes - INFO - /health                             → GET
2025-08-25 13:10:22,173 - Routes - INFO - /info                               → GET
2025-08-25 13:10:22,173 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:10:22,173 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:10:26,480 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:10:26,480 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:10:26,490 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'ConfirmacaoEmail'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:10:26,499 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:10:33,470 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:10:33,470 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:10:33,471 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:10:33,474 - AuthRouter - ERROR - Erro: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Usuario(usuarios)]'. Original exception was: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:14:12,271 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:15:47,504 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:15:47,504 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:15:47,504 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:15:47,504 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:15:47,504 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:15:47,504 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:15:47,504 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:15:47,504 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:15:47,504 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:15:47,504 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:15:47,504 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:15:47,504 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:15:47,504 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:15:47,504 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:15:47,504 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:15:47,504 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:15:47,504 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:15:47,504 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:15:47,504 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:15:47,504 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:15:47,504 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:15:47,504 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:15:47,504 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:15:47,506 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:15:47,506 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:15:47,506 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:15:47,506 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:15:47,506 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:15:47,506 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:15:47,506 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:15:47,506 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:15:47,506 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:15:47,506 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:15:47,506 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:15:47,506 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:15:47,506 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:15:47,506 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:15:47,506 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:15:47,506 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:15:47,506 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:15:47,506 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:15:47,506 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:15:47,506 - Routes - INFO - ================================
2025-08-25 13:15:49,469 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:15:49,469 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:15:49,504 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:15:49,504 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:15:49,504 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:15:49,504 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:15:49,504 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:15:49,504 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:15:49,504 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:15:49,504 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:15:49,504 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:15:49,504 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:15:49,504 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/                            → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/                            → POST
2025-08-25 13:15:49,504 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:15:49,504 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:15:49,504 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:15:49,504 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:15:49,504 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:15:49,504 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:15:49,510 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:15:49,510 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:15:49,510 - Routes - INFO - /                                   → GET
2025-08-25 13:15:49,510 - Routes - INFO - /health                             → GET
2025-08-25 13:15:49,510 - Routes - INFO - /info                               → GET
2025-08-25 13:15:49,510 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:15:49,510 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:16:50,248 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:16:50,248 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:16:50,260 - AuthRouter - ERROR - ❌ ERRO NO LOGIN:
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'ConfirmacaoEmail'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 60, in realizar_login
    usuario = auth_service.autenticar_usuario(username, password)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 36, in autenticar_usuario
    usuario = self.usuario_repo.buscar_por_email(email)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\usuario_repository.py", line 11, in buscar_por_email
    return self.db.query(Usuario).filter(Usuario.email == email).first()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 288, in _set_entities
    self._raw_columns = [
                        ^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in <listcomp>
    coercions.expect(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:16:50,269 - AuthRouter - ERROR - Erro: When initializing mapper Mapper[Usuario(usuarios)], expression 'ConfirmacaoEmail' failed to locate a name ('ConfirmacaoEmail'). If this is a class name, consider adding this relationship() to the <class 'app.domain.models.usuario.usuario.Usuario'> class after both dependent classes have been defined.
2025-08-25 13:17:10,220 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:17:10,220 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 13:19:21,636 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:19:21,636 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:19:21,636 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:19:21,636 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:19:21,636 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:19:21,636 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:19:21,636 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:19:21,636 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:19:21,636 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:19:21,636 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:19:21,636 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:19:21,636 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:19:21,636 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:19:21,636 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:19:21,636 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:19:21,636 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:19:21,636 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:19:21,636 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:19:21,645 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:19:21,645 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:19:21,645 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:19:21,645 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:19:21,645 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:19:21,645 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:19:21,645 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:19:21,645 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:19:21,645 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:19:21,645 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:19:21,645 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:19:21,645 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:19:21,645 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:19:21,645 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:19:21,646 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:19:21,646 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:19:21,646 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:19:21,646 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:19:21,646 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:19:21,646 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:19:21,646 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:19:21,646 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:19:21,646 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:19:21,646 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:19:21,646 - Routes - INFO - ================================
2025-08-25 13:19:23,545 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:19:23,545 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:19:23,609 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:19:23,609 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:19:23,609 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:19:23,609 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:19:23,609 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:19:23,609 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:19:23,609 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:19:23,609 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:19:23,609 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:19:23,609 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:19:23,609 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/                            → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/                            → POST
2025-08-25 13:19:23,609 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:19:23,609 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:19:23,609 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:19:23,609 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:19:23,609 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:19:23,609 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:19:23,609 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:19:23,609 - Routes - INFO - /                                   → GET
2025-08-25 13:19:23,609 - Routes - INFO - /health                             → GET
2025-08-25 13:19:23,609 - Routes - INFO - /info                               → GET
2025-08-25 13:19:23,609 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:19:23,609 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:19:40,361 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:19:40,361 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:19:40,422 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 13:19:40,657 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 13:19:40,657 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 13:19:40,657 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 13:19:40,657 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 13:19:46,411 - AuthRouter - INFO - Realizando logout...
2025-08-25 13:19:46,412 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 13:19:50,881 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:19:50,881 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:19:51,117 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 13:19:51,117 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 13:19:51,117 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 13:19:51,117 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 13:19:54,045 - BibliotecaApp - ERROR - Erro interno do servidor: 'Usuario' object has no attribute 'is_active'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 36, in get_current_user
    |     if not usuario.is_active:
    |            ^^^^^^^^^^^^^^^^^
    | AttributeError: 'Usuario' object has no attribute 'is_active'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 36, in get_current_user
    if not usuario.is_active:
           ^^^^^^^^^^^^^^^^^
AttributeError: 'Usuario' object has no attribute 'is_active'
2025-08-25 13:33:23,925 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:33:23,925 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 13:33:28,005 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:33:28,005 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:33:28,005 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:33:28,005 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:33:28,005 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:33:28,005 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:33:28,007 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:33:28,007 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:33:28,007 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:33:28,007 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:33:28,007 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:33:28,007 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:33:28,007 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:33:28,007 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:33:28,007 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:33:28,007 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:33:28,007 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:33:28,007 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:33:28,007 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:33:28,007 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:33:28,007 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:33:28,007 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:33:28,007 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:33:28,007 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:33:28,007 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:33:28,007 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:33:28,007 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:33:28,007 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:33:28,007 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:33:28,007 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:33:28,007 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:33:28,007 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:33:28,007 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:33:28,007 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:33:28,007 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:33:28,009 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:33:28,009 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:33:28,009 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:33:28,009 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:33:28,009 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:33:28,009 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:33:28,009 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:33:28,009 - Routes - INFO - ================================
2025-08-25 13:33:30,059 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:33:30,059 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:33:30,106 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:33:30,106 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:33:30,106 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:33:30,106 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:33:30,106 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:33:30,106 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:33:30,106 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:33:30,106 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:33:30,106 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:33:30,106 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:33:30,106 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:33:30,106 - Routes - INFO - /livros/                            → GET
2025-08-25 13:33:30,106 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:33:30,106 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:33:30,106 - Routes - INFO - /livros/                            → POST
2025-08-25 13:33:30,110 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:33:30,110 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:33:30,110 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:33:30,110 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:33:30,110 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:33:30,110 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:33:30,110 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:33:30,110 - Routes - INFO - /                                   → GET
2025-08-25 13:33:30,110 - Routes - INFO - /health                             → GET
2025-08-25 13:33:30,110 - Routes - INFO - /info                               → GET
2025-08-25 13:33:30,110 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:33:30,112 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:33:38,614 - AuthRouter - INFO - Realizando logout...
2025-08-25 13:33:38,615 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 13:33:40,925 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:33:40,925 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:33:40,934 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 13:33:41,196 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 13:33:41,196 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 13:33:41,196 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 13:33:41,196 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 13:33:43,329 - BibliotecaApp - ERROR - Erro interno do servidor: 'Usuario' object has no attribute 'is_active'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 36, in get_current_user
    |     if not usuario.is_active:
    |            ^^^^^^^^^^^^^^^^^
    | AttributeError: 'Usuario' object has no attribute 'is_active'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 36, in get_current_user
    if not usuario.is_active:
           ^^^^^^^^^^^^^^^^^
AttributeError: 'Usuario' object has no attribute 'is_active'
2025-08-25 13:35:51,731 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:35:51,731 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 13:35:56,701 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:35:56,701 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:35:56,701 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:35:56,705 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:35:56,705 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:35:56,705 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:35:56,705 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:35:56,705 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:35:56,705 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:35:56,705 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:35:56,705 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:35:56,705 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:35:56,705 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:35:56,705 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:35:56,705 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:35:56,705 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:35:56,705 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:35:56,705 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:35:56,705 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:35:56,705 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:35:56,705 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:35:56,705 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:35:56,705 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:35:56,705 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:35:56,705 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:35:56,705 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:35:56,705 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:35:56,705 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:35:56,705 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:35:56,705 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:35:56,705 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:35:56,705 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:35:56,708 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:35:56,708 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:35:56,708 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:35:56,708 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:35:56,708 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:35:56,708 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:35:56,708 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:35:56,708 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:35:56,708 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:35:56,708 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:35:56,708 - Routes - INFO - ================================
2025-08-25 13:35:58,615 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:35:58,617 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:35:58,662 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:35:58,662 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:35:58,662 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:35:58,662 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:35:58,662 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:35:58,662 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:35:58,662 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:35:58,662 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:35:58,663 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:35:58,663 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:35:58,663 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/                            → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/                            → POST
2025-08-25 13:35:58,663 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:35:58,663 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:35:58,663 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:35:58,663 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:35:58,663 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:35:58,664 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:35:58,664 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:35:58,664 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:35:58,664 - Routes - INFO - /                                   → GET
2025-08-25 13:35:58,664 - Routes - INFO - /health                             → GET
2025-08-25 13:35:58,664 - Routes - INFO - /info                               → GET
2025-08-25 13:35:58,664 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:35:58,664 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:36:41,956 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-25 13:36:44,909 - PedidoRouter - INFO - Pedido 9 finalizado para usuário 1
2025-08-25 13:37:13,809 - AuthRouter - INFO - Realizando logout...
2025-08-25 13:37:13,809 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 13:47:10,010 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:47:10,010 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:47:10,010 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:47:10,010 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:47:10,010 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:47:10,010 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:47:10,010 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:47:10,010 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:47:10,010 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:47:10,010 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:47:10,010 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:47:10,010 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:47:10,010 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:47:10,010 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:47:10,010 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:47:10,010 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:47:10,010 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:47:10,010 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:47:10,010 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:47:10,012 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:47:10,012 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:47:10,012 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:47:10,012 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:47:10,012 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:47:10,012 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:47:10,012 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:47:10,012 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:47:10,012 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:47:10,013 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:47:10,013 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:47:10,013 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:47:10,013 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:47:10,013 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:47:10,014 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:47:10,014 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:47:10,014 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:47:10,014 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:47:10,014 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:47:10,014 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:47:10,014 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:47:10,014 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:47:10,014 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:47:10,014 - Routes - INFO - ================================
2025-08-25 13:47:12,015 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:47:12,015 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:47:12,054 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:47:12,054 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:47:12,054 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:47:12,054 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:47:12,054 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:47:12,054 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:47:12,054 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:47:12,054 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:47:12,054 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:47:12,054 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:47:12,054 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:47:12,063 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:47:12,063 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/                            → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/                            → POST
2025-08-25 13:47:12,063 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:47:12,063 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:47:12,063 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:47:12,063 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:47:12,063 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:47:12,064 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:47:12,064 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:47:12,064 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:47:12,064 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:47:12,064 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:47:12,064 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:47:12,064 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:47:12,064 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:47:12,065 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:47:12,065 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:47:12,065 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:47:12,065 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:47:12,065 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:47:12,065 - Routes - INFO - /                                   → GET
2025-08-25 13:47:12,065 - Routes - INFO - /health                             → GET
2025-08-25 13:47:12,065 - Routes - INFO - /info                               → GET
2025-08-25 13:47:12,065 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:47:12,065 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:47:24,168 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:47:24,168 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:47:24,234 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 13:47:24,493 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 13:47:24,494 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 13:47:24,494 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 13:47:24,494 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 13:47:33,998 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-25 13:47:35,614 - PedidoRouter - INFO - Pedido 10 finalizado para usuário 1
2025-08-25 13:47:40,541 - CarrinhoRouter - INFO - Item adicionado ao carrinho: usuário 1, livro 4, qtd 1
2025-08-25 13:47:42,673 - PedidoRouter - INFO - Pedido 11 finalizado para usuário 1
2025-08-25 13:48:53,694 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:48:53,694 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:48:53,694 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:48:53,694 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:48:53,694 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:48:53,694 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:48:53,694 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:48:53,694 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:48:53,694 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:48:53,694 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:48:53,695 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:48:53,695 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:48:53,695 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:48:53,695 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:48:53,695 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:48:53,695 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:48:53,695 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:48:53,695 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:48:53,695 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:48:53,695 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:48:53,695 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:48:53,695 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:48:53,695 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:48:53,695 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:48:53,696 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:48:53,696 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:48:53,696 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:48:53,696 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:48:53,696 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:48:53,696 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:48:53,696 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:48:53,696 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:48:53,696 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:48:53,696 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:48:53,696 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:48:53,696 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:48:53,696 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:48:53,697 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:48:53,697 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:48:53,697 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:48:53,697 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:48:53,697 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:48:53,697 - Routes - INFO - ================================
2025-08-25 13:48:55,900 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:48:55,901 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:48:55,956 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:48:55,956 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:48:55,956 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:48:55,956 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:48:55,956 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:48:55,956 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:48:55,956 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:48:55,956 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:48:55,956 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:48:55,956 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:48:55,956 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/                            → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/                            → POST
2025-08-25 13:48:55,956 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:48:55,956 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:48:55,956 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:48:55,956 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:48:55,956 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:48:55,956 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:48:55,956 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:48:55,956 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:48:55,956 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:48:55,956 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:48:55,961 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:48:55,962 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:48:55,962 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:48:55,963 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:48:55,963 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:48:55,963 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:48:55,963 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:48:55,964 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:48:55,964 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:48:55,964 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:48:55,964 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:48:55,965 - Routes - INFO - /                                   → GET
2025-08-25 13:48:55,965 - Routes - INFO - /health                             → GET
2025-08-25 13:48:55,965 - Routes - INFO - /info                               → GET
2025-08-25 13:48:55,965 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:48:55,966 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:50:36,358 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 13:50:36,359 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 13:50:39,677 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:50:39,677 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:50:39,677 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:50:39,677 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:50:39,677 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:50:39,677 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:50:39,677 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:50:39,677 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:50:39,677 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:50:39,677 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:50:39,677 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:50:39,677 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:50:39,677 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:50:39,677 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:50:39,677 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:50:39,677 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:50:39,677 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:50:39,677 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:50:39,677 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:50:39,677 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:50:39,677 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:50:39,677 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:50:39,677 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:50:39,677 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:50:39,677 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:50:39,677 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:50:39,677 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:50:39,677 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:50:39,677 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:50:39,677 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:50:39,677 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:50:39,677 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:50:39,677 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:50:39,677 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:50:39,677 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:50:39,677 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:50:39,677 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:50:39,677 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:50:39,677 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:50:39,677 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:50:39,677 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:50:39,677 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:50:39,677 - Routes - INFO - ================================
2025-08-25 13:50:41,840 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:50:41,841 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:50:41,885 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:50:41,885 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:50:41,885 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:50:41,885 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:50:41,885 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:50:41,885 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:50:41,885 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:50:41,885 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:50:41,885 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:50:41,885 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:50:41,885 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/                            → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/                            → POST
2025-08-25 13:50:41,885 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:50:41,885 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:50:41,885 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:50:41,885 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:50:41,885 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:50:41,885 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:50:41,885 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:50:41,891 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:50:41,891 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:50:41,891 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:50:41,891 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:50:41,891 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:50:41,892 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:50:41,892 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:50:41,893 - Routes - INFO - /                                   → GET
2025-08-25 13:50:41,893 - Routes - INFO - /health                             → GET
2025-08-25 13:50:41,893 - Routes - INFO - /info                               → GET
2025-08-25 13:50:41,893 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:50:41,893 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:52:04,106 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 13:52:04,106 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 13:52:04,106 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 13:52:04,106 - Routes - INFO -  1. /                                   → GET
2025-08-25 13:52:04,106 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 13:52:04,106 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 13:52:04,107 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 13:52:04,107 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 13:52:04,107 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 13:52:04,107 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 13:52:04,107 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 13:52:04,107 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:52:04,107 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 13:52:04,108 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 13:52:04,108 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 13:52:04,108 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:52:04,108 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 13:52:04,108 - Routes - INFO - 17. /health                             → GET
2025-08-25 13:52:04,108 - Routes - INFO - 18. /info                               → GET
2025-08-25 13:52:04,108 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 13:52:04,108 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 13:52:04,108 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 13:52:04,108 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 13:52:04,108 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 13:52:04,108 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 13:52:04,108 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 13:52:04,108 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 13:52:04,108 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 13:52:04,108 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 13:52:04,108 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 13:52:04,108 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 13:52:04,108 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 13:52:04,108 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 13:52:04,108 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 13:52:04,108 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:52:04,108 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 13:52:04,108 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 13:52:04,108 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:52:04,108 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 13:52:04,110 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 13:52:04,110 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 13:52:04,110 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 13:52:04,110 - Routes - INFO - ================================
2025-08-25 13:52:06,371 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 13:52:06,371 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 13:52:06,431 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 13:52:06,431 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 13:52:06,431 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 13:52:06,431 - Routes - INFO - /auth/login                         → GET
2025-08-25 13:52:06,432 - Routes - INFO - /auth/login                         → POST
2025-08-25 13:52:06,432 - Routes - INFO - /auth/logout                        → GET
2025-08-25 13:52:06,432 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 13:52:06,432 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 13:52:06,432 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 13:52:06,432 - Routes - INFO - /auth/status                        → GET
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 13:52:06,432 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/                            → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/listar                      → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/                            → POST
2025-08-25 13:52:06,433 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 13:52:06,433 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 13:52:06,433 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 13:52:06,433 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 13:52:06,433 - Routes - INFO - /livros/status                      → GET
2025-08-25 13:52:06,433 - Routes - INFO - /carrinho/                          → GET
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 13:52:06,434 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/                           → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 13:52:06,434 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 13:52:06,434 - Routes - INFO - /                                   → GET
2025-08-25 13:52:06,434 - Routes - INFO - /health                             → GET
2025-08-25 13:52:06,434 - Routes - INFO - /info                               → GET
2025-08-25 13:52:06,434 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 13:52:06,434 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 13:52:20,991 - AuthRouter - INFO - Realizando logout...
2025-08-25 13:52:20,992 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 13:52:28,142 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 13:52:28,142 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 13:52:28,157 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 13:52:28,406 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 13:52:28,406 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 13:52:28,406 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 13:52:28,406 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 14:06:09,979 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:06:09,980 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:06:09,980 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:06:09,980 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:06:09,980 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:06:09,980 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:06:09,980 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:06:09,981 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:06:09,981 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:06:09,981 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:06:09,981 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:06:09,981 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:06:09,981 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:06:09,981 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:06:09,981 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:06:09,981 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:06:09,981 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:06:09,981 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:06:09,981 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:06:09,981 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:06:09,981 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:06:09,981 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:06:09,982 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:06:09,982 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:06:09,982 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:06:09,982 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:06:09,982 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:06:09,982 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:06:09,982 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:06:09,982 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:06:09,982 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:06:09,982 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:06:09,982 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:06:09,982 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:06:09,982 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:06:09,982 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:06:09,983 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:06:09,983 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:06:09,983 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:06:09,983 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:06:09,983 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:06:09,983 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:06:09,983 - Routes - INFO - ================================
2025-08-25 14:06:12,230 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:06:12,230 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:06:12,282 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:06:12,284 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:06:12,285 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:06:12,285 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:06:12,285 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:06:12,285 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:06:12,285 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:06:12,285 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:06:12,285 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:06:12,285 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:06:12,285 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:06:12,285 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:06:12,285 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:06:12,286 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:06:12,286 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:06:12,286 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:06:12,286 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:06:12,286 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:06:12,286 - Routes - INFO - /livros/                            → GET
2025-08-25 14:06:12,286 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:06:12,286 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:06:12,286 - Routes - INFO - /livros/                            → POST
2025-08-25 14:06:12,286 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:06:12,286 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:06:12,287 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:06:12,287 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:06:12,287 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:06:12,287 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:06:12,288 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:06:12,288 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:06:12,288 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:06:12,289 - Routes - INFO - /                                   → GET
2025-08-25 14:06:12,289 - Routes - INFO - /health                             → GET
2025-08-25 14:06:12,289 - Routes - INFO - /info                               → GET
2025-08-25 14:06:12,289 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:06:12,289 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:06:30,469 - PedidoRouter - ERROR - Erro ao carregar página de pedidos: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\pedido_router.py", line 28, in pagina_pedidos
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\pedido.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 62, in top-level template code
    {% block content %}
  File "app\templates\pedido.html", line 15, in block 'content'
    <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
2025-08-25 14:12:15,138 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:12:15,138 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:12:15,138 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:12:15,139 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:12:15,139 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:12:15,139 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:12:15,139 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:12:15,139 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:12:15,139 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:12:15,139 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:12:15,139 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:12:15,139 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:12:15,139 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:12:15,139 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:12:15,139 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:12:15,139 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:12:15,139 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:12:15,139 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:12:15,139 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:12:15,139 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:12:15,139 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:12:15,139 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:12:15,139 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:12:15,139 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:12:15,141 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:12:15,141 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:12:15,141 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:12:15,141 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:12:15,141 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:12:15,141 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:12:15,141 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:12:15,141 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:12:15,141 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:12:15,141 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:12:15,141 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:12:15,141 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:12:15,141 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:12:15,141 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:12:15,141 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:12:15,142 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:12:15,142 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:12:15,142 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:12:15,142 - Routes - INFO - ================================
2025-08-25 14:12:17,055 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:12:17,055 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:12:17,114 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:12:17,114 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:12:17,114 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:12:17,114 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:12:17,114 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:12:17,114 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:12:17,114 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:12:17,114 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:12:17,114 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:12:17,114 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:12:17,114 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:12:17,115 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:12:17,115 - Routes - INFO - /livros/                            → GET
2025-08-25 14:12:17,115 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:12:17,115 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:12:17,115 - Routes - INFO - /livros/                            → POST
2025-08-25 14:12:17,115 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:12:17,115 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:12:17,115 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:12:17,116 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:12:17,116 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:12:17,116 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:12:17,117 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:12:17,117 - Routes - INFO - /                                   → GET
2025-08-25 14:12:17,117 - Routes - INFO - /health                             → GET
2025-08-25 14:12:17,117 - Routes - INFO - /info                               → GET
2025-08-25 14:12:17,117 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:12:17,117 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:14:05,830 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:14:05,830 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:14:05,830 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:14:05,830 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:14:05,830 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:14:05,830 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:14:05,830 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:14:05,830 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:14:05,830 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:14:05,830 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:14:05,830 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:14:05,830 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:14:05,830 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:14:05,830 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:14:05,830 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:14:05,830 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:14:05,830 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:14:05,830 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:14:05,830 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:14:05,830 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:14:05,830 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:14:05,830 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:14:05,830 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:14:05,830 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:14:05,830 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:14:05,830 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:14:05,830 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:14:05,830 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:14:05,830 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:14:05,830 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:14:05,830 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:14:05,830 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:14:05,830 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:14:05,830 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:14:05,830 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:14:05,830 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:14:05,830 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:14:05,830 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:14:05,830 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:14:05,830 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:14:05,830 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:14:05,830 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:14:05,830 - Routes - INFO - ================================
2025-08-25 14:14:08,225 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:14:08,225 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:14:08,279 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:14:08,280 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:14:08,280 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:14:08,280 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:14:08,280 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:14:08,280 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:14:08,280 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:14:08,280 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:14:08,280 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:14:08,280 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:14:08,280 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/                            → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/                            → POST
2025-08-25 14:14:08,282 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:14:08,282 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:14:08,282 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:14:08,282 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:14:08,282 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:14:08,283 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:14:08,283 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:14:08,284 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:14:08,284 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:14:08,284 - Routes - INFO - /                                   → GET
2025-08-25 14:14:08,284 - Routes - INFO - /health                             → GET
2025-08-25 14:14:08,284 - Routes - INFO - /info                               → GET
2025-08-25 14:14:08,284 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:14:08,284 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:14:13,776 - AuthRouter - INFO - Realizando logout...
2025-08-25 14:14:13,776 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 14:14:16,599 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 14:14:16,599 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 14:14:16,624 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 14:14:16,880 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 14:14:16,880 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 14:14:16,880 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 14:14:16,880 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 14:14:49,175 - LivroRouter - ERROR - Erro ao obter livro 1: 'LivroService' object has no attribute 'obter_livro'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 80, in obter_livro
    livro = service.obter_livro(livro_id)
            ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LivroService' object has no attribute 'obter_livro'
2025-08-25 14:16:24,322 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 14:16:24,322 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 14:16:27,697 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:16:27,697 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:16:27,697 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:16:27,697 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:16:27,697 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:16:27,697 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:16:27,697 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:16:27,697 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:16:27,697 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:16:27,697 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:16:27,697 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:16:27,697 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:16:27,697 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:16:27,697 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:16:27,697 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:16:27,697 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:16:27,697 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:16:27,697 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:16:27,697 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:16:27,697 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:16:27,697 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:16:27,697 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:16:27,697 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:16:27,697 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:16:27,697 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:16:27,697 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:16:27,697 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:16:27,697 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:16:27,697 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:16:27,697 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:16:27,697 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:16:27,697 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:16:27,697 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:16:27,697 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:16:27,697 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:16:27,697 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:16:27,697 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:16:27,697 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:16:27,697 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:16:27,697 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:16:27,697 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:16:27,697 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:16:27,697 - Routes - INFO - ================================
2025-08-25 14:16:29,686 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:16:29,696 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:16:29,734 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:16:29,734 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:16:29,734 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:16:29,734 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:16:29,734 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:16:29,734 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:16:29,734 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:16:29,734 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:16:29,734 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:16:29,734 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:16:29,737 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/                            → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/                            → POST
2025-08-25 14:16:29,737 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:16:29,737 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:16:29,737 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:16:29,737 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:16:29,737 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:16:29,737 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:16:29,737 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:16:29,737 - Routes - INFO - /                                   → GET
2025-08-25 14:16:29,737 - Routes - INFO - /health                             → GET
2025-08-25 14:16:29,737 - Routes - INFO - /info                               → GET
2025-08-25 14:16:29,737 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:16:29,737 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:16:34,509 - AuthRouter - INFO - Realizando logout...
2025-08-25 14:16:34,509 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 14:16:36,832 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 14:16:36,832 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 14:16:36,883 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 14:16:37,103 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 14:16:37,103 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 14:16:37,104 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 14:16:37,104 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 14:18:57,627 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:18:57,627 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:18:57,627 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:18:57,627 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:18:57,627 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:18:57,627 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:18:57,627 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:18:57,627 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:18:57,627 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:18:57,627 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:18:57,627 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:18:57,627 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:18:57,627 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:18:57,627 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:18:57,627 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:18:57,627 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:18:57,627 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:18:57,627 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:18:57,627 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:18:57,627 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:18:57,627 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:18:57,627 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:18:57,627 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:18:57,627 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:18:57,627 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:18:57,627 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:18:57,627 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:18:57,627 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:18:57,627 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:18:57,627 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:18:57,627 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:18:57,627 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:18:57,627 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:18:57,627 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:18:57,627 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:18:57,627 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:18:57,627 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:18:57,627 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:18:57,627 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:18:57,627 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:18:57,627 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:18:57,627 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:18:57,627 - Routes - INFO - ================================
2025-08-25 14:18:59,569 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:18:59,569 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:18:59,600 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:18:59,600 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:18:59,600 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:18:59,600 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:18:59,600 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:18:59,600 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:18:59,600 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:18:59,600 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:18:59,600 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:18:59,600 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:18:59,600 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/                            → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/                            → POST
2025-08-25 14:18:59,600 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:18:59,600 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:18:59,600 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:18:59,600 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:18:59,600 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:18:59,600 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:18:59,611 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:18:59,611 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:18:59,611 - Routes - INFO - /                                   → GET
2025-08-25 14:18:59,611 - Routes - INFO - /health                             → GET
2025-08-25 14:18:59,611 - Routes - INFO - /info                               → GET
2025-08-25 14:18:59,611 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:18:59,611 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:20:33,559 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:20:33,559 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:20:33,559 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:20:33,559 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:20:33,559 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:20:33,559 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:20:33,559 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:20:33,559 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:20:33,559 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:20:33,559 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:20:33,561 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:20:33,561 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:20:33,561 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:20:33,561 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:20:33,561 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:20:33,561 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:20:33,561 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:20:33,561 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:20:33,561 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:20:33,561 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:20:33,561 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:20:33,561 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:20:33,561 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:20:33,562 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:20:33,562 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:20:33,562 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:20:33,562 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:20:33,562 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:20:33,562 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:20:33,562 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:20:33,562 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:20:33,562 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:20:33,562 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:20:33,562 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:20:33,562 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:20:33,562 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:20:33,562 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:20:33,562 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:20:33,562 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:20:33,562 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:20:33,562 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:20:33,562 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:20:33,562 - Routes - INFO - ================================
2025-08-25 14:20:35,714 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:20:35,716 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:20:35,770 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:20:35,770 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:20:35,770 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:20:35,770 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:20:35,770 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:20:35,770 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:20:35,770 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:20:35,770 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:20:35,770 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:20:35,770 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:20:35,770 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:20:35,770 - Routes - INFO - /livros/                            → GET
2025-08-25 14:20:35,770 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:20:35,770 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/                            → POST
2025-08-25 14:20:35,773 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:20:35,773 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:20:35,773 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:20:35,773 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:20:35,773 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:20:35,773 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:20:35,773 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:20:35,773 - Routes - INFO - /                                   → GET
2025-08-25 14:20:35,773 - Routes - INFO - /health                             → GET
2025-08-25 14:20:35,773 - Routes - INFO - /info                               → GET
2025-08-25 14:20:35,775 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:20:35,775 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:20:42,823 - BibliotecaApp - ERROR - Erro interno do servidor: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 62, in top-level template code
    |     {% block content %}
    |   File "app\templates\perfil.html", line 50, in block 'content'
    |     <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    |     return getattr(obj, attribute)
    |            ^^^^^^^^^^^^^^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 62, in top-level template code
    {% block content %}
  File "app\templates\perfil.html", line 50, in block 'content'
    <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
2025-08-25 14:20:59,954 - BibliotecaApp - ERROR - Erro interno do servidor: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 62, in top-level template code
    |     {% block content %}
    |   File "app\templates\perfil.html", line 50, in block 'content'
    |     <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    |     return getattr(obj, attribute)
    |            ^^^^^^^^^^^^^^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 62, in top-level template code
    {% block content %}
  File "app\templates\perfil.html", line 50, in block 'content'
    <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
2025-08-25 14:21:07,740 - AuthRouter - INFO - === INÍCIO DO LOGIN ===
2025-08-25 14:21:07,740 - AuthRouter - INFO - Email recebido: thalessilva92@gmail.com
2025-08-25 14:21:07,758 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 14:21:08,016 - AuthRouter - INFO - ✅ Usuário autenticado: thalessilva92@gmail.com
2025-08-25 14:21:08,016 - AuthRouter - INFO - ID do usuário: 1
2025-08-25 14:21:08,016 - AuthRouter - INFO - 🍪 Cookie definido com user_id: 1
2025-08-25 14:21:08,016 - AuthRouter - INFO - === LOGIN CONCLUÍDO ===
2025-08-25 14:21:09,859 - BibliotecaApp - ERROR - Erro interno do servidor: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 62, in top-level template code
    |     {% block content %}
    |   File "app\templates\perfil.html", line 50, in block 'content'
    |     <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    |     return getattr(obj, attribute)
    |            ^^^^^^^^^^^^^^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 197, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 62, in top-level template code
    {% block content %}
  File "app\templates\perfil.html", line 50, in block 'content'
    <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
2025-08-25 14:35:16,934 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:35:16,934 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:35:16,934 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:35:16,934 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:35:16,934 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:35:16,935 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:35:16,935 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:35:16,935 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:35:16,935 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:35:16,935 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:35:16,935 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:35:16,935 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:35:16,935 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:35:16,935 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:35:16,935 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:35:16,935 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:35:16,935 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:35:16,935 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:35:16,935 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:35:16,935 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:35:16,935 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:35:16,935 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:35:16,935 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:35:16,935 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:35:16,935 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:35:16,935 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:35:16,935 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:35:16,935 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:35:16,935 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:35:16,935 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:35:16,935 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:35:16,935 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:35:16,935 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:35:16,935 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:35:16,935 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:35:16,935 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:35:16,935 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:35:16,935 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:35:16,935 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:35:16,935 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:35:16,935 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:35:16,935 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:35:16,935 - Routes - INFO - ================================
2025-08-25 14:35:19,078 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:35:19,078 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:35:19,116 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:35:19,118 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:35:19,118 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:35:19,118 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:35:19,118 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:35:19,118 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:35:19,118 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:35:19,118 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:35:19,118 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:35:19,118 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:35:19,118 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:35:19,118 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:35:19,118 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:35:19,118 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:35:19,119 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:35:19,119 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:35:19,119 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:35:19,119 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/                            → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/                            → POST
2025-08-25 14:35:19,119 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:35:19,119 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:35:19,119 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:35:19,119 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:35:19,119 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:35:19,119 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:35:19,119 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:35:19,119 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:35:19,120 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:35:19,120 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:35:19,120 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:35:19,120 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:35:19,120 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:35:19,120 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:35:19,120 - Routes - INFO - /                                   → GET
2025-08-25 14:35:19,120 - Routes - INFO - /health                             → GET
2025-08-25 14:35:19,121 - Routes - INFO - /info                               → GET
2025-08-25 14:35:19,121 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:35:19,121 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:35:34,575 - BibliotecaApp - ERROR - Erro interno do servidor: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 201, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 62, in top-level template code
    |     {% block content %}
    |   File "app\templates\perfil.html", line 50, in block 'content'
    |     <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    |     return getattr(obj, attribute)
    |            ^^^^^^^^^^^^^^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 201, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 62, in top-level template code
    {% block content %}
  File "app\templates\perfil.html", line 50, in block 'content'
    <span class="text-gray-500">{{ pedido.data.strftime('%d/%m/%Y') }}</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'app.domain.models.vendas.pedidos.Pedido object' has no attribute 'data'
2025-08-25 14:35:50,441 - CarrinhoRouter - ERROR - Erro ao carregar página do carrinho: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 26, in pagina_carrinho
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 24, in template
    R$ {{ (item.livro.preco * item.quantidade) | moeda }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-25 14:42:14,535 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:42:14,535 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:42:14,535 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:42:14,535 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:42:14,535 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:42:14,535 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:42:14,535 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:42:14,535 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:42:14,535 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:42:14,535 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:42:14,535 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:42:14,535 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:42:14,535 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:42:14,535 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:42:14,535 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:42:14,535 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:42:14,535 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:42:14,535 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:42:14,535 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:42:14,535 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:42:14,535 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:42:14,535 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:42:14,535 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:42:14,535 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:42:14,541 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:42:14,541 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:42:14,541 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:42:14,541 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:42:14,541 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:42:14,541 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:42:14,541 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:42:14,541 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:42:14,541 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:42:14,541 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:42:14,541 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:42:14,541 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:42:14,541 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:42:14,541 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:42:14,541 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:42:14,541 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:42:14,541 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:42:14,541 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:42:14,541 - Routes - INFO - ================================
2025-08-25 14:42:16,635 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:42:16,635 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:42:16,691 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:42:16,691 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:42:16,691 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:42:16,691 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:42:16,691 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:42:16,691 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:42:16,692 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:42:16,692 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:42:16,692 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:42:16,692 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:42:16,692 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:42:16,692 - Routes - INFO - /livros/                            → GET
2025-08-25 14:42:16,692 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:42:16,692 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:42:16,692 - Routes - INFO - /livros/                            → POST
2025-08-25 14:42:16,693 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:42:16,693 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:42:16,693 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:42:16,693 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:42:16,693 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:42:16,693 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:42:16,693 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:42:16,693 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:42:16,693 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:42:16,694 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:42:16,694 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:42:16,694 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:42:16,694 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:42:16,694 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:42:16,694 - Routes - INFO - /                                   → GET
2025-08-25 14:42:16,694 - Routes - INFO - /health                             → GET
2025-08-25 14:42:16,694 - Routes - INFO - /info                               → GET
2025-08-25 14:42:16,695 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:42:16,695 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:42:42,399 - BibliotecaApp - ERROR - Erro interno do servidor: No filter named 'moeda'.
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 201, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    |     template = self.get_template(name)
    |                ^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    |     return self.env.get_template(name)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    |     return self._load_template(name, globals)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    |     template = self.loader.load(self, name, self.make_globals(globals))
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    |     code = environment.compile(source, name, filename)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    |     self.handle_exception(source=source_hint)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 47, in template
    |     <p class="font-bold text-blue-600 mb-2">Total: {{ pedido.total | moeda }}</p>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    | jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 201, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 89, in perfil_usuario
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 47, in template
    <p class="font-bold text-blue-600 mb-2">Total: {{ pedido.total | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-25 14:42:58,380 - CarrinhoRouter - ERROR - Erro ao carregar página do carrinho: No filter named 'moeda_sem_simbolo'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 26, in pagina_carrinho
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 23, in template
    <p class="text-blue-600 font-bold mt-1">R$ {{ (item.livro.preco * item.quantidade) | moeda_sem_simbolo }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda_sem_simbolo'.
2025-08-25 14:55:26,477 - BibliotecaApp - INFO - Nível de log alterado para: DEBUG
2025-08-25 14:55:26,477 - BibliotecaApp - INFO - 🚀 Iniciando servidor de desenvolvimento...
2025-08-25 14:55:26,477 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 14:55:26,477 - Routes - INFO -  1. /                                   → GET
2025-08-25 14:55:26,477 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 14:55:26,477 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 14:55:26,477 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 14:55:26,477 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 14:55:26,477 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 14:55:26,477 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 14:55:26,477 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 14:55:26,477 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:55:26,477 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 14:55:26,477 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 14:55:26,477 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 14:55:26,477 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:55:26,477 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 14:55:26,477 - Routes - INFO - 17. /health                             → GET
2025-08-25 14:55:26,477 - Routes - INFO - 18. /info                               → GET
2025-08-25 14:55:26,477 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 14:55:26,477 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 14:55:26,477 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 14:55:26,477 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 14:55:26,477 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 14:55:26,477 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 14:55:26,477 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 14:55:26,485 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 14:55:26,485 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 14:55:26,485 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 14:55:26,485 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 14:55:26,485 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 14:55:26,485 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 14:55:26,485 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 14:55:26,485 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 14:55:26,485 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:55:26,485 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 14:55:26,485 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 14:55:26,485 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:55:26,485 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 14:55:26,485 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 14:55:26,485 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 14:55:26,485 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 14:55:26,485 - Routes - INFO - ================================
2025-08-25 14:55:28,509 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 14:55:28,509 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 14:55:28,552 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 14:55:28,552 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 14:55:28,552 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 14:55:28,552 - Routes - INFO - /auth/login                         → GET
2025-08-25 14:55:28,552 - Routes - INFO - /auth/login                         → POST
2025-08-25 14:55:28,552 - Routes - INFO - /auth/logout                        → GET
2025-08-25 14:55:28,552 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 14:55:28,552 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 14:55:28,552 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 14:55:28,552 - Routes - INFO - /auth/status                        → GET
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:55:28,552 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 14:55:28,555 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 14:55:28,555 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/                            → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/listar                      → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/                            → POST
2025-08-25 14:55:28,555 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 14:55:28,555 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 14:55:28,555 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 14:55:28,555 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 14:55:28,555 - Routes - INFO - /livros/status                      → GET
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/                          → GET
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 14:55:28,555 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 14:55:28,555 - Routes - INFO - /pedidos/                           → GET
2025-08-25 14:55:28,555 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 14:55:28,555 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 14:55:28,555 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 14:55:28,555 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 14:55:28,557 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 14:55:28,557 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 14:55:28,557 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 14:55:28,557 - Routes - INFO - /                                   → GET
2025-08-25 14:55:28,557 - Routes - INFO - /health                             → GET
2025-08-25 14:55:28,557 - Routes - INFO - /info                               → GET
2025-08-25 14:55:28,557 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 14:55:28,557 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 14:55:35,729 - AuthRouter - INFO - Realizando logout...
2025-08-25 14:55:35,729 - AuthRouter - INFO - ✅ Logout realizado com sucesso
2025-08-25 15:01:43,334 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:01:43,334 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:01:43,334 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:01:43,334 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:01:43,334 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:01:43,334 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 15:01:43,334 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 15:01:43,334 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 15:01:43,334 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 15:01:43,334 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:01:43,334 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 15:01:43,334 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 15:01:43,334 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 15:01:43,334 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:01:43,334 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 15:01:43,334 - Routes - INFO - 17. /health                             → GET
2025-08-25 15:01:43,334 - Routes - INFO - 18. /info                               → GET
2025-08-25 15:01:43,334 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 15:01:43,334 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:01:43,334 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 15:01:43,334 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 15:01:43,334 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 15:01:43,334 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 15:01:43,334 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 15:01:43,334 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 15:01:43,334 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 15:01:43,334 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 15:01:43,334 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:01:43,334 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 15:01:43,334 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:01:43,334 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 15:01:43,334 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 15:01:43,334 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:01:43,334 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 15:01:43,334 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 15:01:43,334 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:01:43,334 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 15:01:43,334 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 15:01:43,334 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 15:01:43,334 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:01:43,334 - Routes - INFO - ================================
2025-08-25 15:01:45,601 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:01:45,601 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:01:45,663 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:01:45,663 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:01:45,663 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:01:45,663 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:01:45,663 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:01:45,663 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:01:45,663 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:01:45,663 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:01:45,663 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 15:01:45,663 - Routes - INFO - /auth/status                        → GET
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:01:45,663 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/                            → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/                            → POST
2025-08-25 15:01:45,663 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:01:45,663 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:01:45,663 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:01:45,663 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:01:45,663 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:01:45,663 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:01:45,663 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:01:45,663 - Routes - INFO - /                                   → GET
2025-08-25 15:01:45,663 - Routes - INFO - /health                             → GET
2025-08-25 15:01:45,663 - Routes - INFO - /info                               → GET
2025-08-25 15:01:45,663 - Routes - INFO - Total de rotas registradas: 49
2025-08-25 15:01:45,663 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:13:28,278 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:13:28,278 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:13:28,278 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:13:28,278 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:13:28,278 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:13:28,278 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 15:13:28,278 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 15:13:28,278 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 15:13:28,278 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 15:13:28,278 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:13:28,278 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 15:13:28,278 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 15:13:28,278 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 15:13:28,278 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:13:28,278 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 15:13:28,278 - Routes - INFO - 17. /health                             → GET
2025-08-25 15:13:28,278 - Routes - INFO - 18. /info                               → GET
2025-08-25 15:13:28,278 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 15:13:28,285 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:13:28,285 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 15:13:28,285 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 15:13:28,285 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 15:13:28,285 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 15:13:28,285 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 15:13:28,285 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 15:13:28,285 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 15:13:28,285 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 15:13:28,285 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:13:28,285 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 15:13:28,285 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:13:28,285 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 15:13:28,285 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 15:13:28,285 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:13:28,285 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 15:13:28,285 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 15:13:28,285 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:13:28,285 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 15:13:28,285 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 15:13:28,285 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 15:13:28,285 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:13:28,285 - Routes - INFO - ================================
2025-08-25 15:13:30,585 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:13:30,586 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:13:30,633 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:13:30,633 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:13:30,633 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:13:30,633 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:13:30,633 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:13:30,633 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:13:30,633 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:13:30,633 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:13:30,635 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 15:13:30,635 - Routes - INFO - /auth/status                        → GET
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:13:30,635 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:13:30,635 - Routes - INFO - /livros/                            → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/                            → POST
2025-08-25 15:13:30,636 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:13:30,636 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:13:30,636 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:13:30,636 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:13:30,636 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:13:30,636 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:13:30,637 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:13:30,637 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:13:30,638 - Routes - INFO - /                                   → GET
2025-08-25 15:13:30,638 - Routes - INFO - /health                             → GET
2025-08-25 15:13:30,638 - Routes - INFO - /info                               → GET
2025-08-25 15:13:30,638 - Routes - INFO - Total de rotas registradas: 48
2025-08-25 15:13:30,638 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:23:02,626 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 15:23:02,626 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 15:23:38,057 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:23:38,057 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:23:38,057 - Routes - INFO -  2. /auth/auth/cadastro                 → GET, POST
2025-08-25 15:23:38,057 - Routes - INFO -  3. /auth/auth/login                    → GET, POST
2025-08-25 15:23:38,057 - Routes - INFO -  4. /auth/auth/logout                   → GET
2025-08-25 15:23:38,057 - Routes - INFO -  5. /auth/auth/perfil                   → GET
2025-08-25 15:23:38,057 - Routes - INFO -  6. /auth/auth/status                   → GET
2025-08-25 15:23:38,057 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 15:23:38,057 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 15:23:38,057 - Routes - INFO -  9. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:23:38,057 - Routes - INFO - 10. /carrinho/contador                  → GET
2025-08-25 15:23:38,057 - Routes - INFO - 11. /carrinho/itens                     → GET
2025-08-25 15:23:38,057 - Routes - INFO - 12. /carrinho/limpar                    → DELETE
2025-08-25 15:23:38,057 - Routes - INFO - 13. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:23:38,057 - Routes - INFO - 14. /carrinho/status                    → GET
2025-08-25 15:23:38,057 - Routes - INFO - 17. /health                             → GET
2025-08-25 15:23:38,057 - Routes - INFO - 18. /info                               → GET
2025-08-25 15:23:38,057 - Routes - INFO - 19. /livros/                            → GET, POST
2025-08-25 15:23:38,057 - Routes - INFO - 20. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:23:38,057 - Routes - INFO - 21. /livros/buscar/autor                → GET
2025-08-25 15:23:38,057 - Routes - INFO - 22. /livros/buscar/estoque              → GET
2025-08-25 15:23:38,057 - Routes - INFO - 23. /livros/buscar/preco                → GET
2025-08-25 15:23:38,057 - Routes - INFO - 24. /livros/buscar/titulo               → GET
2025-08-25 15:23:38,057 - Routes - INFO - 25. /livros/cadastrar-form              → POST
2025-08-25 15:23:38,057 - Routes - INFO - 26. /livros/estatisticas                → GET
2025-08-25 15:23:38,057 - Routes - INFO - 27. /livros/listar                      → GET
2025-08-25 15:23:38,057 - Routes - INFO - 28. /livros/status                      → GET
2025-08-25 15:23:38,057 - Routes - INFO - 29. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:23:38,057 - Routes - INFO - 31. /pedidos/                           → GET
2025-08-25 15:23:38,057 - Routes - INFO - 32. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:23:38,057 - Routes - INFO - 33. /pedidos/finalizar                  → POST
2025-08-25 15:23:38,057 - Routes - INFO - 34. /pedidos/listar                     → GET
2025-08-25 15:23:38,057 - Routes - INFO - 35. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:23:38,057 - Routes - INFO - 36. /pedidos/status                     → GET
2025-08-25 15:23:38,057 - Routes - INFO - 37. /pedidos/{pedido_id}                → GET
2025-08-25 15:23:38,057 - Routes - INFO - 38. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:23:38,057 - Routes - INFO - 40. /usuarios/cadastrar                 → POST
2025-08-25 15:23:38,057 - Routes - INFO - 41. /usuarios/cadastro                  → GET, POST
2025-08-25 15:23:38,057 - Routes - INFO - 42. /usuarios/listar                    → GET
2025-08-25 15:23:38,057 - Routes - INFO - 43. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:23:38,057 - Routes - INFO - ================================
2025-08-25 15:23:39,960 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:23:39,961 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:23:40,007 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:23:40,007 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:23:40,007 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/login                    → GET
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/login                    → POST
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/logout                   → GET
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/cadastro                 → GET
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/cadastro                 → POST
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/perfil                   → GET
2025-08-25 15:23:40,007 - Routes - INFO - /auth/auth/status                   → GET
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:23:40,007 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:23:40,007 - Routes - INFO - /livros/                            → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/                            → POST
2025-08-25 15:23:40,007 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:23:40,007 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:23:40,007 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:23:40,007 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:23:40,007 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:23:40,007 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:23:40,007 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:23:40,007 - Routes - INFO - /                                   → GET
2025-08-25 15:23:40,007 - Routes - INFO - /health                             → GET
2025-08-25 15:23:40,007 - Routes - INFO - /info                               → GET
2025-08-25 15:23:40,007 - Routes - INFO - Total de rotas registradas: 48
2025-08-25 15:23:40,007 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:26:12,615 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 15:26:12,615 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 15:26:15,087 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:26:15,087 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:26:15,128 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:26:15,128 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:26:15,128 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:26:15,128 - Routes - INFO - /auth/auth/login                    → GET
2025-08-25 15:26:15,128 - Routes - INFO - /auth/auth/login                    → POST
2025-08-25 15:26:15,128 - Routes - INFO - /auth/auth/logout                   → GET
2025-08-25 15:26:15,128 - Routes - INFO - /auth/auth/cadastro                 → GET
2025-08-25 15:26:15,129 - Routes - INFO - /auth/auth/cadastro                 → POST
2025-08-25 15:26:15,129 - Routes - INFO - /auth/auth/perfil                   → GET
2025-08-25 15:26:15,129 - Routes - INFO - /auth/auth/status                   → GET
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/cadastro                  → GET
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/cadastro                  → POST
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:26:15,129 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:26:15,129 - Routes - INFO - /livros/                            → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/                            → POST
2025-08-25 15:26:15,129 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:26:15,129 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:26:15,129 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:26:15,129 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:26:15,129 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:26:15,130 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:26:15,130 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:26:15,130 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:26:15,130 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:26:15,130 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:26:15,130 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:26:15,130 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:26:15,130 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:26:15,131 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:26:15,131 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:26:15,131 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:26:15,131 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:26:15,131 - Routes - INFO - /                                   → GET
2025-08-25 15:26:15,131 - Routes - INFO - /health                             → GET
2025-08-25 15:26:15,131 - Routes - INFO - /info                               → GET
2025-08-25 15:26:15,131 - Routes - INFO - Total de rotas registradas: 48
2025-08-25 15:26:15,131 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:33:07,295 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:33:07,295 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:33:07,295 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:33:07,295 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:33:07,295 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:33:07,295 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 15:33:07,295 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 15:33:07,295 - Routes - INFO -  7. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:33:07,295 - Routes - INFO -  8. /carrinho/contador                  → GET
2025-08-25 15:33:07,295 - Routes - INFO -  9. /carrinho/itens                     → GET
2025-08-25 15:33:07,295 - Routes - INFO - 10. /carrinho/limpar                    → DELETE
2025-08-25 15:33:07,295 - Routes - INFO - 11. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:33:07,295 - Routes - INFO - 12. /carrinho/status                    → GET
2025-08-25 15:33:07,295 - Routes - INFO - 15. /health                             → GET
2025-08-25 15:33:07,295 - Routes - INFO - 16. /info                               → GET
2025-08-25 15:33:07,295 - Routes - INFO - 17. /livros/                            → GET, POST
2025-08-25 15:33:07,295 - Routes - INFO - 18. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:33:07,295 - Routes - INFO - 19. /livros/buscar/autor                → GET
2025-08-25 15:33:07,295 - Routes - INFO - 20. /livros/buscar/estoque              → GET
2025-08-25 15:33:07,295 - Routes - INFO - 21. /livros/buscar/preco                → GET
2025-08-25 15:33:07,295 - Routes - INFO - 22. /livros/buscar/titulo               → GET
2025-08-25 15:33:07,295 - Routes - INFO - 23. /livros/cadastrar-form              → POST
2025-08-25 15:33:07,295 - Routes - INFO - 24. /livros/estatisticas                → GET
2025-08-25 15:33:07,295 - Routes - INFO - 25. /livros/listar                      → GET
2025-08-25 15:33:07,295 - Routes - INFO - 26. /livros/status                      → GET
2025-08-25 15:33:07,295 - Routes - INFO - 27. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:33:07,295 - Routes - INFO - 29. /pedidos/                           → GET
2025-08-25 15:33:07,295 - Routes - INFO - 30. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:33:07,295 - Routes - INFO - 31. /pedidos/finalizar                  → POST
2025-08-25 15:33:07,295 - Routes - INFO - 32. /pedidos/listar                     → GET
2025-08-25 15:33:07,295 - Routes - INFO - 33. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:33:07,295 - Routes - INFO - 34. /pedidos/status                     → GET
2025-08-25 15:33:07,295 - Routes - INFO - 35. /pedidos/{pedido_id}                → GET
2025-08-25 15:33:07,295 - Routes - INFO - 36. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:33:07,295 - Routes - INFO - 38. /usuarios/cadastrar                 → POST
2025-08-25 15:33:07,295 - Routes - INFO - 39. /usuarios/listar                    → GET
2025-08-25 15:33:07,295 - Routes - INFO - 40. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:33:07,295 - Routes - INFO - ================================
2025-08-25 15:33:09,164 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:33:09,164 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:33:09,213 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:33:09,213 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:33:09,213 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:33:09,213 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:33:09,213 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:33:09,213 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:33:09,213 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:33:09,213 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:33:09,213 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:33:09,213 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:33:09,213 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:33:09,213 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:33:09,213 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:33:09,213 - Routes - INFO - /livros/                            → GET
2025-08-25 15:33:09,213 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:33:09,213 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:33:09,213 - Routes - INFO - /livros/                            → POST
2025-08-25 15:33:09,213 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:33:09,215 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:33:09,215 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:33:09,215 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:33:09,215 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:33:09,215 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:33:09,216 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:33:09,216 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:33:09,216 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:33:09,216 - Routes - INFO - /                                   → GET
2025-08-25 15:33:09,216 - Routes - INFO - /health                             → GET
2025-08-25 15:33:09,216 - Routes - INFO - /info                               → GET
2025-08-25 15:33:09,216 - Routes - INFO - Total de rotas registradas: 44
2025-08-25 15:33:09,216 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:33:27,190 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 15:36:47,631 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:36:47,631 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:36:47,631 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:36:47,631 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:36:47,631 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:36:47,631 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 15:36:47,631 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 15:36:47,631 - Routes - INFO -  7. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:36:47,631 - Routes - INFO -  8. /carrinho/contador                  → GET
2025-08-25 15:36:47,631 - Routes - INFO -  9. /carrinho/itens                     → GET
2025-08-25 15:36:47,631 - Routes - INFO - 10. /carrinho/limpar                    → DELETE
2025-08-25 15:36:47,631 - Routes - INFO - 11. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:36:47,631 - Routes - INFO - 12. /carrinho/status                    → GET
2025-08-25 15:36:47,631 - Routes - INFO - 15. /health                             → GET
2025-08-25 15:36:47,631 - Routes - INFO - 16. /info                               → GET
2025-08-25 15:36:47,631 - Routes - INFO - 17. /livros/                            → GET, POST
2025-08-25 15:36:47,631 - Routes - INFO - 18. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:36:47,633 - Routes - INFO - 19. /livros/buscar/autor                → GET
2025-08-25 15:36:47,633 - Routes - INFO - 20. /livros/buscar/estoque              → GET
2025-08-25 15:36:47,633 - Routes - INFO - 21. /livros/buscar/preco                → GET
2025-08-25 15:36:47,633 - Routes - INFO - 22. /livros/buscar/titulo               → GET
2025-08-25 15:36:47,633 - Routes - INFO - 23. /livros/cadastrar-form              → POST
2025-08-25 15:36:47,633 - Routes - INFO - 24. /livros/estatisticas                → GET
2025-08-25 15:36:47,633 - Routes - INFO - 25. /livros/listar                      → GET
2025-08-25 15:36:47,633 - Routes - INFO - 26. /livros/status                      → GET
2025-08-25 15:36:47,633 - Routes - INFO - 27. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:36:47,633 - Routes - INFO - 29. /pedidos/                           → GET
2025-08-25 15:36:47,633 - Routes - INFO - 30. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:36:47,633 - Routes - INFO - 31. /pedidos/finalizar                  → POST
2025-08-25 15:36:47,633 - Routes - INFO - 32. /pedidos/listar                     → GET
2025-08-25 15:36:47,633 - Routes - INFO - 33. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:36:47,633 - Routes - INFO - 34. /pedidos/status                     → GET
2025-08-25 15:36:47,633 - Routes - INFO - 35. /pedidos/{pedido_id}                → GET
2025-08-25 15:36:47,633 - Routes - INFO - 36. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:36:47,633 - Routes - INFO - 38. /usuarios/cadastrar                 → POST
2025-08-25 15:36:47,633 - Routes - INFO - 39. /usuarios/listar                    → GET
2025-08-25 15:36:47,633 - Routes - INFO - 40. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:36:47,633 - Routes - INFO - ================================
2025-08-25 15:36:49,590 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:36:49,590 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:36:49,631 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:36:49,631 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:36:49,631 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:36:49,631 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:36:49,631 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:36:49,631 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:36:49,631 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:36:49,631 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:36:49,631 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:36:49,631 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:36:49,631 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:36:49,631 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:36:49,631 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:36:49,631 - Routes - INFO - /livros/                            → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/                            → POST
2025-08-25 15:36:49,631 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:36:49,631 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:36:49,631 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:36:49,631 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:36:49,631 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:36:49,631 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:36:49,631 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:36:49,631 - Routes - INFO - /                                   → GET
2025-08-25 15:36:49,631 - Routes - INFO - /health                             → GET
2025-08-25 15:36:49,631 - Routes - INFO - /info                               → GET
2025-08-25 15:36:49,631 - Routes - INFO - Total de rotas registradas: 44
2025-08-25 15:36:49,631 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:36:59,985 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 15:37:25,474 - CarrinhoRouter - ERROR - Erro ao carregar página do carrinho: No filter named 'moeda_sem_simbolo'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 26, in pagina_carrinho
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 23, in template
    <p class="text-blue-600 font-bold mt-1">R$ {{ (item.livro.preco * item.quantidade) | moeda_sem_simbolo }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda_sem_simbolo'.
2025-08-25 15:38:20,061 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 15:38:20,062 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 15:40:43,099 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:40:43,099 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:40:43,099 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:40:43,099 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:40:43,099 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:40:43,099 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 15:40:43,099 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 15:40:43,099 - Routes - INFO -  7. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:40:43,099 - Routes - INFO -  8. /carrinho/contador                  → GET
2025-08-25 15:40:43,099 - Routes - INFO -  9. /carrinho/itens                     → GET
2025-08-25 15:40:43,099 - Routes - INFO - 10. /carrinho/limpar                    → DELETE
2025-08-25 15:40:43,099 - Routes - INFO - 11. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:40:43,099 - Routes - INFO - 12. /carrinho/status                    → GET
2025-08-25 15:40:43,099 - Routes - INFO - 15. /health                             → GET
2025-08-25 15:40:43,099 - Routes - INFO - 16. /info                               → GET
2025-08-25 15:40:43,099 - Routes - INFO - 17. /livros/                            → GET, POST
2025-08-25 15:40:43,101 - Routes - INFO - 18. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:40:43,101 - Routes - INFO - 19. /livros/buscar/autor                → GET
2025-08-25 15:40:43,101 - Routes - INFO - 20. /livros/buscar/estoque              → GET
2025-08-25 15:40:43,101 - Routes - INFO - 21. /livros/buscar/preco                → GET
2025-08-25 15:40:43,101 - Routes - INFO - 22. /livros/buscar/titulo               → GET
2025-08-25 15:40:43,101 - Routes - INFO - 23. /livros/cadastrar-form              → POST
2025-08-25 15:40:43,101 - Routes - INFO - 24. /livros/estatisticas                → GET
2025-08-25 15:40:43,101 - Routes - INFO - 25. /livros/listar                      → GET
2025-08-25 15:40:43,101 - Routes - INFO - 26. /livros/status                      → GET
2025-08-25 15:40:43,101 - Routes - INFO - 27. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:40:43,101 - Routes - INFO - 29. /pedidos/                           → GET
2025-08-25 15:40:43,101 - Routes - INFO - 30. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:40:43,101 - Routes - INFO - 31. /pedidos/finalizar                  → POST
2025-08-25 15:40:43,101 - Routes - INFO - 32. /pedidos/listar                     → GET
2025-08-25 15:40:43,101 - Routes - INFO - 33. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:40:43,101 - Routes - INFO - 34. /pedidos/status                     → GET
2025-08-25 15:40:43,101 - Routes - INFO - 35. /pedidos/{pedido_id}                → GET
2025-08-25 15:40:43,101 - Routes - INFO - 36. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:40:43,101 - Routes - INFO - 38. /usuarios/cadastrar                 → POST
2025-08-25 15:40:43,101 - Routes - INFO - 39. /usuarios/listar                    → GET
2025-08-25 15:40:43,101 - Routes - INFO - 40. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:40:43,101 - Routes - INFO - ================================
2025-08-25 15:40:51,358 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:40:51,358 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:40:51,423 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:40:51,423 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:40:51,423 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:40:51,423 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:40:51,423 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:40:51,423 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:40:51,424 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:40:51,424 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:40:51,424 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:40:51,424 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:40:51,424 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:40:51,424 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:40:51,424 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:40:51,424 - Routes - INFO - /livros/                            → GET
2025-08-25 15:40:51,424 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:40:51,424 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:40:51,424 - Routes - INFO - /livros/                            → POST
2025-08-25 15:40:51,424 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:40:51,424 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:40:51,424 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:40:51,425 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:40:51,425 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:40:51,425 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:40:51,426 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:40:51,426 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:40:51,426 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:40:51,426 - Routes - INFO - /                                   → GET
2025-08-25 15:40:51,426 - Routes - INFO - /health                             → GET
2025-08-25 15:40:51,426 - Routes - INFO - /info                               → GET
2025-08-25 15:40:51,426 - Routes - INFO - Total de rotas registradas: 44
2025-08-25 15:40:51,427 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:41:31,654 - CarrinhoRouter - ERROR - Erro ao carregar página do carrinho: No filter named 'moeda_sem_simbolo'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 26, in pagina_carrinho
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 23, in template
    <p class="text-blue-600 font-bold mt-1">R$ {{ (item.livro.preco * item.quantidade) | moeda_sem_simbolo }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda_sem_simbolo'.
2025-08-25 15:41:57,619 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 15:41:57,620 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 15:55:14,631 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:55:14,631 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:55:14,631 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:55:14,631 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:55:14,631 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:55:14,631 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 15:55:14,631 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 15:55:14,631 - Routes - INFO -  7. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:55:14,631 - Routes - INFO -  8. /carrinho/contador                  → GET
2025-08-25 15:55:14,631 - Routes - INFO -  9. /carrinho/itens                     → GET
2025-08-25 15:55:14,631 - Routes - INFO - 10. /carrinho/limpar                    → DELETE
2025-08-25 15:55:14,631 - Routes - INFO - 11. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:55:14,631 - Routes - INFO - 12. /carrinho/status                    → GET
2025-08-25 15:55:14,631 - Routes - INFO - 15. /health                             → GET
2025-08-25 15:55:14,631 - Routes - INFO - 16. /info                               → GET
2025-08-25 15:55:14,631 - Routes - INFO - 17. /livros/                            → GET, POST
2025-08-25 15:55:14,631 - Routes - INFO - 18. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:55:14,631 - Routes - INFO - 19. /livros/buscar/autor                → GET
2025-08-25 15:55:14,631 - Routes - INFO - 20. /livros/buscar/estoque              → GET
2025-08-25 15:55:14,631 - Routes - INFO - 21. /livros/buscar/preco                → GET
2025-08-25 15:55:14,631 - Routes - INFO - 22. /livros/buscar/titulo               → GET
2025-08-25 15:55:14,631 - Routes - INFO - 23. /livros/cadastrar-form              → POST
2025-08-25 15:55:14,631 - Routes - INFO - 24. /livros/estatisticas                → GET
2025-08-25 15:55:14,631 - Routes - INFO - 25. /livros/listar                      → GET
2025-08-25 15:55:14,631 - Routes - INFO - 26. /livros/status                      → GET
2025-08-25 15:55:14,631 - Routes - INFO - 27. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:55:14,631 - Routes - INFO - 29. /pedidos/                           → GET
2025-08-25 15:55:14,631 - Routes - INFO - 30. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:55:14,631 - Routes - INFO - 31. /pedidos/finalizar                  → POST
2025-08-25 15:55:14,631 - Routes - INFO - 32. /pedidos/listar                     → GET
2025-08-25 15:55:14,631 - Routes - INFO - 33. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:55:14,631 - Routes - INFO - 34. /pedidos/status                     → GET
2025-08-25 15:55:14,631 - Routes - INFO - 35. /pedidos/{pedido_id}                → GET
2025-08-25 15:55:14,631 - Routes - INFO - 36. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:55:14,631 - Routes - INFO - 38. /usuarios/cadastrar                 → POST
2025-08-25 15:55:14,631 - Routes - INFO - 39. /usuarios/listar                    → GET
2025-08-25 15:55:14,631 - Routes - INFO - 40. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:55:14,631 - Routes - INFO - ================================
2025-08-25 15:55:16,529 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:55:16,529 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:55:16,594 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:55:16,594 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:55:16,594 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:55:16,594 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:55:16,594 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:55:16,594 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:55:16,594 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:55:16,594 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:55:16,594 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:55:16,594 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:55:16,594 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:55:16,594 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:55:16,594 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:55:16,594 - Routes - INFO - /livros/                            → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/                            → POST
2025-08-25 15:55:16,594 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:55:16,594 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:55:16,594 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:55:16,594 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:55:16,594 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:55:16,594 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:55:16,594 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:55:16,594 - Routes - INFO - /                                   → GET
2025-08-25 15:55:16,594 - Routes - INFO - /health                             → GET
2025-08-25 15:55:16,594 - Routes - INFO - /info                               → GET
2025-08-25 15:55:16,594 - Routes - INFO - Total de rotas registradas: 44
2025-08-25 15:55:16,594 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:56:28,757 - LivroRouter - ERROR - Erro ao obter livro 4: 'LivroService' object has no attribute 'obter_livro'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 79, in obter_livro
    livro = service.obter_livro(livro_id)
            ^^^^^^^^^^^^^^^^^^^
AttributeError: 'LivroService' object has no attribute 'obter_livro'
2025-08-25 15:57:13,360 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 15:57:13,360 - Routes - INFO -  1. /                                   → GET
2025-08-25 15:57:13,360 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 15:57:13,360 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 15:57:13,360 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 15:57:13,360 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 15:57:13,360 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 15:57:13,360 - Routes - INFO -  7. /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:57:13,360 - Routes - INFO -  8. /carrinho/contador                  → GET
2025-08-25 15:57:13,360 - Routes - INFO -  9. /carrinho/itens                     → GET
2025-08-25 15:57:13,360 - Routes - INFO - 10. /carrinho/limpar                    → DELETE
2025-08-25 15:57:13,360 - Routes - INFO - 11. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:57:13,360 - Routes - INFO - 12. /carrinho/status                    → GET
2025-08-25 15:57:13,360 - Routes - INFO - 15. /health                             → GET
2025-08-25 15:57:13,362 - Routes - INFO - 16. /info                               → GET
2025-08-25 15:57:13,362 - Routes - INFO - 17. /livros/                            → GET, POST
2025-08-25 15:57:13,362 - Routes - INFO - 18. /livros/buscar/ano/{ano}            → GET
2025-08-25 15:57:13,362 - Routes - INFO - 19. /livros/buscar/autor                → GET
2025-08-25 15:57:13,362 - Routes - INFO - 20. /livros/buscar/estoque              → GET
2025-08-25 15:57:13,362 - Routes - INFO - 21. /livros/buscar/preco                → GET
2025-08-25 15:57:13,362 - Routes - INFO - 22. /livros/buscar/titulo               → GET
2025-08-25 15:57:13,362 - Routes - INFO - 23. /livros/cadastrar-form              → POST
2025-08-25 15:57:13,362 - Routes - INFO - 24. /livros/estatisticas                → GET
2025-08-25 15:57:13,362 - Routes - INFO - 25. /livros/listar                      → GET
2025-08-25 15:57:13,362 - Routes - INFO - 26. /livros/status                      → GET
2025-08-25 15:57:13,362 - Routes - INFO - 27. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 15:57:13,362 - Routes - INFO - 29. /pedidos/                           → GET
2025-08-25 15:57:13,362 - Routes - INFO - 30. /pedidos/estatisticas/usuario       → GET
2025-08-25 15:57:13,362 - Routes - INFO - 31. /pedidos/finalizar                  → POST
2025-08-25 15:57:13,362 - Routes - INFO - 32. /pedidos/listar                     → GET
2025-08-25 15:57:13,362 - Routes - INFO - 33. /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:57:13,362 - Routes - INFO - 34. /pedidos/status                     → GET
2025-08-25 15:57:13,362 - Routes - INFO - 35. /pedidos/{pedido_id}                → GET
2025-08-25 15:57:13,362 - Routes - INFO - 36. /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:57:13,362 - Routes - INFO - 38. /usuarios/cadastrar                 → POST
2025-08-25 15:57:13,362 - Routes - INFO - 39. /usuarios/listar                    → GET
2025-08-25 15:57:13,362 - Routes - INFO - 40. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 15:57:13,362 - Routes - INFO - ================================
2025-08-25 15:57:15,274 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 15:57:15,276 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 15:57:15,349 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 15:57:15,349 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 15:57:15,349 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 15:57:15,349 - Routes - INFO - /auth/login                         → GET
2025-08-25 15:57:15,349 - Routes - INFO - /auth/login                         → POST
2025-08-25 15:57:15,349 - Routes - INFO - /auth/logout                        → GET
2025-08-25 15:57:15,349 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 15:57:15,349 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 15:57:15,349 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 15:57:15,349 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 15:57:15,349 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 15:57:15,349 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 15:57:15,349 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 15:57:15,349 - Routes - INFO - /livros/                            → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/listar                      → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/                            → POST
2025-08-25 15:57:15,349 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 15:57:15,349 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 15:57:15,349 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 15:57:15,349 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 15:57:15,349 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 15:57:15,351 - Routes - INFO - /livros/status                      → GET
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/                          → GET
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/itens                     → GET
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/atualizar/{livro_id}      → PUT
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/limpar                    → DELETE
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/contador                  → GET
2025-08-25 15:57:15,351 - Routes - INFO - /carrinho/status                    → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/                           → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 15:57:15,351 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 15:57:15,351 - Routes - INFO - /                                   → GET
2025-08-25 15:57:15,351 - Routes - INFO - /health                             → GET
2025-08-25 15:57:15,351 - Routes - INFO - /info                               → GET
2025-08-25 15:57:15,351 - Routes - INFO - Total de rotas registradas: 44
2025-08-25 15:57:15,351 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 15:57:45,208 - LivroRouter - ERROR - Erro ao obter livro 4: 'int' object has no attribute 'dict'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 79, in obter_livro
    livro = service.adicionar_livro(livro_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 13, in adicionar_livro
    return self.repo.adicionar(livro)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\livro_repository.py", line 16, in adicionar
    livro = Livro(**livro_data.dict())
                    ^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'dict'
2025-08-25 16:06:46,463 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 16:06:46,463 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 16:06:51,660 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:06:51,660 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:06:51,660 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:06:51,660 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:06:51,660 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:06:51,660 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:06:51,660 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:06:51,660 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:06:51,662 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:06:51,662 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:06:51,662 - Routes - INFO - 12. /livros/                            → GET, POST
2025-08-25 16:06:51,662 - Routes - INFO - 13. /livros/buscar/ano/{ano}            → GET
2025-08-25 16:06:51,662 - Routes - INFO - 14. /livros/buscar/autor                → GET
2025-08-25 16:06:51,662 - Routes - INFO - 15. /livros/buscar/estoque              → GET
2025-08-25 16:06:51,662 - Routes - INFO - 16. /livros/buscar/preco                → GET
2025-08-25 16:06:51,662 - Routes - INFO - 17. /livros/buscar/titulo               → GET
2025-08-25 16:06:51,662 - Routes - INFO - 18. /livros/cadastrar-form              → POST
2025-08-25 16:06:51,662 - Routes - INFO - 19. /livros/estatisticas                → GET
2025-08-25 16:06:51,662 - Routes - INFO - 20. /livros/listar                      → GET
2025-08-25 16:06:51,662 - Routes - INFO - 21. /livros/status                      → GET
2025-08-25 16:06:51,662 - Routes - INFO - 22. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 16:06:51,662 - Routes - INFO - 24. /pedidos/                           → GET
2025-08-25 16:06:51,662 - Routes - INFO - 25. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:06:51,662 - Routes - INFO - 26. /pedidos/finalizar                  → POST
2025-08-25 16:06:51,663 - Routes - INFO - 27. /pedidos/listar                     → GET
2025-08-25 16:06:51,663 - Routes - INFO - 28. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:06:51,663 - Routes - INFO - 29. /pedidos/status                     → GET
2025-08-25 16:06:51,663 - Routes - INFO - 30. /pedidos/{pedido_id}                → GET
2025-08-25 16:06:51,663 - Routes - INFO - 31. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:06:51,663 - Routes - INFO - 33. /usuarios/cadastrar                 → POST
2025-08-25 16:06:51,663 - Routes - INFO - 34. /usuarios/listar                    → GET
2025-08-25 16:06:51,663 - Routes - INFO - 35. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:06:51,663 - Routes - INFO - ================================
2025-08-25 16:06:53,656 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:06:53,656 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:06:53,704 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:06:53,704 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:06:53,704 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:06:53,704 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:06:53,704 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:06:53,704 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:06:53,704 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:06:53,704 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:06:53,704 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:06:53,704 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:06:53,704 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:06:53,704 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:06:53,704 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:06:53,704 - Routes - INFO - /livros/                            → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/listar                      → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/                            → POST
2025-08-25 16:06:53,704 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 16:06:53,704 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 16:06:53,704 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 16:06:53,704 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 16:06:53,704 - Routes - INFO - /livros/status                      → GET
2025-08-25 16:06:53,704 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:06:53,704 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:06:53,704 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:06:53,704 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:06:53,704 - Routes - INFO - /                                   → GET
2025-08-25 16:06:53,704 - Routes - INFO - /health                             → GET
2025-08-25 16:06:53,704 - Routes - INFO - /info                               → GET
2025-08-25 16:06:53,704 - Routes - INFO - Total de rotas registradas: 39
2025-08-25 16:06:53,704 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:07:22,989 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: No filter named 'formatar_preco_sem_simbolo'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 23, in template
    <p class="text-blue-600 font-bold mt-1">{{ (item.livro.preco * item.quantidade) | formatar_preco_sem_simbolo }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'formatar_preco_sem_simbolo'.
2025-08-25 16:11:25,232 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 16:11:25,233 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 16:11:29,015 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:11:29,015 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:11:29,015 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:11:29,025 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:11:29,025 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:11:29,025 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:11:29,025 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:11:29,025 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:11:29,025 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:11:29,025 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:11:29,025 - Routes - INFO - 12. /livros/                            → GET, POST
2025-08-25 16:11:29,025 - Routes - INFO - 13. /livros/buscar/ano/{ano}            → GET
2025-08-25 16:11:29,025 - Routes - INFO - 14. /livros/buscar/autor                → GET
2025-08-25 16:11:29,025 - Routes - INFO - 15. /livros/buscar/estoque              → GET
2025-08-25 16:11:29,025 - Routes - INFO - 16. /livros/buscar/preco                → GET
2025-08-25 16:11:29,025 - Routes - INFO - 17. /livros/buscar/titulo               → GET
2025-08-25 16:11:29,025 - Routes - INFO - 18. /livros/cadastrar-form              → POST
2025-08-25 16:11:29,025 - Routes - INFO - 19. /livros/estatisticas                → GET
2025-08-25 16:11:29,025 - Routes - INFO - 20. /livros/listar                      → GET
2025-08-25 16:11:29,025 - Routes - INFO - 21. /livros/status                      → GET
2025-08-25 16:11:29,025 - Routes - INFO - 22. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 16:11:29,025 - Routes - INFO - 24. /pedidos/                           → GET
2025-08-25 16:11:29,025 - Routes - INFO - 25. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:11:29,025 - Routes - INFO - 26. /pedidos/finalizar                  → POST
2025-08-25 16:11:29,025 - Routes - INFO - 27. /pedidos/listar                     → GET
2025-08-25 16:11:29,025 - Routes - INFO - 28. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:11:29,025 - Routes - INFO - 29. /pedidos/status                     → GET
2025-08-25 16:11:29,025 - Routes - INFO - 30. /pedidos/{pedido_id}                → GET
2025-08-25 16:11:29,025 - Routes - INFO - 31. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:11:29,025 - Routes - INFO - 33. /usuarios/cadastrar                 → POST
2025-08-25 16:11:29,025 - Routes - INFO - 34. /usuarios/listar                    → GET
2025-08-25 16:11:29,025 - Routes - INFO - 35. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:11:29,025 - Routes - INFO - ================================
2025-08-25 16:11:31,123 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:11:31,123 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:11:31,174 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:11:31,174 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:11:31,174 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:11:31,174 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:11:31,174 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:11:31,174 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:11:31,174 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:11:31,174 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:11:31,174 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:11:31,174 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:11:31,174 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:11:31,174 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:11:31,176 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:11:31,176 - Routes - INFO - /livros/                            → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/listar                      → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/                            → POST
2025-08-25 16:11:31,176 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 16:11:31,176 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 16:11:31,176 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 16:11:31,176 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 16:11:31,176 - Routes - INFO - /livros/status                      → GET
2025-08-25 16:11:31,176 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:11:31,176 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:11:31,176 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:11:31,176 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:11:31,178 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:11:31,178 - Routes - INFO - /                                   → GET
2025-08-25 16:11:31,178 - Routes - INFO - /health                             → GET
2025-08-25 16:11:31,178 - Routes - INFO - /info                               → GET
2025-08-25 16:11:31,178 - Routes - INFO - Total de rotas registradas: 39
2025-08-25 16:11:31,178 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:11:51,656 - LivroRouter - ERROR - Erro ao obter livro 4: 'int' object has no attribute 'dict'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 79, in obter_livro
    livro = service.adicionar_livro(livro_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 13, in adicionar_livro
    return self.repo.adicionar(livro)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\livro_repository.py", line 16, in adicionar
    livro = Livro(**livro_data.dict())
                    ^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'dict'
2025-08-25 16:13:55,495 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 16:13:55,495 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 16:13:58,784 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:13:58,784 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:13:58,784 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:13:58,784 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:13:58,784 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:13:58,784 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:13:58,784 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:13:58,784 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:13:58,784 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:13:58,784 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:13:58,784 - Routes - INFO - 12. /livros/                            → GET, POST
2025-08-25 16:13:58,784 - Routes - INFO - 13. /livros/buscar/ano/{ano}            → GET
2025-08-25 16:13:58,784 - Routes - INFO - 14. /livros/buscar/autor                → GET
2025-08-25 16:13:58,784 - Routes - INFO - 15. /livros/buscar/estoque              → GET
2025-08-25 16:13:58,784 - Routes - INFO - 16. /livros/buscar/preco                → GET
2025-08-25 16:13:58,784 - Routes - INFO - 17. /livros/buscar/titulo               → GET
2025-08-25 16:13:58,784 - Routes - INFO - 18. /livros/cadastrar-form              → POST
2025-08-25 16:13:58,784 - Routes - INFO - 19. /livros/estatisticas                → GET
2025-08-25 16:13:58,784 - Routes - INFO - 20. /livros/listar                      → GET
2025-08-25 16:13:58,784 - Routes - INFO - 21. /livros/status                      → GET
2025-08-25 16:13:58,784 - Routes - INFO - 22. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 16:13:58,784 - Routes - INFO - 24. /pedidos/                           → GET
2025-08-25 16:13:58,784 - Routes - INFO - 25. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:13:58,784 - Routes - INFO - 26. /pedidos/finalizar                  → POST
2025-08-25 16:13:58,784 - Routes - INFO - 27. /pedidos/listar                     → GET
2025-08-25 16:13:58,784 - Routes - INFO - 28. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:13:58,784 - Routes - INFO - 29. /pedidos/status                     → GET
2025-08-25 16:13:58,784 - Routes - INFO - 30. /pedidos/{pedido_id}                → GET
2025-08-25 16:13:58,784 - Routes - INFO - 31. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:13:58,784 - Routes - INFO - 33. /usuarios/cadastrar                 → POST
2025-08-25 16:13:58,784 - Routes - INFO - 34. /usuarios/listar                    → GET
2025-08-25 16:13:58,784 - Routes - INFO - 35. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:13:58,784 - Routes - INFO - ================================
2025-08-25 16:14:01,011 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:14:01,012 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:14:01,075 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:14:01,075 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:14:01,075 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:14:01,075 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:14:01,075 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:14:01,075 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:14:01,075 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:14:01,075 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:14:01,075 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:14:01,075 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:14:01,075 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:14:01,075 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:14:01,075 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:14:01,075 - Routes - INFO - /livros/                            → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/listar                      → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/                            → POST
2025-08-25 16:14:01,075 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 16:14:01,075 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 16:14:01,075 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 16:14:01,075 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 16:14:01,075 - Routes - INFO - /livros/status                      → GET
2025-08-25 16:14:01,075 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:14:01,075 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:14:01,075 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:14:01,075 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:14:01,075 - Routes - INFO - /                                   → GET
2025-08-25 16:14:01,075 - Routes - INFO - /health                             → GET
2025-08-25 16:14:01,075 - Routes - INFO - /info                               → GET
2025-08-25 16:14:01,075 - Routes - INFO - Total de rotas registradas: 39
2025-08-25 16:14:01,075 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:14:05,687 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-25 16:14:47,557 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-25 16:33:32,096 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:33:32,102 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:33:32,102 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:33:32,102 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:33:32,102 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:33:32,102 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:33:32,102 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:33:32,102 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:33:32,102 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:33:32,102 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:33:32,102 - Routes - INFO - 12. /livros/                            → GET, POST
2025-08-25 16:33:32,102 - Routes - INFO - 13. /livros/buscar/ano/{ano}            → GET
2025-08-25 16:33:32,102 - Routes - INFO - 14. /livros/buscar/autor                → GET
2025-08-25 16:33:32,103 - Routes - INFO - 15. /livros/buscar/estoque              → GET
2025-08-25 16:33:32,103 - Routes - INFO - 16. /livros/buscar/preco                → GET
2025-08-25 16:33:32,103 - Routes - INFO - 17. /livros/buscar/titulo               → GET
2025-08-25 16:33:32,103 - Routes - INFO - 18. /livros/cadastrar-form              → POST
2025-08-25 16:33:32,103 - Routes - INFO - 19. /livros/estatisticas                → GET
2025-08-25 16:33:32,103 - Routes - INFO - 20. /livros/listar                      → GET
2025-08-25 16:33:32,103 - Routes - INFO - 21. /livros/status                      → GET
2025-08-25 16:33:32,103 - Routes - INFO - 22. /livros/{livro_id}                  → DELETE, GET, PUT
2025-08-25 16:33:32,103 - Routes - INFO - 24. /pedidos/                           → GET
2025-08-25 16:33:32,103 - Routes - INFO - 25. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:33:32,103 - Routes - INFO - 26. /pedidos/finalizar                  → POST
2025-08-25 16:33:32,103 - Routes - INFO - 27. /pedidos/listar                     → GET
2025-08-25 16:33:32,103 - Routes - INFO - 28. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:33:32,103 - Routes - INFO - 29. /pedidos/status                     → GET
2025-08-25 16:33:32,103 - Routes - INFO - 30. /pedidos/{pedido_id}                → GET
2025-08-25 16:33:32,103 - Routes - INFO - 31. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:33:32,103 - Routes - INFO - 33. /usuarios/cadastrar                 → POST
2025-08-25 16:33:32,103 - Routes - INFO - 34. /usuarios/listar                    → GET
2025-08-25 16:33:32,103 - Routes - INFO - 35. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:33:32,103 - Routes - INFO - ================================
2025-08-25 16:33:34,722 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:33:34,723 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:33:34,762 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:33:34,762 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:33:34,762 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:33:34,762 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:33:34,762 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:33:34,762 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:33:34,762 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:33:34,762 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:33:34,762 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:33:34,762 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:33:34,762 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:33:34,762 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:33:34,763 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:33:34,763 - Routes - INFO - /livros/                            → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/listar                      → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/{livro_id}                  → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/                            → POST
2025-08-25 16:33:34,763 - Routes - INFO - /livros/cadastrar-form              → POST
2025-08-25 16:33:34,763 - Routes - INFO - /livros/{livro_id}                  → PUT
2025-08-25 16:33:34,763 - Routes - INFO - /livros/{livro_id}                  → DELETE
2025-08-25 16:33:34,763 - Routes - INFO - /livros/buscar/titulo               → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/buscar/autor                → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/buscar/ano/{ano}            → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/buscar/preco                → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/buscar/estoque              → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/estatisticas                → GET
2025-08-25 16:33:34,763 - Routes - INFO - /livros/status                      → GET
2025-08-25 16:33:34,764 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:33:34,764 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:33:34,764 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:33:34,764 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:33:34,764 - Routes - INFO - /                                   → GET
2025-08-25 16:33:34,764 - Routes - INFO - /health                             → GET
2025-08-25 16:33:34,764 - Routes - INFO - /info                               → GET
2025-08-25 16:33:34,764 - Routes - INFO - Total de rotas registradas: 39
2025-08-25 16:33:34,765 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:33:39,131 - BibliotecaApp - ERROR - Erro na página inicial: maximum recursion depth exceeded in comparison
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 947 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:33:39,228 - BibliotecaApp - ERROR - Erro interno do servidor: maximum recursion depth exceeded in comparison
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   [Previous line repeated 948 more times]
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    |     return self[key]
    |            ~~~~^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    |     rv = self._mapping[key]
    |          ~~~~~~~~~~~~~^^^^^
    | RecursionError: maximum recursion depth exceeded in comparison
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 948 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:45:06,829 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:45:06,829 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:45:06,830 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:45:06,830 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:45:06,830 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:45:06,830 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:45:06,830 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:45:06,830 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:45:06,830 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:45:06,831 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:45:06,831 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 16:45:06,831 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 16:45:06,831 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 16:45:06,831 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:45:06,831 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 16:45:06,831 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 16:45:06,831 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:45:06,831 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 16:45:06,831 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 16:45:06,831 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:45:06,831 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 16:45:06,831 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 16:45:06,831 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:45:06,831 - Routes - INFO - ================================
2025-08-25 16:45:08,947 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:45:08,947 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:45:09,001 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:45:09,001 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:45:09,001 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:45:09,001 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:45:09,001 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:45:09,001 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:45:09,001 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:45:09,001 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:45:09,001 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:45:09,001 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:45:09,001 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:45:09,001 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:45:09,001 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:45:09,001 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 16:45:09,001 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 16:45:09,001 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 16:45:09,001 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 16:45:09,001 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 16:45:09,001 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:45:09,001 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:45:09,004 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:45:09,004 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:45:09,004 - Routes - INFO - /                                   → GET
2025-08-25 16:45:09,004 - Routes - INFO - /health                             → GET
2025-08-25 16:45:09,004 - Routes - INFO - /info                               → GET
2025-08-25 16:45:09,004 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 16:45:09,004 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:45:16,985 - BibliotecaApp - ERROR - Erro interno do servidor: maximum recursion depth exceeded in comparison
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 84, in custom_http_exception_handler
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\404.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   [Previous line repeated 964 more times]
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    |     return self[key]
    |            ~~~~^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    |     rv = self._mapping[key]
    |          ~~~~~~~~~~~~~^^^^^
    | RecursionError: maximum recursion depth exceeded in comparison
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 84, in custom_http_exception_handler
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\404.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 964 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:45:27,089 - BibliotecaApp - ERROR - Erro na página inicial: maximum recursion depth exceeded in comparison
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 947 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:45:27,247 - BibliotecaApp - ERROR - Erro interno do servidor: maximum recursion depth exceeded in comparison
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   [Previous line repeated 948 more times]
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    |     return self[key]
    |            ~~~~^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    |     rv = self._mapping[key]
    |          ~~~~~~~~~~~~~^^^^^
    | RecursionError: maximum recursion depth exceeded in comparison
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 948 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:47:20,769 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:47:20,770 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:47:20,770 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:47:20,770 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:47:20,770 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:47:20,770 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:47:20,770 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:47:20,770 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:47:20,770 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:47:20,770 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:47:20,771 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 16:47:20,771 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 16:47:20,771 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 16:47:20,771 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:47:20,771 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 16:47:20,771 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 16:47:20,771 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:47:20,771 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 16:47:20,771 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 16:47:20,771 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:47:20,771 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 16:47:20,771 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 16:47:20,771 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:47:20,771 - Routes - INFO - ================================
2025-08-25 16:47:22,805 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:47:22,805 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:47:22,870 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:47:22,870 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:47:22,870 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:47:22,871 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:47:22,871 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:47:22,871 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:47:22,871 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:47:22,871 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:47:22,871 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:47:22,871 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:47:22,871 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:47:22,871 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:47:22,871 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:47:22,871 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 16:47:22,871 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 16:47:22,871 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 16:47:22,871 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 16:47:22,871 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 16:47:22,872 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:47:22,872 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:47:22,872 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:47:22,872 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:47:22,872 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:47:22,872 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:47:22,872 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:47:22,872 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:47:22,873 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:47:22,873 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:47:22,873 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:47:22,873 - Routes - INFO - /                                   → GET
2025-08-25 16:47:22,873 - Routes - INFO - /health                             → GET
2025-08-25 16:47:22,873 - Routes - INFO - /info                               → GET
2025-08-25 16:47:22,873 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 16:47:22,873 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:47:27,129 - BibliotecaApp - ERROR - Erro na página inicial: maximum recursion depth exceeded in comparison
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 947 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:47:27,224 - BibliotecaApp - ERROR - Erro interno do servidor: maximum recursion depth exceeded in comparison
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   [Previous line repeated 948 more times]
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    |     return self[key]
    |            ~~~~^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    |     rv = self._mapping[key]
    |          ~~~~~~~~~~~~~^^^^^
    | RecursionError: maximum recursion depth exceeded in comparison
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 1, in top-level template code
    {% extends "base.html" %}
  [Previous line repeated 948 more times]
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 477, in get
    return self[key]
           ~~~~^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\utils.py", line 515, in __getitem__
    rv = self._mapping[key]
         ~~~~~~~~~~~~~^^^^^
RecursionError: maximum recursion depth exceeded in comparison
2025-08-25 16:50:57,067 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:50:57,069 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:50:57,069 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:50:57,069 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:50:57,069 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:50:57,069 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:50:57,069 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:50:57,069 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:50:57,069 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:50:57,069 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:50:57,069 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 16:50:57,069 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 16:50:57,069 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 16:50:57,069 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:50:57,069 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 16:50:57,069 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 16:50:57,069 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:50:57,069 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 16:50:57,069 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 16:50:57,069 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:50:57,069 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 16:50:57,069 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 16:50:57,069 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:50:57,069 - Routes - INFO - ================================
2025-08-25 16:50:58,961 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:50:58,961 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:50:59,002 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:50:59,002 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:50:59,002 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:50:59,002 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:50:59,002 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:50:59,002 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:50:59,002 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:50:59,006 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:50:59,006 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:50:59,006 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:50:59,006 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:50:59,006 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:50:59,006 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:50:59,006 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 16:50:59,006 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 16:50:59,006 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 16:50:59,007 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 16:50:59,007 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 16:50:59,007 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:50:59,007 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:50:59,007 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:50:59,007 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:50:59,007 - Routes - INFO - /                                   → GET
2025-08-25 16:50:59,007 - Routes - INFO - /health                             → GET
2025-08-25 16:50:59,007 - Routes - INFO - /info                               → GET
2025-08-25 16:50:59,007 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 16:50:59,007 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:51:04,852 - BibliotecaApp - ERROR - Erro na página inicial: No route exists for name "static" and params "filename".
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 16:51:04,870 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "static" and params "filename".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 12, in top-level template code
    |     <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 16:56:47,275 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 16:56:47,275 - Routes - INFO -  1. /                                   → GET
2025-08-25 16:56:47,275 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 16:56:47,275 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 16:56:47,275 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 16:56:47,275 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 16:56:47,275 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 16:56:47,275 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:56:47,275 - Routes - INFO - 10. /health                             → GET
2025-08-25 16:56:47,275 - Routes - INFO - 11. /info                               → GET
2025-08-25 16:56:47,275 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 16:56:47,275 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 16:56:47,275 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 16:56:47,275 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 16:56:47,275 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 16:56:47,275 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 16:56:47,275 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:56:47,275 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 16:56:47,275 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 16:56:47,275 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:56:47,275 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 16:56:47,275 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 16:56:47,275 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 16:56:47,275 - Routes - INFO - ================================
2025-08-25 16:56:49,237 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 16:56:49,237 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 16:56:49,281 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 16:56:49,281 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 16:56:49,281 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 16:56:49,281 - Routes - INFO - /auth/login                         → GET
2025-08-25 16:56:49,281 - Routes - INFO - /auth/login                         → POST
2025-08-25 16:56:49,281 - Routes - INFO - /auth/logout                        → GET
2025-08-25 16:56:49,281 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 16:56:49,281 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 16:56:49,281 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 16:56:49,281 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 16:56:49,281 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 16:56:49,281 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 16:56:49,281 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 16:56:49,281 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 16:56:49,281 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 16:56:49,281 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 16:56:49,281 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 16:56:49,281 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 16:56:49,281 - Routes - INFO - /carrinho/                          → GET
2025-08-25 16:56:49,281 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 16:56:49,281 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/                           → GET
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 16:56:49,281 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 16:56:49,281 - Routes - INFO - /                                   → GET
2025-08-25 16:56:49,281 - Routes - INFO - /health                             → GET
2025-08-25 16:56:49,281 - Routes - INFO - /info                               → GET
2025-08-25 16:56:49,281 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 16:56:49,281 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 16:56:55,611 - BibliotecaApp - ERROR - Erro na página inicial: No route exists for name "static" and params "filename".
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 16:56:55,625 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "static" and params "filename".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 12, in top-level template code
    |     <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 16:56:56,313 - BibliotecaApp - ERROR - Erro na página inicial: No route exists for name "static" and params "filename".
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 16:56:56,317 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "static" and params "filename".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 12, in top-level template code
    |     <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 17:05:48,231 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:05:48,231 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:05:48,231 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:05:48,231 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:05:48,231 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:05:48,231 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 17:05:48,231 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 17:05:48,231 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:05:48,231 - Routes - INFO - 10. /health                             → GET
2025-08-25 17:05:48,231 - Routes - INFO - 11. /info                               → GET
2025-08-25 17:05:48,231 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 17:05:48,231 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:05:48,231 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 17:05:48,231 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:05:48,231 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 17:05:48,231 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 17:05:48,231 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:05:48,231 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 17:05:48,231 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 17:05:48,231 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:05:48,231 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 17:05:48,231 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 17:05:48,231 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:05:48,231 - Routes - INFO - ================================
2025-08-25 17:05:50,009 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:05:50,009 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:05:50,073 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:05:50,073 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:05:50,073 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:05:50,073 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:05:50,073 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:05:50,073 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:05:50,073 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:05:50,073 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:05:50,073 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:05:50,073 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:05:50,073 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:05:50,073 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:05:50,073 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:05:50,073 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:05:50,073 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:05:50,073 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:05:50,073 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:05:50,073 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:05:50,073 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:05:50,073 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:05:50,073 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:05:50,073 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:05:50,073 - Routes - INFO - /                                   → GET
2025-08-25 17:05:50,073 - Routes - INFO - /health                             → GET
2025-08-25 17:05:50,073 - Routes - INFO - /info                               → GET
2025-08-25 17:05:50,073 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:05:50,073 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:06:18,430 - BibliotecaApp - ERROR - Erro na página inicial: No route exists for name "static" and params "filename".
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 17:06:18,438 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "static" and params "filename".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 12, in top-level template code
    |     <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 17:12:55,911 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:12:55,911 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:12:55,911 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:12:55,911 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:12:55,912 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:12:55,912 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 17:12:55,913 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 17:12:55,913 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:12:55,913 - Routes - INFO - 10. /health                             → GET
2025-08-25 17:12:55,913 - Routes - INFO - 11. /info                               → GET
2025-08-25 17:12:55,913 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 17:12:55,913 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:12:55,913 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 17:12:55,913 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:12:55,913 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 17:12:55,914 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 17:12:55,914 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:12:55,914 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 17:12:55,914 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 17:12:55,914 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:12:55,914 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 17:12:55,914 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 17:12:55,914 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:12:55,914 - Routes - INFO - ================================
2025-08-25 17:12:57,916 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:12:57,917 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:12:57,965 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:12:57,966 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:12:57,966 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:12:57,966 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:12:57,966 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:12:57,966 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:12:57,966 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:12:57,966 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:12:57,966 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:12:57,966 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:12:57,966 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:12:57,966 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:12:57,966 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:12:57,966 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:12:57,967 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:12:57,967 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:12:57,967 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:12:57,967 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:12:57,967 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:12:57,967 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:12:57,967 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:12:57,967 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:12:57,968 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:12:57,968 - Routes - INFO - /                                   → GET
2025-08-25 17:12:57,968 - Routes - INFO - /health                             → GET
2025-08-25 17:12:57,968 - Routes - INFO - /info                               → GET
2025-08-25 17:12:57,968 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:12:57,968 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:13:02,112 - BibliotecaApp - ERROR - Erro na página inicial: No route exists for name "static" and params "filename".
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 104, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 17:13:02,123 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "static" and params "filename".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 12, in top-level template code
    |     <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 137, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 107, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 12, in top-level template code
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "static" and params "filename".
2025-08-25 17:33:29,621 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:33:29,622 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:33:29,622 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:33:29,622 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:33:29,622 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:33:29,622 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 17:33:29,622 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 17:33:29,622 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:33:29,622 - Routes - INFO - 10. /health                             → GET
2025-08-25 17:33:29,622 - Routes - INFO - 11. /info                               → GET
2025-08-25 17:33:29,622 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 17:33:29,623 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:33:29,623 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 17:33:29,623 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:33:29,623 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 17:33:29,623 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 17:33:29,623 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:33:29,623 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 17:33:29,623 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 17:33:29,623 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:33:29,623 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 17:33:29,623 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 17:33:29,623 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:33:29,623 - Routes - INFO - ================================
2025-08-25 17:33:31,578 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:33:31,578 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:33:31,625 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:33:31,625 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:33:31,625 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:33:31,625 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:33:31,625 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:33:31,625 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:33:31,625 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:33:31,625 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:33:31,625 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:33:31,625 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:33:31,625 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:33:31,625 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:33:31,626 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:33:31,626 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:33:31,626 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:33:31,626 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:33:31,626 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:33:31,626 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:33:31,626 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:33:31,626 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:33:31,626 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:33:31,626 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:33:31,626 - Routes - INFO - /                                   → GET
2025-08-25 17:33:31,626 - Routes - INFO - /health                             → GET
2025-08-25 17:33:31,626 - Routes - INFO - /info                               → GET
2025-08-25 17:33:31,626 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:33:31,626 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:37:30,272 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:37:30,272 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:37:30,272 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:37:30,272 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:37:30,273 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:37:30,273 - Routes - INFO -  5. /carrinho/                          → GET
2025-08-25 17:37:30,273 - Routes - INFO -  6. /carrinho/adicionar                 → POST
2025-08-25 17:37:30,273 - Routes - INFO -  7. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:37:30,273 - Routes - INFO - 10. /health                             → GET
2025-08-25 17:37:30,273 - Routes - INFO - 11. /info                               → GET
2025-08-25 17:37:30,273 - Routes - INFO - 12. /livros/livros/                     → GET, POST
2025-08-25 17:37:30,273 - Routes - INFO - 13. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:37:30,273 - Routes - INFO - 15. /pedidos/                           → GET
2025-08-25 17:37:30,273 - Routes - INFO - 16. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:37:30,273 - Routes - INFO - 17. /pedidos/finalizar                  → POST
2025-08-25 17:37:30,273 - Routes - INFO - 18. /pedidos/listar                     → GET
2025-08-25 17:37:30,273 - Routes - INFO - 19. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:37:30,273 - Routes - INFO - 20. /pedidos/status                     → GET
2025-08-25 17:37:30,273 - Routes - INFO - 21. /pedidos/{pedido_id}                → GET
2025-08-25 17:37:30,273 - Routes - INFO - 22. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:37:30,273 - Routes - INFO - 24. /usuarios/cadastrar                 → POST
2025-08-25 17:37:30,273 - Routes - INFO - 25. /usuarios/listar                    → GET
2025-08-25 17:37:30,273 - Routes - INFO - 26. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:37:30,273 - Routes - INFO - ================================
2025-08-25 17:37:32,224 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:37:32,225 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:37:32,276 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:37:32,276 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:37:32,277 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:37:32,277 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:37:32,277 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:37:32,277 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:37:32,277 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:37:32,277 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:37:32,277 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:37:32,277 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:37:32,277 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:37:32,277 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:37:32,277 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:37:32,277 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:37:32,277 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:37:32,277 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:37:32,277 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:37:32,278 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:37:32,278 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:37:32,278 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:37:32,278 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:37:32,278 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:37:32,278 - Routes - INFO - /                                   → GET
2025-08-25 17:37:32,278 - Routes - INFO - /health                             → GET
2025-08-25 17:37:32,279 - Routes - INFO - /info                               → GET
2025-08-25 17:37:32,279 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:37:32,279 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:42:04,459 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 17:42:04,459 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 17:42:06,844 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:42:06,844 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:42:06,885 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:42:06,885 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:42:06,885 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:42:06,885 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:42:06,886 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:42:06,886 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:42:06,886 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:42:06,886 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:42:06,886 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:42:06,886 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:42:06,886 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:42:06,886 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:42:06,886 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:42:06,886 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:42:06,886 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:42:06,886 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:42:06,886 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:42:06,886 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:42:06,886 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:42:06,886 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:42:06,886 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:42:06,886 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:42:06,886 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:42:06,886 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:42:06,886 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:42:06,886 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:42:06,888 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:42:06,888 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:42:06,888 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:42:06,888 - Routes - INFO - /                                   → GET
2025-08-25 17:42:06,888 - Routes - INFO - /health                             → GET
2025-08-25 17:42:06,888 - Routes - INFO - /info                               → GET
2025-08-25 17:42:06,888 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:42:06,888 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:52:05,210 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 17:52:05,211 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 17:52:07,501 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:52:07,502 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:52:07,556 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:52:07,558 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:52:07,558 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:52:07,558 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:52:07,558 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:52:07,558 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:52:07,558 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:52:07,558 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:52:07,558 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:52:07,558 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:52:07,558 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:52:07,558 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:52:07,558 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:52:07,558 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:52:07,558 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:52:07,558 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:52:07,558 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:52:07,559 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:52:07,559 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:52:07,560 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:52:07,560 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:52:07,560 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:52:07,560 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:52:07,560 - Routes - INFO - /                                   → GET
2025-08-25 17:52:07,560 - Routes - INFO - /health                             → GET
2025-08-25 17:52:07,560 - Routes - INFO - /info                               → GET
2025-08-25 17:52:07,560 - Routes - INFO - Total de rotas registradas: 30
2025-08-25 17:52:07,560 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:52:35,780 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 17:52:35,780 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 17:57:00,555 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:57:00,555 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:57:00,555 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:57:00,555 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:57:00,555 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:57:00,555 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 17:57:00,556 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 17:57:00,556 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 17:57:00,556 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 17:57:00,556 - Routes - INFO -  9. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:57:00,556 - Routes - INFO - 12. /health                             → GET
2025-08-25 17:57:00,556 - Routes - INFO - 13. /home                               → GET
2025-08-25 17:57:00,556 - Routes - INFO - 14. /info                               → GET
2025-08-25 17:57:00,556 - Routes - INFO - 15. /livros/livros/                     → GET, POST
2025-08-25 17:57:00,556 - Routes - INFO - 16. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:57:00,556 - Routes - INFO - 18. /pedidos/                           → GET
2025-08-25 17:57:00,556 - Routes - INFO - 19. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:57:00,556 - Routes - INFO - 20. /pedidos/finalizar                  → POST
2025-08-25 17:57:00,556 - Routes - INFO - 21. /pedidos/listar                     → GET
2025-08-25 17:57:00,556 - Routes - INFO - 22. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:57:00,557 - Routes - INFO - 23. /pedidos/status                     → GET
2025-08-25 17:57:00,557 - Routes - INFO - 24. /pedidos/{pedido_id}                → GET
2025-08-25 17:57:00,557 - Routes - INFO - 25. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:57:00,557 - Routes - INFO - 27. /usuarios/cadastrar                 → POST
2025-08-25 17:57:00,557 - Routes - INFO - 28. /usuarios/listar                    → GET
2025-08-25 17:57:00,557 - Routes - INFO - 29. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:57:00,557 - Routes - INFO - ================================
2025-08-25 17:57:02,708 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:57:02,709 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:57:02,748 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:57:02,748 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:57:02,748 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:57:02,748 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:57:02,748 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:57:02,748 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:57:02,748 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:57:02,748 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:57:02,748 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 17:57:02,748 - Routes - INFO - /auth/status                        → GET
2025-08-25 17:57:02,748 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:57:02,748 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:57:02,749 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:57:02,749 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:57:02,749 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:57:02,749 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:57:02,749 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:57:02,749 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:57:02,749 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:57:02,750 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:57:02,750 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:57:02,750 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:57:02,750 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:57:02,750 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:57:02,750 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:57:02,750 - Routes - INFO - /                                   → GET
2025-08-25 17:57:02,750 - Routes - INFO - /home                               → GET
2025-08-25 17:57:02,750 - Routes - INFO - /health                             → GET
2025-08-25 17:57:02,750 - Routes - INFO - /info                               → GET
2025-08-25 17:57:02,750 - Routes - INFO - Total de rotas registradas: 33
2025-08-25 17:57:02,750 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:57:16,931 - BibliotecaApp - ERROR - Erro na página inicial: cannot access local variable 'RedirectResponse' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 122, in home
    return RedirectResponse(url="/auth/login", status_code=302)
           ^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'RedirectResponse' where it is not associated with a value
2025-08-25 17:58:44,739 - Routes - INFO - === DEBUG MANUAL DAS ROTAS ===
2025-08-25 17:58:44,740 - Routes - INFO -  1. /                                   → GET
2025-08-25 17:58:44,740 - Routes - INFO -  2. /auth/cadastro                      → GET, POST
2025-08-25 17:58:44,740 - Routes - INFO -  3. /auth/login                         → GET, POST
2025-08-25 17:58:44,740 - Routes - INFO -  4. /auth/logout                        → GET
2025-08-25 17:58:44,740 - Routes - INFO -  5. /auth/perfil                        → GET
2025-08-25 17:58:44,740 - Routes - INFO -  6. /auth/status                        → GET
2025-08-25 17:58:44,740 - Routes - INFO -  7. /carrinho/                          → GET
2025-08-25 17:58:44,740 - Routes - INFO -  8. /carrinho/adicionar                 → POST
2025-08-25 17:58:44,740 - Routes - INFO -  9. /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:58:44,740 - Routes - INFO - 12. /health                             → GET
2025-08-25 17:58:44,740 - Routes - INFO - 13. /home                               → GET
2025-08-25 17:58:44,740 - Routes - INFO - 14. /info                               → GET
2025-08-25 17:58:44,740 - Routes - INFO - 15. /livros/livros/                     → GET, POST
2025-08-25 17:58:44,740 - Routes - INFO - 16. /livros/livros/{livro_id}           → DELETE, GET, PUT
2025-08-25 17:58:44,740 - Routes - INFO - 18. /pedidos/                           → GET
2025-08-25 17:58:44,740 - Routes - INFO - 19. /pedidos/estatisticas/usuario       → GET
2025-08-25 17:58:44,740 - Routes - INFO - 20. /pedidos/finalizar                  → POST
2025-08-25 17:58:44,740 - Routes - INFO - 21. /pedidos/listar                     → GET
2025-08-25 17:58:44,740 - Routes - INFO - 22. /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:58:44,740 - Routes - INFO - 23. /pedidos/status                     → GET
2025-08-25 17:58:44,740 - Routes - INFO - 24. /pedidos/{pedido_id}                → GET
2025-08-25 17:58:44,740 - Routes - INFO - 25. /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:58:44,741 - Routes - INFO - 27. /usuarios/cadastrar                 → POST
2025-08-25 17:58:44,741 - Routes - INFO - 28. /usuarios/listar                    → GET
2025-08-25 17:58:44,741 - Routes - INFO - 29. /usuarios/perfil                    → DELETE, GET, PUT
2025-08-25 17:58:44,741 - Routes - INFO - ================================
2025-08-25 17:58:45,699 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 17:58:45,699 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 17:58:45,744 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 17:58:45,744 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 17:58:45,745 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 17:58:45,745 - Routes - INFO - /auth/login                         → GET
2025-08-25 17:58:45,745 - Routes - INFO - /auth/login                         → POST
2025-08-25 17:58:45,745 - Routes - INFO - /auth/logout                        → GET
2025-08-25 17:58:45,745 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 17:58:45,745 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 17:58:45,745 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 17:58:45,745 - Routes - INFO - /auth/status                        → GET
2025-08-25 17:58:45,745 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 17:58:45,745 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 17:58:45,745 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 17:58:45,745 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 17:58:45,745 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 17:58:45,745 - Routes - INFO - /carrinho/                          → GET
2025-08-25 17:58:45,745 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 17:58:45,745 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/                           → GET
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 17:58:45,745 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 17:58:45,745 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 17:58:45,745 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 17:58:45,745 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 17:58:45,745 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 17:58:45,745 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 17:58:45,745 - Routes - INFO - /                                   → GET
2025-08-25 17:58:45,745 - Routes - INFO - /home                               → GET
2025-08-25 17:58:45,745 - Routes - INFO - /health                             → GET
2025-08-25 17:58:45,745 - Routes - INFO - /info                               → GET
2025-08-25 17:58:45,745 - Routes - INFO - Total de rotas registradas: 33
2025-08-25 17:58:45,745 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 17:59:18,943 - AuthRouter - INFO - Login realizado: thalessilva92@gmail.com
2025-08-25 18:07:13,443 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-25 18:07:13,443 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-25 18:07:14,538 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-25 18:07:14,539 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-25 18:07:14,591 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-25 18:07:14,591 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-25 18:07:14,591 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-25 18:07:14,591 - Routes - INFO - /auth/login                         → GET
2025-08-25 18:07:14,591 - Routes - INFO - /auth/login                         → POST
2025-08-25 18:07:14,592 - Routes - INFO - /auth/logout                        → GET
2025-08-25 18:07:14,592 - Routes - INFO - /auth/cadastro                      → GET
2025-08-25 18:07:14,592 - Routes - INFO - /auth/cadastro                      → POST
2025-08-25 18:07:14,592 - Routes - INFO - /auth/perfil                        → GET
2025-08-25 18:07:14,592 - Routes - INFO - /auth/status                        → GET
2025-08-25 18:07:14,592 - Routes - INFO - /livros/livros/                     → GET
2025-08-25 18:07:14,592 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-25 18:07:14,592 - Routes - INFO - /livros/livros/                     → POST
2025-08-25 18:07:14,592 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-25 18:07:14,592 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-25 18:07:14,592 - Routes - INFO - /carrinho/                          → GET
2025-08-25 18:07:14,592 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-25 18:07:14,592 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/                           → GET
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/listar                     → GET
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-25 18:07:14,592 - Routes - INFO - /pedidos/status                     → GET
2025-08-25 18:07:14,592 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-25 18:07:14,592 - Routes - INFO - /usuarios/listar                    → GET
2025-08-25 18:07:14,592 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-25 18:07:14,592 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-25 18:07:14,592 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-25 18:07:14,592 - Routes - INFO - /                                   → GET
2025-08-25 18:07:14,592 - Routes - INFO - /home                               → GET
2025-08-25 18:07:14,592 - Routes - INFO - /health                             → GET
2025-08-25 18:07:14,592 - Routes - INFO - /info                               → GET
2025-08-25 18:07:14,592 - Routes - INFO - Total de rotas registradas: 33
2025-08-25 18:07:14,592 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-25 18:12:45,183 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 10:17:17,081 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 10:17:17,081 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 10:17:17,206 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 10:17:17,206 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-26 10:17:17,207 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-26 10:17:17,207 - Routes - INFO - /auth/login                         → GET
2025-08-26 10:17:17,207 - Routes - INFO - /auth/login                         → POST
2025-08-26 10:17:17,207 - Routes - INFO - /auth/logout                        → GET
2025-08-26 10:17:17,207 - Routes - INFO - /auth/cadastro                      → GET
2025-08-26 10:17:17,207 - Routes - INFO - /auth/cadastro                      → POST
2025-08-26 10:17:17,207 - Routes - INFO - /auth/perfil                        → GET
2025-08-26 10:17:17,207 - Routes - INFO - /auth/status                        → GET
2025-08-26 10:17:17,209 - Routes - INFO - /livros/livros/                     → GET
2025-08-26 10:17:17,209 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-26 10:17:17,209 - Routes - INFO - /livros/livros/                     → POST
2025-08-26 10:17:17,209 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-26 10:17:17,209 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-26 10:17:17,209 - Routes - INFO - /carrinho/                          → GET
2025-08-26 10:17:17,209 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-26 10:17:17,209 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-26 10:17:17,209 - Routes - INFO - /pedidos/                           → GET
2025-08-26 10:17:17,209 - Routes - INFO - /pedidos/listar                     → GET
2025-08-26 10:17:17,209 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-26 10:17:17,209 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-26 10:17:17,209 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-26 10:17:17,211 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-26 10:17:17,211 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-26 10:17:17,211 - Routes - INFO - /pedidos/status                     → GET
2025-08-26 10:17:17,211 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-26 10:17:17,211 - Routes - INFO - /usuarios/listar                    → GET
2025-08-26 10:17:17,211 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-26 10:17:17,212 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-26 10:17:17,212 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-26 10:17:17,212 - Routes - INFO - /                                   → GET
2025-08-26 10:17:17,212 - Routes - INFO - /home                               → GET
2025-08-26 10:17:17,212 - Routes - INFO - /health                             → GET
2025-08-26 10:17:17,213 - Routes - INFO - /info                               → GET
2025-08-26 10:17:17,213 - Routes - INFO - Total de rotas registradas: 33
2025-08-26 10:17:17,213 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-26 10:17:29,051 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 10:17:32,774 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 10:17:34,224 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 10:17:50,696 - AuthRouter - INFO - Login realizado: thalessilva92@gmail.com
2025-08-26 10:17:50,712 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,738 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,759 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,779 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,791 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,823 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,843 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,864 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,889 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:50,911 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:51,969 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,000 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,033 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,065 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,093 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,120 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,146 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,172 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,203 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:52,230 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,770 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,791 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,824 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,846 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,875 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,895 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,923 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,947 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,973 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:17:55,991 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 10:34:43,437 - BibliotecaApp - INFO - === ENCERRANDO APLICAÇÃO ===
2025-08-26 10:34:43,437 - BibliotecaApp - INFO - 👋 Aplicação encerrada com sucesso
2025-08-26 11:05:31,029 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 11:05:31,029 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 11:05:31,081 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 11:05:31,081 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-26 11:05:31,081 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-26 11:05:31,081 - Routes - INFO - /auth/login                         → GET
2025-08-26 11:05:31,081 - Routes - INFO - /auth/login                         → POST
2025-08-26 11:05:31,081 - Routes - INFO - /auth/logout                        → GET
2025-08-26 11:05:31,082 - Routes - INFO - /auth/cadastro                      → GET
2025-08-26 11:05:31,082 - Routes - INFO - /auth/cadastro                      → POST
2025-08-26 11:05:31,082 - Routes - INFO - /auth/perfil                        → GET
2025-08-26 11:05:31,082 - Routes - INFO - /auth/status                        → GET
2025-08-26 11:05:31,082 - Routes - INFO - /livros/livros/                     → GET
2025-08-26 11:05:31,082 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-26 11:05:31,082 - Routes - INFO - /livros/livros/                     → POST
2025-08-26 11:05:31,082 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-26 11:05:31,082 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-26 11:05:31,082 - Routes - INFO - /carrinho/                          → GET
2025-08-26 11:05:31,082 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-26 11:05:31,082 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/                           → GET
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/listar                     → GET
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-26 11:05:31,082 - Routes - INFO - /pedidos/status                     → GET
2025-08-26 11:05:31,082 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-26 11:05:31,082 - Routes - INFO - /usuarios/listar                    → GET
2025-08-26 11:05:31,082 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-26 11:05:31,082 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-26 11:05:31,082 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-26 11:05:31,082 - Routes - INFO - /                                   → GET
2025-08-26 11:05:31,082 - Routes - INFO - /home                               → GET
2025-08-26 11:05:31,082 - Routes - INFO - /health                             → GET
2025-08-26 11:05:31,082 - Routes - INFO - /info                               → GET
2025-08-26 11:05:31,082 - Routes - INFO - Total de rotas registradas: 33
2025-08-26 11:05:31,082 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-26 12:41:53,872 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 12:41:53,872 - Database - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 12:41:53,914 - Database - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 12:41:53,914 - Routes - INFO - === MAPEAMENTO DE ROTAS ===
2025-08-26 12:41:53,914 - Routes - INFO - /docs/oauth2-redirect               → GET, HEAD
2025-08-26 12:41:53,914 - Routes - INFO - /auth/login                         → GET
2025-08-26 12:41:53,914 - Routes - INFO - /auth/login                         → POST
2025-08-26 12:41:53,914 - Routes - INFO - /auth/logout                        → GET
2025-08-26 12:41:53,914 - Routes - INFO - /auth/cadastro                      → GET
2025-08-26 12:41:53,914 - Routes - INFO - /auth/cadastro                      → POST
2025-08-26 12:41:53,914 - Routes - INFO - /auth/perfil                        → GET
2025-08-26 12:41:53,914 - Routes - INFO - /auth/status                        → GET
2025-08-26 12:41:53,914 - Routes - INFO - /livros/livros/                     → GET
2025-08-26 12:41:53,914 - Routes - INFO - /livros/livros/{livro_id}           → GET
2025-08-26 12:41:53,914 - Routes - INFO - /livros/livros/                     → POST
2025-08-26 12:41:53,914 - Routes - INFO - /livros/livros/{livro_id}           → PUT
2025-08-26 12:41:53,914 - Routes - INFO - /livros/livros/{livro_id}           → DELETE
2025-08-26 12:41:53,914 - Routes - INFO - /carrinho/                          → GET
2025-08-26 12:41:53,914 - Routes - INFO - /carrinho/adicionar                 → POST
2025-08-26 12:41:53,914 - Routes - INFO - /carrinho/remover/{livro_id}        → DELETE
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/                           → GET
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/listar                     → GET
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/{pedido_id}                → GET
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/finalizar                  → POST
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/{pedido_id}/status         → PUT
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/estatisticas/usuario       → GET
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/recentes/{quantidade}      → GET
2025-08-26 12:41:53,914 - Routes - INFO - /pedidos/status                     → GET
2025-08-26 12:41:53,914 - Routes - INFO - /usuarios/cadastrar                 → POST
2025-08-26 12:41:53,914 - Routes - INFO - /usuarios/listar                    → GET
2025-08-26 12:41:53,914 - Routes - INFO - /usuarios/perfil                    → GET
2025-08-26 12:41:53,914 - Routes - INFO - /usuarios/perfil                    → PUT
2025-08-26 12:41:53,914 - Routes - INFO - /usuarios/perfil                    → DELETE
2025-08-26 12:41:53,914 - Routes - INFO - /                                   → GET
2025-08-26 12:41:53,914 - Routes - INFO - /home                               → GET
2025-08-26 12:41:53,914 - Routes - INFO - /health                             → GET
2025-08-26 12:41:53,914 - Routes - INFO - /info                               → GET
2025-08-26 12:41:53,914 - Routes - INFO - Total de rotas registradas: 33
2025-08-26 12:41:53,914 - BibliotecaApp - INFO - ✅ Aplicação iniciada com sucesso!
2025-08-26 12:42:14,144 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 12:42:16,061 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 12:42:16,765 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 12:42:17,277 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    return render_template_with_user(templates, "index.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 13, in template
    <p class="text-blue-600 font-bold mb-4">{{ livro.preco | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-26 12:43:43,188 - AuthRouter - INFO - Login realizado: thalessilva92@gmail.com
2025-08-26 12:43:43,213 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,242 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,274 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,305 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,335 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,365 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,402 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,435 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,478 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:43,515 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,572 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,617 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,657 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,697 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,732 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,765 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,798 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,833 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,868 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:44,900 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:49,975 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,017 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,064 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,100 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,131 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,164 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,201 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,236 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,272 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:43:50,311 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,357 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,383 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,413 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,438 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,469 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,486 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,521 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,547 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,571 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:44:20,597 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,668 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,708 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,740 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,767 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,793 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,820 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,848 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,877 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,907 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:45:20,937 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:20,993 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,031 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,067 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,099 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,129 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,157 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,186 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,213 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,239 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 12:50:21,268 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,354 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,382 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,410 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,435 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,463 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,486 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,509 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,536 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,562 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:00:21,587 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,632 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,665 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,696 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,728 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,758 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,785 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,812 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,839 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,870 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 13:30:21,904 - BibliotecaApp - ERROR - Erro no dashboard: 'dashboard.html' not found in search path: 'app/templates'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 131, in dashboard_home
    return render_template_with_user(templates, "dashboard.html", request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 36, in render_template_with_user
    return templates.TemplateResponse(template_name, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 209, in get_source
    raise TemplateNotFound(
jinja2.exceptions.TemplateNotFound: 'dashboard.html' not found in search path: 'app/templates'
2025-08-26 14:10:04,140 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:10:04,145 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:10:04,187 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:10:18,348 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:18,370 - BibliotecaApp - INFO - GET / → 500 (0.022s)
2025-08-26 14:10:20,453 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:20,456 - BibliotecaApp - INFO - GET / → 500 (0.004s)
2025-08-26 14:10:21,158 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:21,160 - BibliotecaApp - INFO - GET / → 500 (0.003s)
2025-08-26 14:10:21,613 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:21,615 - BibliotecaApp - INFO - GET / → 500 (0.002s)
2025-08-26 14:10:21,794 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:21,796 - BibliotecaApp - INFO - GET / → 500 (0.002s)
2025-08-26 14:10:21,946 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:10:21,946 - BibliotecaApp - INFO - GET / → 500 (0.000s)
2025-08-26 14:12:22,628 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:12:28,420 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:12:28,420 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:12:28,462 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:15:01,013 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:15:03,355 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:15:03,355 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:15:03,400 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:34:33,919 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:34:33,919 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:34:33,953 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:34:40,882 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:34:40,911 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "livros_router:listar_livros" and params "".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 30, in top-level template code
    |     <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 30, in top-level template code
    <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
2025-08-26 14:36:30,376 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:36:39,519 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:36:39,519 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:36:39,579 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:36:41,930 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:36:41,954 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "livros_router:listar_livros" and params "".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 30, in top-level template code
    |     <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 30, in top-level template code
    <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
2025-08-26 14:40:35,640 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:43:03,726 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:43:03,733 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:43:03,782 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:43:06,443 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:43:06,481 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "livros_router:listar_livros" and params "".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 30, in top-level template code
    |     <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 30, in top-level template code
    <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
2025-08-26 14:48:07,273 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:48:07,273 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:48:07,315 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:48:10,115 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 14:48:10,134 - BibliotecaApp - ERROR - Erro interno do servidor: No route exists for name "livros_router:listar_livros" and params "".
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\erro.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 30, in top-level template code
    |     <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    |     return request.url_for(name, **path_params)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    |     url_path = url_path_provider.url_path_for(name, **path_params)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    |     raise NoMatchFound(name, path_params)
    | starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\erro.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 30, in top-level template code
    <a class="nav-link" href="{{ url_for('livros_router:listar_livros') }}">Livros</a>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 126, in url_for
    return request.url_for(name, **path_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\requests.py", line 186, in url_for
    url_path = url_path_provider.url_path_for(name, **path_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 661, in url_path_for
    raise NoMatchFound(name, path_params)
starlette.routing.NoMatchFound: No route exists for name "livros_router:listar_livros" and params "".
2025-08-26 14:58:03,033 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:58:05,474 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:58:05,474 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:58:05,529 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:58:35,698 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:58:38,224 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:58:38,224 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:58:38,275 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 14:58:51,964 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 14:58:54,612 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 14:58:54,613 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 14:58:54,659 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 15:02:02,676 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-26 15:02:11,619 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-26 15:02:11,619 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-26 15:02:11,665 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-26 15:02:15,258 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-26 15:02:15,277 - BibliotecaApp - INFO - GET / → 500 (0.019s)
2025-08-26 15:02:19,267 - BibliotecaApp - INFO - GET /login → 404 (0.008s)
2025-08-26 15:02:24,999 - BibliotecaApp - INFO - GET /api/auth/login → 404 (0.002s)
2025-08-26 15:02:27,226 - BibliotecaApp - INFO - GET /api/auth/cadastro → 404 (0.003s)
2025-08-26 15:02:29,971 - BibliotecaApp - INFO - GET /api/livros → 404 (0.002s)
2025-08-26 15:03:47,938 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:00:31,048 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:00:31,049 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:00:35,137 - BibliotecaApp - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-27 10:02:46,643 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:02:46,645 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:02:46,793 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:02:58,455 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-27 10:02:58,549 - BibliotecaApp - INFO - GET / → 500 (0.095s)
2025-08-27 10:02:58,693 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.011s)
2025-08-27 10:04:12,603 - BibliotecaApp - INFO - GET /api/auth/cadastro → 404 (0.004s)
2025-08-27 10:04:14,195 - BibliotecaApp - INFO - GET /api/auth/login → 404 (0.001s)
2025-08-27 10:04:15,031 - BibliotecaApp - INFO - GET /api/carrinho → 404 (0.001s)
2025-08-27 10:04:15,760 - BibliotecaApp - INFO - GET /api/livros → 404 (0.001s)
2025-08-27 10:04:16,514 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-27 10:04:16,516 - BibliotecaApp - INFO - GET / → 500 (0.004s)
2025-08-27 10:04:18,806 - BibliotecaApp - INFO - GET /login → 404 (0.003s)
2025-08-27 10:04:19,914 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-27 10:04:19,920 - BibliotecaApp - INFO - GET / → 500 (0.006s)
2025-08-27 10:04:33,496 - BibliotecaApp - INFO - GET /api/livros → 404 (0.001s)
2025-08-27 10:12:39,053 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:12:41,953 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:12:41,954 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:12:41,999 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:14:24,374 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:15:13,014 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:15:13,014 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:15:13,054 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:15:17,451 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-27 10:15:17,472 - BibliotecaApp - INFO - GET / → 500 (0.022s)
2025-08-27 10:15:26,418 - BibliotecaApp - INFO - GET /api/auth/login → 404 (0.006s)
2025-08-27 10:15:30,931 - BibliotecaApp - ERROR - Erro na página inicial: get_usuario_context() missing 1 required positional argument: 'db'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 112, in home
    context = get_usuario_context(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_usuario_context() missing 1 required positional argument: 'db'
2025-08-27 10:15:30,936 - BibliotecaApp - INFO - GET / → 500 (0.006s)
2025-08-27 10:21:49,138 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:21:56,340 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:21:56,340 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:21:56,398 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:22:01,551 - BibliotecaApp - INFO - GET / → 200 (0.023s)
2025-08-27 10:22:05,690 - BibliotecaApp - INFO - GET /api/livros → 404 (0.006s)
2025-08-27 10:22:07,710 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 10:22:09,103 - BibliotecaApp - INFO - GET /api/auth/login → 404 (0.001s)
2025-08-27 10:22:10,168 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 10:22:13,545 - BibliotecaApp - INFO - GET /api/auth/cadastro → 404 (0.002s)
2025-08-27 10:22:40,066 - BibliotecaApp - INFO - GET /api/livros → 404 (0.001s)
2025-08-27 10:23:54,365 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:23:56,942 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:23:56,942 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:23:56,986 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:24:09,432 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:24:09,432 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:24:09,498 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:24:13,169 - BibliotecaApp - INFO - GET / → 200 (0.020s)
2025-08-27 10:24:17,231 - BibliotecaApp - INFO - GET /api/livros → 307 (0.001s)
2025-08-27 10:24:17,328 - BibliotecaApp - INFO - GET /api/livros/ → 200 (0.093s)
2025-08-27 10:24:17,361 - BibliotecaApp - INFO - GET /api/livros/string → 422 (0.008s)
2025-08-27 10:24:26,263 - BibliotecaApp - ERROR - Erro interno do servidor: maximum recursion depth exceeded while calling a Python object
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    |     solved = await run_in_threadpool(call, **solved_result.values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    |     return get_current_user(request, db)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    |     return get_current_user(request, db)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    |     return get_current_user(request, db)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   [Previous line repeated 989 more times]
    |   File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 44, in get_current_user
    |     def get_current_user(request: Request, db: Session = Depends(get_db)) -> Usuario | None:
    |     
    | RecursionError: maximum recursion depth exceeded while calling a Python object
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    return get_current_user(request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    return get_current_user(request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 49, in get_current_user
    return get_current_user(request, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  [Previous line repeated 989 more times]
  File "C:\Projetos\Bibliotec2.1\app\utils\auth.py", line 44, in get_current_user
    def get_current_user(request: Request, db: Session = Depends(get_db)) -> Usuario | None:
    
RecursionError: maximum recursion depth exceeded while calling a Python object
2025-08-27 10:24:55,172 - AuthRouter - ERROR - Erro ao carregar página de cadastro: 'logado'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 94, in mostrar_formulario_registro
    if context["logado"]:
       ~~~~~~~^^^^^^^^^^
KeyError: 'logado'
2025-08-27 10:24:55,180 - BibliotecaApp - INFO - GET /api/auth/cadastro → 500 (0.009s)
2025-08-27 10:24:57,786 - AuthRouter - ERROR - Erro ao carregar página de login: 'logado'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 20, in mostrar_formulario_login
    if context["logado"]:
       ~~~~~~~^^^^^^^^^^
KeyError: 'logado'
2025-08-27 10:24:57,789 - BibliotecaApp - INFO - GET /api/auth/login → 500 (0.004s)
2025-08-27 10:25:17,354 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:25:22,238 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:25:22,239 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:25:22,281 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:25:25,045 - BibliotecaApp - INFO - GET /login → 404 (0.018s)
2025-08-27 10:49:53,023 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:49:58,808 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:49:58,809 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:49:58,873 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 10:50:03,112 - BibliotecaApp - INFO - GET / → 200 (0.020s)
2025-08-27 10:50:10,488 - BibliotecaApp - INFO - GET /api/livros → 307 (0.001s)
2025-08-27 10:50:10,589 - BibliotecaApp - INFO - GET /api/livros/ → 200 (0.096s)
2025-08-27 10:50:10,613 - BibliotecaApp - INFO - GET /api/livros/string → 422 (0.006s)
2025-08-27 10:59:54,119 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 10:59:57,470 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 10:59:57,470 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 10:59:57,532 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:02:31,722 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:02:34,628 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:02:34,628 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:02:34,667 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:05:41,835 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:05:44,392 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:05:44,392 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:05:44,446 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:06:14,584 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:06:17,402 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:06:17,403 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:06:17,442 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:11:15,401 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:13:14,587 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:13:14,588 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:13:14,629 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:24:54,480 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:24:57,368 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:24:57,368 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:24:57,411 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:25:25,486 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:25:28,028 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:25:28,028 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:25:28,091 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:28:35,494 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:29:33,464 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:29:33,465 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:29:33,503 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:29:39,649 - BibliotecaApp - INFO - GET / → 200 (0.022s)
2025-08-27 11:29:39,797 - BibliotecaApp - INFO - GET /static/css/style.css → 200 (0.124s)
2025-08-27 11:29:42,608 - BibliotecaApp - INFO - GET /api/livros → 307 (0.001s)
2025-08-27 11:29:42,664 - BibliotecaApp - ERROR - Erro interno do servidor: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 25, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 16, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-27 11:31:32,562 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:31:32,563 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:31:32,621 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:31:36,460 - BibliotecaApp - INFO - GET / → 200 (0.020s)
2025-08-27 11:31:39,709 - BibliotecaApp - INFO - GET /api/livros → 307 (0.001s)
2025-08-27 11:31:39,789 - BibliotecaApp - ERROR - Erro interno do servidor: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 25, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 16, in listar_livros
    return self.repo.listar()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\repositories\livro_repository.py", line 11, in listar
    return self.db.query(Livro).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-27 11:33:55,892 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:33:58,603 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:33:58,603 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:33:58,641 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:34:04,325 - BibliotecaApp - INFO - GET / → 200 (0.022s)
2025-08-27 11:34:05,992 - BibliotecaApp - INFO - GET /api/livros → 307 (0.000s)
2025-08-27 11:34:06,043 - BibliotecaApp - ERROR - Erro interno do servidor: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 100, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 25, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 43, in listar_livros
    return query.offset(skip).limit(limite).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 100, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-27 11:36:42,260 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:36:42,261 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:36:42,302 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:36:45,323 - BibliotecaApp - INFO - GET / → 200 (0.020s)
2025-08-27 11:36:47,382 - BibliotecaApp - INFO - GET /api/livros → 307 (0.000s)
2025-08-27 11:36:47,426 - BibliotecaApp - ERROR - Erro interno do servidor: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 100, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 25, in pagina_livros
    livros = service.listar_livros()
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\livro_service.py", line 45, in listar_livros
    return query.offset(skip).limit(limite).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column livros.slug does not exist
LINE 1: ...biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca...
                                                             ^

[SQL: SELECT biblioteca.livros.id AS biblioteca_livros_id, biblioteca.livros.titulo AS biblioteca_livros_titulo, biblioteca.livros.autor AS biblioteca_livros_autor, biblioteca.livros.ano AS biblioteca_livros_ano, biblioteca.livros.preco AS biblioteca_livros_preco, biblioteca.livros.estoque AS biblioteca_livros_estoque, biblioteca.livros.capa_url AS biblioteca_livros_capa_url, biblioteca.livros.data_criacao AS biblioteca_livros_data_criacao, biblioteca.livros.data_atualizacao AS biblioteca_livros_data_atualizacao, biblioteca.livros.isbn AS biblioteca_livros_isbn, biblioteca.livros.slug AS biblioteca_livros_slug 
FROM biblioteca.livros 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 100, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-27 11:39:45,053 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 11:39:50,653 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 11:39:50,653 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 11:39:50,694 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 11:39:55,895 - BibliotecaApp - INFO - GET / → 200 (0.017s)
2025-08-27 11:39:57,517 - BibliotecaApp - INFO - GET /api/livros → 307 (0.002s)
2025-08-27 11:39:57,586 - BibliotecaApp - INFO - GET /api/livros/ → 200 (0.064s)
2025-08-27 11:39:57,612 - BibliotecaApp - INFO - GET /api/livros/string → 422 (0.002s)
2025-08-27 11:40:17,942 - BibliotecaApp - INFO - GET / → 200 (0.004s)
2025-08-27 11:40:19,709 - AuthRouter - ERROR - Erro ao carregar página de login: 'logado'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 20, in mostrar_formulario_login
    if context["logado"]:
       ~~~~~~~^^^^^^^^^^
KeyError: 'logado'
2025-08-27 11:40:19,752 - BibliotecaApp - INFO - GET /api/auth/login → 500 (0.047s)
2025-08-27 11:44:48,776 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 13:25:13,458 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 13:25:13,458 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 13:25:13,514 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 13:25:22,445 - BibliotecaApp - INFO - GET / → 200 (0.026s)
2025-08-27 13:25:31,015 - BibliotecaApp - INFO - GET /auth/login → 404 (0.007s)
2025-08-27 13:25:32,965 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 13:25:33,862 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.002s)
2025-08-27 13:25:35,278 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 13:25:36,201 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-08-27 13:25:37,064 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.000s)
2025-08-27 13:27:48,603 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 13:28:36,876 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 13:28:36,876 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 13:28:36,922 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 13:28:39,704 - BibliotecaApp - INFO - GET / → 200 (0.027s)
2025-08-27 13:28:42,964 - BibliotecaApp - INFO - GET /auth/login → 404 (0.006s)
2025-08-27 13:28:47,367 - BibliotecaApp - INFO - GET /api/livros → 307 (0.002s)
2025-08-27 13:28:47,496 - BibliotecaApp - INFO - GET /api/livros/ → 200 (0.123s)
2025-08-27 13:28:47,517 - BibliotecaApp - INFO - GET /api/livros/string → 422 (0.009s)
2025-08-27 13:28:53,795 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.000s)
2025-08-27 13:28:57,591 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 13:28:58,546 - BibliotecaApp - INFO - GET /auth/login → 404 (0.003s)
2025-08-27 13:36:14,156 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 13:36:16,746 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 13:36:16,746 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 13:36:16,787 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 13:36:54,044 - BibliotecaApp - INFO - GET / → 200 (0.022s)
2025-08-27 13:36:57,219 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.003s)
2025-08-27 13:37:04,672 - BibliotecaApp - INFO - GET /auth/login → 404 (0.005s)
2025-08-27 13:37:11,208 - BibliotecaApp - INFO - GET /.well-known/appspecific/com.chrome.devtools.json → 404 (0.000s)
2025-08-27 14:04:21,593 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:04:21,593 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:04:21,632 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:04:31,885 - BibliotecaApp - INFO - GET /docs → 200 (0.009s)
2025-08-27 14:04:32,042 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.053s)
2025-08-27 14:04:37,298 - BibliotecaApp - INFO - GET / → 200 (0.036s)
2025-08-27 14:04:39,690 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:04:40,723 - BibliotecaApp - INFO - GET /auth/login → 404 (0.004s)
2025-08-27 14:04:46,058 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.001s)
2025-08-27 14:04:48,435 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:04:49,362 - BibliotecaApp - INFO - GET /auth/login → 404 (0.001s)
2025-08-27 14:04:50,485 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 14:04:51,272 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.001s)
2025-08-27 14:07:02,996 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:07:19,052 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:07:19,052 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:07:23,669 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:07:23,670 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:07:23,711 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:07:30,980 - BibliotecaApp - INFO - GET / → 200 (0.025s)
2025-08-27 14:07:33,474 - BibliotecaApp - INFO - GET /auth/login → 200 (0.021s)
2025-08-27 14:07:37,520 - BibliotecaApp - INFO - POST /auth/login → 302 (0.393s)
2025-08-27 14:07:37,526 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:07:44,605 - BibliotecaApp - INFO - GET /auth/login → 200 (0.011s)
2025-08-27 14:07:49,367 - BibliotecaApp - INFO - POST /auth/login → 302 (0.232s)
2025-08-27 14:07:49,373 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 14:07:53,668 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.012s)
2025-08-27 14:08:07,149 - BibliotecaApp - INFO - POST /auth/cadastro → 400 (0.019s)
2025-08-27 14:08:21,225 - BibliotecaApp - ERROR - Erro interno do servidor: "UsuarioCreate" object has no field "senha_hash"
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 59, in processar_cadastro
    |     usuario = auth_service.registrar_usuario(nome, email, senha, confirmar_senha)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 29, in registrar_usuario
    |     return self.usuario_service.registrar(usuario_data)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 24, in registrar
    |     usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    |     ^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    |     elif (setattr_handler := self._setattr_handler(name, value)) is not None:
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    |     raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
    | ValueError: "UsuarioCreate" object has no field "senha_hash"
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 59, in processar_cadastro
    usuario = auth_service.registrar_usuario(nome, email, senha, confirmar_senha)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 29, in registrar_usuario
    return self.usuario_service.registrar(usuario_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 24, in registrar
    usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    elif (setattr_handler := self._setattr_handler(name, value)) is not None:
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
ValueError: "UsuarioCreate" object has no field "senha_hash"
2025-08-27 14:08:39,401 - BibliotecaApp - INFO - GET /auth/login → 200 (0.009s)
2025-08-27 14:08:41,847 - BibliotecaApp - INFO - POST /auth/login → 302 (0.248s)
2025-08-27 14:08:41,852 - BibliotecaApp - INFO - GET / → 200 (0.000s)
2025-08-27 14:09:29,080 - BibliotecaApp - INFO - GET /auth/login → 200 (0.010s)
2025-08-27 14:09:32,005 - BibliotecaApp - INFO - POST /auth/login → 302 (0.244s)
2025-08-27 14:09:32,012 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 14:09:46,439 - BibliotecaApp - INFO - GET /auth/login → 200 (0.007s)
2025-08-27 14:09:50,374 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.003s)
2025-08-27 14:09:50,380 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 14:09:52,210 - BibliotecaApp - INFO - GET /auth/login → 200 (0.005s)
2025-08-27 14:09:55,261 - BibliotecaApp - INFO - POST /auth/login → 302 (0.243s)
2025-08-27 14:09:55,268 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:09:57,344 - BibliotecaApp - INFO - GET /auth/login → 200 (0.009s)
2025-08-27 14:09:59,743 - BibliotecaApp - INFO - GET /pedidos → 307 (0.001s)
2025-08-27 14:09:59,798 - PedidoRouter - ERROR - Erro ao carregar página de pedidos: 'None' has no attribute 'email'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 50, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\pedido.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\pedido.html", line 18, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\pedido_router.py", line 27, in pagina_pedidos
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\pedido.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\pedido.html", line 18, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 14:09:59,818 - BibliotecaApp - INFO - GET /pedidos/ → 500 (0.071s)
2025-08-27 14:10:01,393 - BibliotecaApp - INFO - GET /carrinho → 307 (0.002s)
2025-08-27 14:10:01,423 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 50, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-27 14:10:01,440 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.042s)
2025-08-27 14:10:03,517 - BibliotecaApp - INFO - GET /login → 404 (0.006s)
2025-08-27 14:10:05,506 - BibliotecaApp - INFO - GET /auth/login → 200 (0.008s)
2025-08-27 14:10:08,304 - BibliotecaApp - INFO - POST /auth/login → 302 (0.224s)
2025-08-27 14:10:08,312 - BibliotecaApp - INFO - GET / → 200 (0.004s)
2025-08-27 14:10:09,930 - BibliotecaApp - INFO - GET /auth/login → 200 (0.009s)
2025-08-27 14:11:46,175 - BibliotecaApp - INFO - GET /pedidos → 307 (0.001s)
2025-08-27 14:11:46,195 - PedidoRouter - ERROR - Erro ao carregar página de pedidos: 'None' has no attribute 'email'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 50, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\pedido.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\pedido.html", line 18, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\pedido_router.py", line 27, in pagina_pedidos
    return render_template_with_user(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\pedido.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\pedido.html", line 18, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 14:11:46,200 - BibliotecaApp - INFO - GET /pedidos/ → 500 (0.017s)
2025-08-27 14:11:56,812 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:11:57,774 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-08-27 14:11:57,832 - BibliotecaApp - INFO - GET /livros/ → 200 (0.053s)
2025-08-27 14:11:57,857 - BibliotecaApp - INFO - GET /livros/string → 422 (0.003s)
2025-08-27 14:11:59,429 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.003s)
2025-08-27 14:19:07,958 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:19:10,344 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:19:10,344 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:19:10,408 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:19:38,479 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:19:41,386 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:19:41,386 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:19:41,443 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:22:35,954 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:22:38,433 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:22:38,434 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:22:38,480 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:22:46,166 - BibliotecaApp - INFO - GET / → 200 (0.025s)
2025-08-27 14:22:49,469 - BibliotecaApp - INFO - GET /auth/login → 200 (0.096s)
2025-08-27 14:22:51,923 - BibliotecaApp - INFO - POST /auth/login → 302 (0.291s)
2025-08-27 14:22:51,929 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 14:27:36,513 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:27:39,097 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:27:39,097 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:27:39,158 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:28:07,066 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:28:10,823 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:28:10,823 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:28:10,863 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:28:30,563 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:28:30,563 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:28:30,610 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:28:39,438 - BibliotecaApp - INFO - GET / → 200 (0.023s)
2025-08-27 14:28:54,616 - BibliotecaApp - INFO - GET /debuh/auth → 404 (0.015s)
2025-08-27 14:29:17,304 - BibliotecaApp - INFO - GET /auth/login → 200 (0.083s)
2025-08-27 14:29:22,485 - BibliotecaApp - INFO - POST /auth/login → 302 (0.284s)
2025-08-27 14:29:22,491 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 14:29:41,000 - BibliotecaApp - INFO - GET /debug-usuario → 404 (0.002s)
2025-08-27 14:29:49,937 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.004s)
2025-08-27 14:32:23,673 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:32:25,933 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:32:25,934 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:32:25,984 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:32:47,276 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.007s)
2025-08-27 14:33:15,021 - BibliotecaApp - INFO - GET /docs → 200 (0.003s)
2025-08-27 14:33:15,239 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.140s)
2025-08-27 14:34:08,185 - BibliotecaApp - INFO - GET / → 200 (0.062s)
2025-08-27 14:34:10,990 - BibliotecaApp - INFO - GET /auth/login → 200 (0.226s)
2025-08-27 14:34:14,088 - BibliotecaApp - INFO - POST /auth/login → 302 (0.519s)
2025-08-27 14:34:14,098 - BibliotecaApp - INFO - GET / → 200 (0.004s)
2025-08-27 14:34:15,738 - BibliotecaApp - INFO - GET /auth/login → 200 (0.015s)
2025-08-27 14:34:19,216 - BibliotecaApp - INFO - POST /auth/login → 302 (0.424s)
2025-08-27 14:34:19,227 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 14:34:29,189 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.004s)
2025-08-27 14:37:22,594 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:37:22,594 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:37:22,637 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:37:38,543 - BibliotecaApp - ERROR - Erro interno do servidor: 'UsuarioRepository' object has no attribute 'listar_todos'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 199, in debug_database
    |     todos_usuarios = usuario_service.repo.listar_todos()
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'UsuarioRepository' object has no attribute 'listar_todos'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 71, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 199, in debug_database
    todos_usuarios = usuario_service.repo.listar_todos()
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'UsuarioRepository' object has no attribute 'listar_todos'
2025-08-27 14:39:27,847 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:39:30,522 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:39:30,522 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:39:30,562 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:39:35,558 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:39:35,558 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:39:35,602 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:39:44,210 - BibliotecaApp - INFO - GET /debug/database → 200 (0.044s)
2025-08-27 14:42:08,157 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:42:11,221 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:42:11,221 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:42:11,307 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:42:50,678 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.023s)
2025-08-27 14:42:50,716 - BibliotecaApp - INFO - GET / → 200 (0.034s)
2025-08-27 14:43:00,078 - BibliotecaApp - INFO - GET /auth/login → 200 (0.030s)
2025-08-27 14:43:02,955 - BibliotecaApp - INFO - POST /auth/login → 302 (0.339s)
2025-08-27 14:43:02,962 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 14:43:25,961 - BibliotecaApp - INFO - GET /debug/context → 200 (0.002s)
2025-08-27 14:43:49,836 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.006s)
2025-08-27 14:47:08,786 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:47:11,156 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:47:11,156 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:47:11,209 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:47:56,963 - BibliotecaApp - INFO - GET /debug/step-by-step → 200 (0.046s)
2025-08-27 14:54:32,993 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:54:32,994 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:54:33,039 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:55:03,940 - BibliotecaApp - INFO - GET /debug/context → 200 (0.012s)
2025-08-27 14:55:17,388 - BibliotecaApp - INFO - GET / → 200 (0.030s)
2025-08-27 14:55:20,013 - BibliotecaApp - INFO - GET /auth/login → 200 (0.088s)
2025-08-27 14:55:22,673 - BibliotecaApp - INFO - POST /auth/login → 302 (0.321s)
2025-08-27 14:55:22,682 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 14:55:33,868 - BibliotecaApp - INFO - GET /debug/context → 200 (0.002s)
2025-08-27 14:55:49,137 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.002s)
2025-08-27 14:59:16,770 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:59:19,257 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:59:19,257 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:59:19,311 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 14:59:53,106 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 14:59:55,852 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 14:59:55,854 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 14:59:55,894 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:00:40,942 - BibliotecaApp - INFO - GET /debug/get-usuario-context → 200 (0.139s)
2025-08-27 15:01:19,424 - BibliotecaApp - INFO - GET /debug/debug/function-source → 404 (0.045s)
2025-08-27 15:01:43,450 - BibliotecaApp - INFO - GET /auth/login → 200 (0.063s)
2025-08-27 15:01:45,988 - BibliotecaApp - INFO - POST /auth/login → 302 (0.445s)
2025-08-27 15:01:46,021 - BibliotecaApp - INFO - GET / → 200 (0.026s)
2025-08-27 15:01:58,933 - BibliotecaApp - INFO - GET / → 200 (0.011s)
2025-08-27 15:02:01,658 - BibliotecaApp - INFO - GET /carrinho → 307 (0.001s)
2025-08-27 15:02:01,702 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 50, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-27 15:02:01,761 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.098s)
2025-08-27 15:02:04,991 - BibliotecaApp - ERROR - Erro interno do servidor: 'None' has no attribute 'email'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    |     return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 40, in top-level template code
    |     {% block content %}{% endblock %}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "app\templates\perfil.html", line 15, in block 'content'
    |     {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    |     return obj[argument]
    |            ~~~^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\perfil.html", line 15, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 15:02:20,088 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:02:20,088 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:02:20,152 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:02:20,986 - BibliotecaApp - ERROR - Erro interno do servidor: 'None' has no attribute 'email'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    |     return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 40, in top-level template code
    |     {% block content %}{% endblock %}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "app\templates\perfil.html", line 15, in block 'content'
    |     {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    |     return obj[argument]
    |            ~~~^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\perfil.html", line 15, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 15:02:22,424 - BibliotecaApp - INFO - GET / → 200 (0.014s)
2025-08-27 15:02:24,908 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.002s)
2025-08-27 15:02:24,913 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 15:02:29,914 - BibliotecaApp - INFO - GET /auth/login → 200 (0.042s)
2025-08-27 15:02:32,646 - BibliotecaApp - INFO - POST /auth/login → 302 (0.510s)
2025-08-27 15:02:32,659 - BibliotecaApp - INFO - GET / → 200 (0.009s)
2025-08-27 15:04:09,623 - BibliotecaApp - INFO - GET /livros → 307 (0.003s)
2025-08-27 15:04:09,722 - BibliotecaApp - INFO - GET /livros/ → 200 (0.093s)
2025-08-27 15:04:09,754 - BibliotecaApp - INFO - GET /livros/string → 422 (0.007s)
2025-08-27 15:05:10,728 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:06:06,911 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:06:06,912 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:06:06,971 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:06:18,055 - BibliotecaApp - INFO - GET / → 200 (0.064s)
2025-08-27 15:06:23,792 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.013s)
2025-08-27 15:06:23,799 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 15:06:28,382 - BibliotecaApp - INFO - GET /auth/login → 200 (0.026s)
2025-08-27 15:06:32,102 - BibliotecaApp - INFO - POST /auth/login → 302 (0.292s)
2025-08-27 15:06:32,112 - BibliotecaApp - INFO - GET / → 200 (0.006s)
2025-08-27 15:07:01,202 - BibliotecaApp - ERROR - Erro interno do servidor: 'None' has no attribute 'email'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    |     return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 40, in top-level template code
    |     {% block content %}{% endblock %}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "app\templates\perfil.html", line 15, in block 'content'
    |     {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    |     return obj[argument]
    |            ~~~^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 72, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 39, in perfil_usuario
    return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\perfil.html", line 15, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 15:17:02,065 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:17:07,856 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:17:07,858 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:17:07,919 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:17:16,924 - BibliotecaApp - ERROR - Erro na página inicial: No filter named 'moeda'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\main.py", line 117, in home
    return templates.TemplateResponse("index.html", context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\index.html", line 53, in template
    <p class="font-bold text-blue-600 mb-2">Total: {{ pedido.total | moeda }}</p>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.TemplateAssertionError: No filter named 'moeda'.
2025-08-27 15:17:16,946 - BibliotecaApp - INFO - GET / → 500 (0.075s)
2025-08-27 15:22:03,441 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:25:09,951 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:25:09,951 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:25:09,989 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:25:15,222 - BibliotecaApp - INFO - GET / → 200 (0.070s)
2025-08-27 15:25:21,405 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.015s)
2025-08-27 15:25:21,412 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 15:25:27,235 - BibliotecaApp - INFO - GET /auth/login → 200 (0.027s)
2025-08-27 15:25:31,429 - BibliotecaApp - INFO - POST /auth/login → 302 (0.302s)
2025-08-27 15:25:31,436 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 15:25:40,406 - BibliotecaApp - INFO - GET /usuarios/editar → 404 (0.006s)
2025-08-27 15:25:47,349 - BibliotecaApp - INFO - GET /carrinho → 307 (0.003s)
2025-08-27 15:25:47,377 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 50, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
    return render_template_with_user(templates, "carrinho.html", request, db, itens=itens)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 208, in TemplateResponse
    template = self.get_template(name)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 131, in get_template
    return self.env.get_template(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\carrinho.html", line 57, in template
    {% endif %}
jinja2.exceptions.TemplateSyntaxError: Unexpected end of template. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2025-08-27 15:25:47,408 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.054s)
2025-08-27 15:25:57,239 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.004s)
2025-08-27 15:25:57,245 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 15:26:00,003 - BibliotecaApp - INFO - GET /auth/login → 200 (0.009s)
2025-08-27 15:26:06,143 - BibliotecaApp - INFO - POST /auth/login → 302 (0.242s)
2025-08-27 15:26:06,152 - BibliotecaApp - INFO - GET / → 200 (0.000s)
2025-08-27 15:26:13,785 - BibliotecaApp - INFO - GET /usuarios/editar → 404 (0.003s)
2025-08-27 15:35:05,555 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:35:08,176 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:35:08,177 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:35:08,230 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:37:00,244 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:37:00,244 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:37:00,290 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:37:06,169 - BibliotecaApp - INFO - GET / → 200 (0.067s)
2025-08-27 15:37:09,375 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.009s)
2025-08-27 15:37:09,380 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 15:37:16,150 - BibliotecaApp - INFO - GET /auth/login → 200 (0.034s)
2025-08-27 15:37:20,102 - BibliotecaApp - INFO - POST /auth/login → 302 (0.299s)
2025-08-27 15:37:20,117 - BibliotecaApp - INFO - GET / → 200 (0.005s)
2025-08-27 15:37:23,823 - BibliotecaApp - INFO - GET /usuarios/editar → 200 (0.036s)
2025-08-27 15:37:43,050 - BibliotecaApp - INFO - POST /usuarios/editar → 302 (0.045s)
2025-08-27 15:37:43,088 - BibliotecaApp - ERROR - Erro interno do servidor: 'None' has no attribute 'email'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 42, in perfil_usuario
    |     return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    |     return templates.TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    |     return _TemplateResponse(
    |            ^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    |     content = template.render(context)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    |     self.environment.handle_exception()
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    |     raise rewrite_traceback_stack(source=source)
    |   File "app\templates\perfil.html", line 1, in top-level template code
    |     {% extends "base.html" %}
    |   File "app\templates\base.html", line 40, in top-level template code
    |     {% block content %}{% endblock %}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "app\templates\perfil.html", line 15, in block 'content'
    |     {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    |     return obj[argument]
    |            ~~~^^^^^^^^^^
    | jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 42, in perfil_usuario
    return render_template_with_user(templates, "perfil.html", request, db, pedidos=pedidos)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\utils\template_utils.py", line 64, in render_template_with_user
    return templates.TemplateResponse(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 209, in TemplateResponse
    return _TemplateResponse(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\templating.py", line 40, in __init__
    content = template.render(context)
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "app\templates\perfil.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "app\templates\base.html", line 40, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "app\templates\perfil.html", line 15, in block 'content'
    {{ usuario.nome[0] if usuario.nome else usuario.email[0] }}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\jinja2\environment.py", line 471, in getitem
    return obj[argument]
           ~~~^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'None' has no attribute 'email'
2025-08-27 15:41:55,878 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:41:58,632 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:41:58,633 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:41:58,688 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:46:55,852 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:46:58,447 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:46:58,448 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:46:58,496 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:47:28,605 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:47:31,527 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:47:31,527 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:47:31,572 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:48:01,741 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 15:48:04,386 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 15:48:04,387 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 15:48:04,440 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 15:48:32,269 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:07:05,287 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:07:05,287 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:07:05,333 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:07:16,572 - BibliotecaApp - INFO - GET / → 200 (0.072s)
2025-08-27 16:07:19,242 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.012s)
2025-08-27 16:07:19,248 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 16:07:21,077 - BibliotecaApp - INFO - GET /auth/login → 200 (0.027s)
2025-08-27 16:07:23,447 - BibliotecaApp - ERROR - Erro interno do servidor: name 'HTTPException' is not defined
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 42, in processar_login
    |     except HTTPException as e:
    |            ^^^^^^^^^^^^^
    | NameError: name 'HTTPException' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 42, in processar_login
    except HTTPException as e:
           ^^^^^^^^^^^^^
NameError: name 'HTTPException' is not defined
2025-08-27 16:07:52,272 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:07:54,683 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:07:54,683 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:07:54,724 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:07:59,354 - BibliotecaApp - INFO - GET /login → 404 (0.019s)
2025-08-27 16:08:02,444 - BibliotecaApp - INFO - GET / → 200 (0.019s)
2025-08-27 16:08:07,615 - BibliotecaApp - INFO - GET /auth/login → 200 (0.022s)
2025-08-27 16:08:10,065 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-27 16:08:12,516 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 16:08:13,138 - BibliotecaApp - INFO - GET / → 200 (0.004s)
2025-08-27 16:08:16,534 - BibliotecaApp - INFO - GET /auth/login → 200 (0.006s)
2025-08-27 16:08:18,975 - BibliotecaApp - INFO - POST /auth/login → 401 (0.067s)
2025-08-27 16:08:29,225 - BibliotecaApp - INFO - POST /auth/login → 401 (0.011s)
2025-08-27 16:08:33,638 - BibliotecaApp - INFO - POST /auth/login → 302 (0.289s)
2025-08-27 16:08:33,647 - BibliotecaApp - INFO - GET / → 200 (0.005s)
2025-08-27 16:08:36,598 - BibliotecaApp - INFO - GET /usuarios/editar → 200 (0.068s)
2025-08-27 16:08:39,705 - BibliotecaApp - INFO - POST /usuarios/editar → 302 (0.030s)
2025-08-27 16:08:39,782 - BibliotecaApp - INFO - GET /usuarios/perfil → 200 (0.070s)
2025-08-27 16:08:47,439 - PedidoRouter - INFO - Pedido 6 acessado por usuário 1
2025-08-27 16:08:47,442 - BibliotecaApp - INFO - GET /pedidos/6 → 200 (0.015s)
2025-08-27 16:09:07,250 - BibliotecaApp - INFO - GET /usuarios/editar → 200 (0.014s)
2025-08-27 16:09:22,142 - BibliotecaApp - INFO - POST /usuarios/editar → 302 (0.025s)
2025-08-27 16:09:22,186 - BibliotecaApp - INFO - GET /usuarios/perfil → 200 (0.044s)
2025-08-27 16:09:25,344 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.005s)
2025-08-27 16:09:25,349 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 16:09:26,698 - BibliotecaApp - INFO - GET /auth/login → 200 (0.005s)
2025-08-27 16:09:28,510 - BibliotecaApp - INFO - POST /auth/login → 401 (0.012s)
2025-08-27 16:09:39,763 - BibliotecaApp - INFO - POST /auth/login → 302 (0.237s)
2025-08-27 16:09:39,773 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 16:09:48,762 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.011s)
2025-08-27 16:09:48,779 - BibliotecaApp - INFO - GET / → 200 (0.005s)
2025-08-27 16:10:15,752 - BibliotecaApp - INFO - GET /auth/login → 200 (0.006s)
2025-08-27 16:10:18,013 - BibliotecaApp - INFO - POST /auth/login → 302 (0.227s)
2025-08-27 16:10:18,022 - BibliotecaApp - INFO - GET / → 200 (0.004s)
2025-08-27 16:10:19,596 - BibliotecaApp - INFO - GET /carrinho → 307 (0.002s)
2025-08-27 16:10:19,607 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 20, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:10:19,620 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.020s)
2025-08-27 16:10:26,568 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-08-27 16:10:29,991 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-08-27 16:10:34,908 - BibliotecaApp - INFO - GET /pedidos → 307 (0.002s)
2025-08-27 16:10:34,991 - BibliotecaApp - INFO - GET /pedidos/ → 200 (0.077s)
2025-08-27 16:10:54,526 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.005s)
2025-08-27 16:10:54,533 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 16:10:56,932 - BibliotecaApp - INFO - GET /livros → 307 (0.000s)
2025-08-27 16:10:56,984 - BibliotecaApp - INFO - GET /livros/ → 200 (0.043s)
2025-08-27 16:10:57,009 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-08-27 16:11:00,338 - BibliotecaApp - INFO - GET /auth/login → 200 (0.006s)
2025-08-27 16:11:02,794 - BibliotecaApp - INFO - POST /auth/login → 302 (0.240s)
2025-08-27 16:11:02,807 - BibliotecaApp - INFO - GET / → 200 (0.005s)
2025-08-27 16:11:04,107 - BibliotecaApp - INFO - GET /livros → 307 (0.000s)
2025-08-27 16:11:04,122 - BibliotecaApp - INFO - GET /livros/ → 200 (0.010s)
2025-08-27 16:11:04,153 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-08-27 16:11:05,484 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.002s)
2025-08-27 16:21:07,518 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:21:07,518 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:21:07,572 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:21:07,871 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:21:07,871 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:21:07,913 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:21:13,306 - BibliotecaApp - INFO - GET / → 200 (0.094s)
2025-08-27 16:21:17,454 - BibliotecaApp - INFO - GET /carrinho → 307 (0.005s)
2025-08-27 16:21:17,476 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 20, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:21:17,507 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.046s)
2025-08-27 16:21:21,715 - BibliotecaApp - INFO - GET / → 200 (0.006s)
2025-08-27 16:21:23,157 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-08-27 16:21:23,214 - BibliotecaApp - INFO - GET /livros/ → 200 (0.054s)
2025-08-27 16:21:23,239 - BibliotecaApp - INFO - GET /livros/string → 422 (0.007s)
2025-08-27 16:21:25,828 - BibliotecaApp - INFO - GET /api/livros/cadastrar-form → 404 (0.008s)
2025-08-27 16:21:30,703 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.004s)
2025-08-27 16:21:38,370 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.035s)
2025-08-27 16:21:51,133 - BibliotecaApp - ERROR - Erro interno do servidor: "UsuarioCreate" object has no field "senha_hash"
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 74, in processar_cadastro
    |     usuario = auth_service.registrar_usuario(nome, email, senha, confirmar_senha)
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 30, in registrar_usuario
    |     return self.usuario_service.registrar(usuario_data)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 24, in registrar
    |     usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    |     ^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    |     elif (setattr_handler := self._setattr_handler(name, value)) is not None:
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    |     raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
    | ValueError: "UsuarioCreate" object has no field "senha_hash"
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\auth_router.py", line 74, in processar_cadastro
    usuario = auth_service.registrar_usuario(nome, email, senha, confirmar_senha)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\auth_service.py", line 30, in registrar_usuario
    return self.usuario_service.registrar(usuario_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 24, in registrar
    usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    elif (setattr_handler := self._setattr_handler(name, value)) is not None:
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
ValueError: "UsuarioCreate" object has no field "senha_hash"
2025-08-27 16:23:16,164 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:23:16,165 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:23:22,930 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:23:22,931 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:23:22,987 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:23:26,760 - BibliotecaApp - INFO - GET / → 200 (0.075s)
2025-08-27 16:23:30,293 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.014s)
2025-08-27 16:23:30,299 - BibliotecaApp - INFO - GET / → 200 (0.003s)
2025-08-27 16:23:34,377 - BibliotecaApp - INFO - GET /auth/login → 200 (0.027s)
2025-08-27 16:23:36,914 - BibliotecaApp - INFO - POST /auth/login → 302 (0.289s)
2025-08-27 16:23:36,927 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-08-27 16:23:41,997 - BibliotecaApp - INFO - GET /livros → 307 (0.002s)
2025-08-27 16:23:42,055 - BibliotecaApp - INFO - GET /livros/ → 200 (0.052s)
2025-08-27 16:23:42,085 - BibliotecaApp - INFO - GET /livros/string → 422 (0.006s)
2025-08-27 16:23:44,330 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.004s)
2025-08-27 16:23:46,029 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.019s)
2025-08-27 16:23:47,458 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-08-27 16:23:48,317 - BibliotecaApp - INFO - GET /carrinho → 307 (0.000s)
2025-08-27 16:23:48,330 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 20, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:23:48,354 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.032s)
2025-08-27 16:26:34,262 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:26:34,265 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:26:34,325 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:26:34,472 - BibliotecaApp - INFO - GET / → 200 (0.078s)
2025-08-27 16:26:34,491 - BibliotecaApp - INFO - GET / → 200 (0.005s)
2025-08-27 16:26:37,284 - BibliotecaApp - INFO - GET /carrinho → 307 (0.000s)
2025-08-27 16:26:37,297 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 20, in pagina_carrinho
    itens = service.listar_itens(usuario_id=user.id)
                                            ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:26:37,333 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.043s)
2025-08-27 16:29:06,841 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:29:09,167 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:29:09,168 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:29:09,217 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:29:22,093 - BibliotecaApp - INFO - GET / → 200 (0.071s)
2025-08-27 16:29:24,060 - BibliotecaApp - INFO - GET /carrinho → 307 (0.000s)
2025-08-27 16:29:24,075 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: name 'self' is not defined
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 21, in pagina_carrinho
NameError: name 'self' is not defined
2025-08-27 16:29:24,089 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.025s)
2025-08-27 16:29:24,259 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:29:26,863 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:29:26,863 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:29:26,915 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:29:31,062 - BibliotecaApp - INFO - GET /login → 404 (0.019s)
2025-08-27 16:29:32,873 - BibliotecaApp - INFO - GET / → 200 (0.056s)
2025-08-27 16:29:35,102 - BibliotecaApp - INFO - GET /livros → 307 (0.004s)
2025-08-27 16:29:35,177 - BibliotecaApp - INFO - GET /livros/ → 200 (0.068s)
2025-08-27 16:29:35,213 - BibliotecaApp - INFO - GET /livros/string → 422 (0.005s)
2025-08-27 16:29:37,780 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.002s)
2025-08-27 16:29:39,566 - BibliotecaApp - INFO - GET /carrinho → 307 (0.001s)
2025-08-27 16:29:39,578 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:29:39,604 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.034s)
2025-08-27 16:29:52,403 - BibliotecaApp - INFO - GET /docs → 200 (0.001s)
2025-08-27 16:29:52,549 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.076s)
2025-08-27 16:30:20,093 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.005s)
2025-08-27 16:31:10,430 - BibliotecaApp - INFO - POST /livros/ → 200 (0.042s)
2025-08-27 16:31:29,194 - BibliotecaApp - INFO - GET /livros/ → 200 (0.012s)
2025-08-27 16:31:46,672 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.011s)
2025-08-27 16:32:03,053 - BibliotecaApp - INFO - GET /livros/6 → 200 (0.013s)
2025-08-27 16:32:51,802 - BibliotecaApp - INFO - PUT /livros/6 → 400 (0.007s)
2025-08-27 16:33:15,847 - BibliotecaApp - INFO - PUT /livros/6 → 200 (0.031s)
2025-08-27 16:33:35,630 - BibliotecaApp - ERROR - Erro interno do servidor: 'LivroService' object has no attribute 'filtrar_por_autor'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 112, in buscar_por_autor
    |     return {"livros": service.filtrar_por_autor(autor)}
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'LivroService' object has no attribute 'filtrar_por_autor'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 112, in buscar_por_autor
    return {"livros": service.filtrar_por_autor(autor)}
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LivroService' object has no attribute 'filtrar_por_autor'
2025-08-27 16:34:43,721 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:34:46,412 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:34:46,412 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:34:46,459 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:35:28,192 - BibliotecaApp - INFO - GET / → 200 (0.163s)
2025-08-27 16:35:36,356 - BibliotecaApp - INFO - GET /livros/buscar/autor → 200 (0.029s)
2025-08-27 16:35:55,966 - BibliotecaApp - ERROR - Erro interno do servidor: 'LivroService' object has no attribute 'filtrar_por_ano'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 118, in buscar_por_ano
    |     return {"livros": service.filtrar_por_ano(ano)}
    |                       ^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'LivroService' object has no attribute 'filtrar_por_ano'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 118, in buscar_por_ano
    return {"livros": service.filtrar_por_ano(ano)}
                      ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LivroService' object has no attribute 'filtrar_por_ano'
2025-08-27 16:43:15,854 - BibliotecaApp - INFO - GET /info → 200 (0.001s)
2025-08-27 16:44:06,190 - BibliotecaApp - INFO - GET /health → 200 (0.001s)
2025-08-27 16:44:42,570 - BibliotecaApp - INFO - GET / → 200 (0.009s)
2025-08-27 16:44:47,932 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.006s)
2025-08-27 16:44:47,938 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-08-27 16:44:52,402 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.017s)
2025-08-27 16:44:56,933 - BibliotecaApp - INFO - GET /auth/login → 200 (0.012s)
2025-08-27 16:44:59,262 - BibliotecaApp - INFO - POST /auth/login → 302 (0.277s)
2025-08-27 16:44:59,273 - BibliotecaApp - INFO - GET / → 200 (0.006s)
2025-08-27 16:45:01,962 - BibliotecaApp - INFO - GET /usuarios/editar → 200 (0.054s)
2025-08-27 16:45:03,486 - BibliotecaApp - INFO - GET / → 200 (0.006s)
2025-08-27 16:45:07,403 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-08-27 16:45:07,451 - BibliotecaApp - INFO - GET /livros/ → 200 (0.043s)
2025-08-27 16:45:07,475 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-08-27 16:45:13,297 - BibliotecaApp - INFO - GET /carrinho → 307 (0.002s)
2025-08-27 16:45:13,303 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:45:13,318 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.016s)
2025-08-27 16:45:26,415 - BibliotecaApp - INFO - GET / → 200 (0.009s)
2025-08-27 16:45:33,040 - BibliotecaApp - INFO - GET /carrinho → 307 (0.003s)
2025-08-27 16:45:33,054 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:45:33,058 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.013s)
2025-08-27 16:45:49,116 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-08-27 16:49:47,995 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:49:50,513 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:49:50,513 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:49:50,566 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:51:44,238 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:51:49,442 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:51:49,442 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:51:49,492 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:53:24,955 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:53:30,533 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:53:30,533 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:53:30,594 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:54:00,718 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 16:54:03,651 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 16:54:03,651 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 16:54:03,692 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 16:54:05,225 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:54:05,246 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.069s)
2025-08-27 16:54:39,322 - CarrinhoRouter - ERROR - Erro ao adicionar item: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 42, in adicionar_item
    service.adicionar(user.id, livro_id, quantidade)
                      ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-08-27 16:54:39,326 - BibliotecaApp - INFO - POST /carrinho/adicionar → 500 (0.017s)
2025-08-27 16:55:13,805 - PedidoRouter - INFO - Listados 0 pedidos para usuário 1
2025-08-27 16:55:13,816 - BibliotecaApp - INFO - GET /pedidos/listar → 200 (0.021s)
2025-08-27 16:55:25,237 - PedidoRouter - INFO - Listados 0 pedidos para usuário 1
2025-08-27 16:55:25,239 - BibliotecaApp - INFO - GET /pedidos/listar → 200 (0.017s)
2025-08-27 16:55:42,364 - PedidoRouter - INFO - Pedido 3 acessado por usuário 1
2025-08-27 16:55:42,374 - BibliotecaApp - INFO - GET /pedidos/3 → 200 (0.020s)
2025-08-27 16:56:00,158 - PedidoRouter - INFO - Pedido 12 finalizado para usuário 1
2025-08-27 16:56:00,161 - BibliotecaApp - INFO - POST /pedidos/finalizar → 200 (0.076s)
2025-08-27 16:56:19,722 - PedidoRouter - INFO - Estatísticas calculadas para usuário 1: {'total_pedidos': 12, 'valor_total_gasto': 252.77000000000004, 'pedidos_por_status': {<StatusPedido.PENDENTE: 'PENDENTE'>: 12}, 'ticket_medio': 21.06}
2025-08-27 16:56:19,722 - BibliotecaApp - INFO - GET /pedidos/estatisticas/usuario → 200 (0.027s)
2025-08-27 16:56:59,642 - BibliotecaApp - INFO - GET / → 200 (0.048s)
2025-08-27 17:03:25,982 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:03:28,909 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:03:28,909 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:03:28,952 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:06:56,702 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:09:28,568 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:09:28,571 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:09:28,633 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:09:32,475 - BibliotecaApp - INFO - GET /docs → 200 (0.007s)
2025-08-27 17:09:32,665 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.054s)
2025-08-27 17:19:24,442 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:19:27,318 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:19:27,318 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:19:27,390 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:22:01,822 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:22:04,583 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:22:04,583 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:22:04,627 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:24:55,140 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:25:00,462 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:25:00,462 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:25:00,501 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:25:04,731 - BibliotecaApp - INFO - GET /docs → 200 (0.007s)
2025-08-27 17:25:04,931 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.047s)
2025-08-27 17:25:32,932 - BibliotecaApp - INFO - PUT /livros/1 → 200 (0.110s)
2025-08-27 17:25:52,876 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.011s)
2025-08-27 17:45:53,630 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:45:56,029 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:45:56,029 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:45:56,072 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:46:58,988 - BibliotecaApp - INFO - GET /docs → 200 (0.005s)
2025-08-27 17:46:59,209 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.063s)
2025-08-27 17:47:05,978 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.082s)
2025-08-27 17:47:06,081 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-27 17:47:08,705 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-27 17:47:08,706 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-27 17:47:08,755 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-27 17:47:56,142 - BibliotecaApp - INFO - PATCH /livros/1 → 401 (0.032s)
2025-08-27 17:48:11,632 - BibliotecaApp - INFO - GET /docs → 200 (0.000s)
2025-08-27 17:48:11,829 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.086s)
2025-08-27 17:48:23,542 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.069s)
2025-08-27 17:48:49,767 - BibliotecaApp - INFO - PATCH /livros/6 → 401 (0.009s)
2025-08-28 09:55:45,458 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-28 09:55:45,459 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-28 09:55:45,639 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-28 09:55:49,880 - BibliotecaApp - INFO - GET /docs → 200 (0.011s)
2025-08-28 09:55:50,241 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.068s)
2025-08-28 09:59:30,767 - BibliotecaApp - INFO - GET / → 200 (0.131s)
2025-08-28 09:59:30,966 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.020s)
2025-08-28 10:05:00,194 - BibliotecaApp - INFO - GET /auth/login → 404 (0.004s)
2025-08-28 10:05:13,581 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-08-28 10:07:08,037 - BibliotecaApp - ERROR - Erro interno do servidor: 'LivroService' object has no attribute 'filtrar_por_titulo'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 108, in buscar_por_titulo
    |     return {"livros": service.filtrar_por_titulo(titulo)}
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'LivroService' object has no attribute 'filtrar_por_titulo'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\livro_router.py", line 108, in buscar_por_titulo
    return {"livros": service.filtrar_por_titulo(titulo)}
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LivroService' object has no attribute 'filtrar_por_titulo'
2025-08-29 12:41:46,766 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 12:41:46,767 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 12:41:46,855 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 12:41:53,709 - BibliotecaApp - INFO - GET /docs → 200 (0.003s)
2025-08-29 12:41:53,953 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.090s)
2025-08-29 12:42:10,508 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.010s)
2025-08-29 12:45:00,951 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.020s)
2025-08-29 12:45:30,498 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.066s)
2025-08-29 12:45:44,287 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.003s)
2025-08-29 12:56:03,845 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 14:29:54,615 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 14:29:54,617 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 14:29:54,693 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 14:30:03,109 - BibliotecaApp - INFO - GET /docs → 200 (0.008s)
2025-08-29 14:30:03,304 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.049s)
2025-08-29 14:30:12,392 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.078s)
2025-08-29 14:30:42,640 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.005s)
2025-08-29 14:37:16,576 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.004s)
2025-08-29 14:37:26,882 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.011s)
2025-08-29 14:37:44,650 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.000s)
2025-08-29 14:37:54,352 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.003s)
2025-08-29 14:39:48,098 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.009s)
2025-08-29 14:39:48,227 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.058s)
2025-08-29 14:39:50,169 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 14:39:52,806 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 14:39:52,806 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 14:39:52,859 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 14:40:04,231 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.029s)
2025-08-29 14:41:25,744 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.005s)
2025-08-29 14:49:07,720 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 14:49:15,417 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 14:49:15,417 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 14:49:15,487 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 14:50:48,813 - BibliotecaApp - INFO - GET /livros/buscar → 422 (0.015s)
2025-08-29 15:02:19,520 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 15:02:19,520 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 15:02:19,564 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 15:02:22,986 - BibliotecaApp - INFO - GET /docs → 200 (0.005s)
2025-08-29 15:02:23,163 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.061s)
2025-08-29 15:02:36,114 - BibliotecaApp - INFO - GET /livros/estatisticas/resumo → 200 (0.090s)
2025-08-29 15:03:16,945 - BibliotecaApp - INFO - GET /livros/buscar/filtros → 200 (0.037s)
2025-08-29 15:04:34,550 - BibliotecaApp - INFO - GET / → 200 (0.054s)
2025-08-29 15:04:34,922 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.005s)
2025-08-29 15:04:38,048 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-08-29 15:04:40,044 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.005s)
2025-08-29 15:04:41,034 - BibliotecaApp - INFO - GET /carrinho → 307 (0.001s)
2025-08-29 15:04:41,042 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'NoneType' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2.1\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2025-08-29 15:04:41,067 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.028s)
2025-08-29 15:04:42,149 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-08-29 15:04:42,197 - BibliotecaApp - INFO - GET /livros/ → 200 (0.044s)
2025-08-29 15:04:42,230 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-08-29 15:04:43,669 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-08-29 15:15:58,396 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 15:16:26,504 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 15:16:26,504 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 15:16:26,556 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 15:16:27,693 - BibliotecaApp - INFO - GET /auth/auth/login → 200 (0.032s)
2025-08-29 15:17:00,462 - BibliotecaApp - INFO - GET /livros/status → 422 (0.003s)
2025-08-29 15:17:17,428 - BibliotecaApp - INFO - GET /livros/status → 422 (0.002s)
2025-08-29 15:18:57,896 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 15:19:00,311 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 15:19:00,311 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 15:19:00,357 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 15:19:16,586 - BibliotecaApp - INFO - GET /docs → 200 (0.007s)
2025-08-29 15:19:16,767 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.057s)
2025-08-29 15:19:23,607 - BibliotecaApp - INFO - GET /livros/status → 422 (0.007s)
2025-08-29 15:22:01,825 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 15:22:01,826 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 15:22:01,882 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 15:22:07,229 - BibliotecaApp - INFO - GET /livros/status → 422 (0.015s)
2025-08-29 16:26:59,444 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 16:26:59,445 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 16:26:59,544 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 16:27:00,336 - BibliotecaApp - INFO - GET /docs → 200 (0.019s)
2025-08-29 16:27:00,727 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.087s)
2025-08-29 16:27:27,211 - BibliotecaApp - INFO - GET /usuarios/listar → 401 (0.040s)
2025-08-29 16:27:45,877 - BibliotecaApp - INFO - GET /usuarios/perfil → 302 (0.013s)
2025-08-29 16:27:45,943 - BibliotecaApp - INFO - GET /auth/login → 404 (0.050s)
2025-08-29 16:28:18,041 - BibliotecaApp - INFO - GET /usuarios/editar → 302 (0.013s)
2025-08-29 16:28:18,050 - BibliotecaApp - INFO - GET /auth/login → 404 (0.003s)
2025-08-29 16:28:41,852 - BibliotecaApp - INFO - GET /usuarios/verificar-email/thalessilva92@gmail.com → 200 (0.121s)
2025-08-29 16:29:28,688 - BibliotecaApp - INFO - GET /usuarios/verificar-email/teste@gmail.com → 200 (0.025s)
2025-08-29 16:29:39,026 - BibliotecaApp - INFO - GET /usuarios/me → 401 (0.015s)
2025-08-29 16:29:51,587 - BibliotecaApp - INFO - GET /health → 200 (0.003s)
2025-08-29 16:30:01,165 - BibliotecaApp - INFO - GET /info → 200 (0.003s)
2025-08-29 16:30:17,555 - BibliotecaApp - INFO - GET /debug/auth → 200 (0.003s)
2025-08-29 16:30:57,799 - BibliotecaApp - INFO - POST /usuarios/editar → 302 (0.015s)
2025-08-29 16:30:57,809 - BibliotecaApp - INFO - GET /auth/login → 404 (0.003s)
2025-08-29 16:31:21,286 - BibliotecaApp - INFO - GET /usuarios/editar → 302 (0.010s)
2025-08-29 16:31:21,300 - BibliotecaApp - INFO - GET /auth/login → 404 (0.005s)
2025-08-29 16:31:33,448 - BibliotecaApp - INFO - GET /usuarios/perfil → 302 (0.014s)
2025-08-29 16:31:33,464 - BibliotecaApp - INFO - GET /auth/login → 404 (0.006s)
2025-08-29 16:31:42,288 - BibliotecaApp - INFO - GET /usuarios/listar → 401 (0.014s)
2025-08-29 16:46:01,202 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 16:46:13,342 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 16:46:13,343 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 16:46:13,424 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 16:47:29,053 - UsuarioRouter - ERROR - Erro no cadastro JSON: "UsuarioCreate" object has no field "senha_hash"
2025-08-29 16:47:29,067 - BibliotecaApp - ERROR - Erro interno do servidor: "UsuarioCreate" object has no field "senha_hash"
  + Exception Group Traceback (most recent call last):
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |   File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    |     raise app_exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 27, in cadastrar_usuario_json
    |     return service.registrar(usuario_data)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 26, in registrar
    |     usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    |     ^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    |     elif (setattr_handler := self._setattr_handler(name, value)) is not None:
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    |     raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
    | ValueError: "UsuarioCreate" object has no field "senha_hash"
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\main.py", line 77, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\sessions.py", line 85, in __call__
    await self.app(scope, receive, send_wrapper)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\routers\usuario_router.py", line 27, in cadastrar_usuario_json
    return service.registrar(usuario_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2.1\app\service\usuario_service.py", line 26, in registrar
    usuario_data.senha_hash = pwd_context.hash(usuario_data.senha)
    ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 997, in __setattr__
    elif (setattr_handler := self._setattr_handler(name, value)) is not None:
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Projetos\Bibliotec2\.venv\Lib\site-packages\pydantic\main.py", line 1044, in _setattr_handler
    raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
ValueError: "UsuarioCreate" object has no field "senha_hash"
2025-08-29 16:56:05,765 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 16:56:08,582 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 16:56:08,582 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 16:56:08,635 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 17:22:04,134 - BibliotecaApp - INFO - GET /usuarios/listar → 401 (0.023s)
2025-08-29 17:26:52,618 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-08-29 17:48:12,465 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-08-29 17:48:12,465 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-08-29 17:48:12,534 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-08-29 17:48:22,247 - BibliotecaApp - INFO - GET /docs → 200 (0.007s)
2025-08-29 17:48:22,589 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.204s)
2025-08-29 17:48:40,475 - BibliotecaApp - INFO - POST /auth/auth/token → 403 (0.678s)
2025-08-29 17:49:41,036 - BibliotecaApp - INFO - POST /auth/auth/token → 401 (0.011s)
2025-08-29 17:49:58,520 - BibliotecaApp - INFO - POST /auth/auth/token → 403 (0.384s)
2025-08-29 17:50:52,554 - BibliotecaApp - INFO - POST /auth/auth/token → 403 (0.491s)
2025-08-29 17:51:32,382 - BibliotecaApp - INFO - POST /auth/auth/token → 200 (0.424s)
2025-08-29 17:52:49,485 - BibliotecaApp - INFO - GET /admin/me → 404 (0.052s)
2025-08-29 17:52:50,022 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.003s)
2025-08-29 17:52:53,781 - BibliotecaApp - INFO - GET / → 200 (0.056s)
2025-09-01 10:15:15,413 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 10:15:15,415 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 10:15:19,493 - BibliotecaApp - ERROR - ❌ Erro ao criar tabelas: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 5433 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-01 10:17:23,363 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 10:17:23,363 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 10:17:23,493 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 10:17:54,203 - BibliotecaApp - INFO - GET /docs → 200 (0.011s)
2025-09-01 10:17:54,521 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.123s)
2025-09-01 10:18:04,755 - BibliotecaApp - INFO - POST /auth/auth/token → 401 (0.081s)
2025-09-01 10:18:41,191 - BibliotecaApp - INFO - POST /auth/auth/login → 401 (0.040s)
2025-09-01 10:19:23,007 - BibliotecaApp - INFO - POST /auth/auth/token → 401 (0.012s)
2025-09-01 10:19:30,364 - BibliotecaApp - INFO - POST /auth/auth/token → 401 (0.013s)
2025-09-01 10:20:05,058 - BibliotecaApp - INFO - POST /auth/auth/token → 200 (0.562s)
2025-09-01 10:20:37,579 - BibliotecaApp - INFO - POST /livros/ → 401 (0.027s)
2025-09-01 10:21:25,311 - BibliotecaApp - INFO - GET /health → 200 (0.004s)
2025-09-01 10:33:33,473 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 10:33:36,847 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 10:33:36,847 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 10:33:36,946 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 10:36:35,342 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 10:36:35,342 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 10:36:35,384 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 10:36:39,166 - BibliotecaApp - INFO - GET /docs → 200 (0.005s)
2025-09-01 10:36:39,354 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.068s)
2025-09-01 10:37:08,933 - BibliotecaApp - INFO - POST /auth/auth/token → 200 (0.356s)
2025-09-01 10:37:42,645 - BibliotecaApp - INFO - POST /livros/ → 401 (0.013s)
2025-09-01 10:38:48,228 - BibliotecaApp - INFO - GET /auth/login → 404 (0.046s)
2025-09-01 10:38:48,358 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.000s)
2025-09-01 10:38:51,469 - BibliotecaApp - INFO - GET /auth/login → 404 (0.003s)
2025-09-01 10:38:52,893 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-09-01 10:38:53,621 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-09-01 10:39:43,057 - BibliotecaApp - INFO - POST /auth/auth/token → 200 (0.234s)
2025-09-01 10:40:15,514 - BibliotecaApp - INFO - POST /livros/ → 401 (0.007s)
2025-09-01 10:45:14,813 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 10:45:14,814 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 10:45:14,861 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 10:45:19,291 - BibliotecaApp - INFO - POST /livros/ → 401 (0.022s)
2025-09-01 10:45:25,364 - BibliotecaApp - INFO - POST /auth/auth/token → 200 (0.350s)
2025-09-01 10:45:59,296 - LivroRouter - INFO - Livro criado com sucesso: ID 7
2025-09-01 10:45:59,306 - BibliotecaApp - INFO - POST /livros/ → 201 (0.056s)
2025-09-01 10:46:36,171 - BibliotecaApp - INFO - GET /livros/listar → 200 (0.018s)
2025-09-01 10:47:20,699 - BibliotecaApp - INFO - GET /livros/buscar/filtros → 200 (0.014s)
2025-09-01 10:47:39,600 - BibliotecaApp - INFO - GET /livros/buscar/filtros → 200 (0.012s)
2025-09-01 10:48:32,392 - BibliotecaApp - INFO - GET / → 200 (0.058s)
2025-09-01 10:48:36,594 - BibliotecaApp - INFO - GET /auth/login → 404 (0.007s)
2025-09-01 10:48:38,118 - BibliotecaApp - INFO - GET / → 200 (0.000s)
2025-09-01 10:48:59,425 - BibliotecaApp - INFO - GET /livros/estatisticas/resumo → 200 (0.024s)
2025-09-01 10:49:15,248 - BibliotecaApp - INFO - GET /livros/status → 422 (0.007s)
2025-09-01 10:49:25,671 - BibliotecaApp - INFO - GET /livros/status/completo → 200 (0.011s)
2025-09-01 10:49:54,928 - BibliotecaApp - INFO - GET /pedidos/status → 422 (0.012s)
2025-09-01 10:50:09,891 - BibliotecaApp - INFO - GET /usuarios/listar → 200 (0.018s)
2025-09-01 10:50:30,090 - BibliotecaApp - INFO - GET /usuarios/me → 200 (0.018s)
2025-09-01 10:50:49,145 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:22:28,706 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:22:28,709 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:22:28,773 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:22:40,844 - BibliotecaApp - INFO - GET /docs → 200 (0.006s)
2025-09-01 13:22:41,037 - BibliotecaApp - INFO - GET /openapi.json → 200 (0.069s)
2025-09-01 13:22:44,273 - BibliotecaApp - INFO - GET / → 200 (0.035s)
2025-09-01 13:22:48,303 - BibliotecaApp - INFO - GET /auth/login → 404 (0.005s)
2025-09-01 13:22:53,322 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-09-01 13:24:11,565 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:24:17,666 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:24:17,666 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:24:17,708 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:24:20,602 - BibliotecaApp - INFO - GET / → 200 (0.039s)
2025-09-01 13:25:06,739 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:25:12,603 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:25:12,603 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:25:12,674 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:25:15,223 - BibliotecaApp - INFO - GET / → 200 (0.031s)
2025-09-01 13:25:26,222 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:25:32,459 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:25:32,460 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:25:32,515 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:25:32,806 - BibliotecaApp - INFO - GET / → 200 (0.035s)
2025-09-01 13:26:11,442 - BibliotecaApp - INFO - GET /auth/login → 404 (0.007s)
2025-09-01 13:27:35,387 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:27:40,830 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:27:40,831 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:27:40,872 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:27:43,338 - BibliotecaApp - INFO - GET /auth/login → 404 (0.018s)
2025-09-01 13:27:44,301 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:27:44,825 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:27:45,262 - BibliotecaApp - INFO - GET /login → 404 (0.003s)
2025-09-01 13:27:45,465 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:27:45,698 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:27:45,906 - BibliotecaApp - INFO - GET /login → 404 (0.000s)
2025-09-01 13:27:46,094 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:27:46,847 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.002s)
2025-09-01 13:27:47,443 - BibliotecaApp - INFO - GET /login → 404 (0.002s)
2025-09-01 13:28:16,455 - BibliotecaApp - INFO - GET /login → 404 (0.003s)
2025-09-01 13:28:28,251 - BibliotecaApp - INFO - GET /auth/cadastro → 404 (0.003s)
2025-09-01 13:28:29,943 - BibliotecaApp - INFO - GET / → 200 (0.026s)
2025-09-01 13:29:06,137 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:29:12,232 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:29:12,235 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:29:12,280 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:29:15,435 - BibliotecaApp - INFO - GET /login → 404 (0.019s)
2025-09-01 13:29:16,655 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:29:17,665 - BibliotecaApp - INFO - GET /login → 404 (0.000s)
2025-09-01 13:29:18,317 - BibliotecaApp - INFO - GET /login → 404 (0.002s)
2025-09-01 13:29:21,046 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:29:50,236 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:29:56,691 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:29:56,691 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:29:56,737 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:30:01,334 - BibliotecaApp - INFO - GET /login → 404 (0.021s)
2025-09-01 13:30:01,982 - BibliotecaApp - INFO - GET /login → 404 (0.001s)
2025-09-01 13:30:06,907 - BibliotecaApp - INFO - GET /.well-known/appspecific/com.chrome.devtools.json → 404 (0.004s)
2025-09-01 13:31:29,953 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:31:36,107 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:31:36,111 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:31:36,167 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:31:36,224 - BibliotecaApp - INFO - GET /login → 404 (0.019s)
2025-09-01 13:31:36,268 - BibliotecaApp - INFO - GET /.well-known/appspecific/com.chrome.devtools.json → 404 (0.002s)
2025-09-01 13:38:01,472 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:38:07,303 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:38:07,303 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:38:07,369 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:38:53,707 - BibliotecaApp - INFO - GET / → 200 (0.038s)
2025-09-01 13:38:55,631 - BibliotecaApp - INFO - GET /auth/login → 404 (0.004s)
2025-09-01 13:39:43,236 - BibliotecaApp - INFO - GET /auth/login → 404 (0.002s)
2025-09-01 13:41:39,049 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:41:42,064 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:41:42,065 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:41:42,106 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:42:33,783 - BibliotecaApp - INFO - GET / → 200 (0.119s)
2025-09-01 13:42:35,639 - BibliotecaApp - INFO - GET /auth/login → 200 (0.067s)
2025-09-01 13:42:56,362 - BibliotecaApp - INFO - POST /auth/login → 401 (0.139s)
2025-09-01 13:43:03,632 - BibliotecaApp - INFO - POST /auth/login → 401 (0.015s)
2025-09-01 13:44:42,621 - BibliotecaApp - INFO - POST /auth/login → 302 (0.298s)
2025-09-01 13:44:42,633 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-09-01 13:44:48,439 - BibliotecaApp - INFO - GET /usuarios/editar → 200 (0.029s)
2025-09-01 13:44:54,137 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-09-01 13:44:54,178 - BibliotecaApp - INFO - GET /livros/ → 200 (0.037s)
2025-09-01 13:44:54,213 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-09-01 13:50:11,322 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.009s)
2025-09-01 13:52:40,913 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:52:43,586 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:52:43,586 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:52:43,643 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:53:47,404 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:53:47,404 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:53:47,456 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 13:53:50,380 - BibliotecaApp - INFO - GET / → 200 (0.086s)
2025-09-01 13:53:53,528 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-09-01 13:53:53,594 - BibliotecaApp - INFO - GET /livros/ → 200 (0.061s)
2025-09-01 13:53:53,620 - BibliotecaApp - INFO - GET /livros/string → 422 (0.004s)
2025-09-01 13:53:54,957 - BibliotecaApp - INFO - GET /carrinho → 307 (0.002s)
2025-09-01 13:53:54,969 - CarrinhoRouter - ERROR - Erro ao carregar carrinho: 'dict' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Colaborador\biblioteca\backend\app\routers\carrinho_router.py", line 28, in pagina_carrinho
    itens = service.listar_itens(user.id)
                                 ^^^^^^^
AttributeError: 'dict' object has no attribute 'id'
2025-09-01 13:53:54,992 - BibliotecaApp - INFO - GET /carrinho/ → 500 (0.030s)
2025-09-01 13:54:03,736 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.029s)
2025-09-01 13:54:05,645 - BibliotecaApp - INFO - GET / → 200 (0.006s)
2025-09-01 13:54:06,911 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.003s)
2025-09-01 13:54:06,918 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-09-01 13:54:08,516 - BibliotecaApp - INFO - GET /auth/cadastro → 200 (0.007s)
2025-09-01 13:58:42,883 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 13:58:47,011 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 13:58:47,013 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 13:58:47,098 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 14:01:36,925 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 14:01:41,348 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 14:01:41,348 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 14:01:41,439 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 14:05:06,459 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
2025-09-01 14:05:09,999 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 14:05:09,999 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 14:05:10,072 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 14:14:37,170 - BibliotecaApp - INFO - === INICIANDO APLICAÇÃO BIBLIOTECA ONLINE ===
2025-09-01 14:14:37,172 - BibliotecaApp - INFO - Criando/verificando tabelas do banco de dados...
2025-09-01 14:14:37,241 - BibliotecaApp - INFO - ✅ Tabelas criadas/verificadas com sucesso
2025-09-01 14:14:41,857 - BibliotecaApp - INFO - GET / → 200 (0.056s)
2025-09-01 14:14:48,704 - BibliotecaApp - INFO - GET /auth/login → 200 (0.098s)
2025-09-01 14:14:51,879 - BibliotecaApp - INFO - POST /auth/login → 302 (0.763s)
2025-09-01 14:14:51,919 - BibliotecaApp - INFO - GET / → 200 (0.025s)
2025-09-01 14:14:53,809 - BibliotecaApp - INFO - GET /carrinho → 307 (0.004s)
2025-09-01 14:14:53,990 - BibliotecaApp - INFO - GET /carrinho/ → 200 (0.165s)
2025-09-01 14:14:56,353 - BibliotecaApp - INFO - GET /livros → 307 (0.004s)
2025-09-01 14:14:56,500 - BibliotecaApp - INFO - GET /livros/ → 200 (0.142s)
2025-09-01 14:14:56,596 - BibliotecaApp - INFO - GET /livros/string → 422 (0.016s)
2025-09-01 14:14:58,014 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.021s)
2025-09-01 14:15:07,439 - BibliotecaApp - INFO - GET /auth/login → 200 (0.037s)
2025-09-01 14:15:12,192 - BibliotecaApp - INFO - GET /livros → 307 (0.004s)
2025-09-01 14:15:12,235 - BibliotecaApp - INFO - GET /livros/ → 200 (0.030s)
2025-09-01 14:15:12,331 - BibliotecaApp - INFO - GET /livros/string → 422 (0.012s)
2025-09-01 14:15:14,565 - BibliotecaApp - INFO - POST /api/carrinho/adicionar → 404 (0.006s)
2025-09-01 14:15:20,430 - BibliotecaApp - INFO - GET /livros/string → 422 (0.011s)
2025-09-01 14:15:38,938 - BibliotecaApp - INFO - GET /perfil → 404 (0.002s)
2025-09-01 14:15:39,031 - BibliotecaApp - INFO - GET /favicon.ico → 404 (0.001s)
2025-09-01 14:15:40,870 - BibliotecaApp - INFO - GET / → 200 (0.001s)
2025-09-01 14:15:43,160 - BibliotecaApp - INFO - GET /auth/login → 200 (0.010s)
2025-09-01 14:16:04,407 - BibliotecaApp - INFO - POST /auth/login → 302 (0.304s)
2025-09-01 14:16:04,420 - BibliotecaApp - INFO - GET / → 200 (0.007s)
2025-09-01 14:16:11,079 - BibliotecaApp - INFO - GET /livros → 307 (0.001s)
2025-09-01 14:16:11,100 - BibliotecaApp - INFO - GET /livros/ → 200 (0.015s)
2025-09-01 14:16:11,134 - BibliotecaApp - INFO - GET /livros/string → 422 (0.003s)
2025-09-01 14:16:16,121 - BibliotecaApp - INFO - GET /api/livros/cadastrar-form → 404 (0.002s)
2025-09-01 14:16:30,566 - BibliotecaApp - INFO - GET /auth/logout → 302 (0.008s)
2025-09-01 14:16:30,574 - BibliotecaApp - INFO - GET / → 200 (0.002s)
2025-09-01 14:16:32,866 - BibliotecaApp - INFO - GET /auth/login → 200 (0.015s)
2025-09-01 14:16:39,341 - BibliotecaApp - INFO - POST /auth/login → 401 (0.025s)
2025-09-01 14:17:21,648 - BibliotecaApp - INFO - POST /auth/login → 403 (0.557s)
2025-09-01 14:18:05,403 - BibliotecaApp - INFO - POST /auth/login → 302 (0.536s)
2025-09-01 14:18:05,433 - BibliotecaApp - INFO - GET / → 200 (0.018s)
2025-09-01 14:18:08,903 - BibliotecaApp - INFO - GET /livros → 307 (0.004s)
2025-09-01 14:18:08,953 - BibliotecaApp - INFO - GET /livros/ → 200 (0.035s)
2025-09-01 14:18:09,035 - BibliotecaApp - INFO - GET /livros/string → 422 (0.014s)
2025-09-01 14:18:10,199 - BibliotecaApp - INFO - GET /api/livros/cadastrar-form → 404 (0.005s)
2025-09-01 14:18:18,747 - BibliotecaApp - INFO - === APLICAÇÃO ENCERRADA ===
